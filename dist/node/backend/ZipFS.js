var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var api_error_1 = require('../core/api_error');
var node_fs_stats_1 = require('../core/node_fs_stats');
var file_system = require('../core/file_system');
var file_flag_1 = require('../core/file_flag');
var preload_file = require('../generic/preload_file');
var util_1 = require('../core/util');
var extended_ascii_1 = require('bfs-buffer/js/extended_ascii');
var inflateRaw = require('pako/dist/pako_inflate.min').inflateRaw;
var file_index_1 = require('../generic/file_index');
(function (ExternalFileAttributeType) {
    ExternalFileAttributeType[ExternalFileAttributeType["MSDOS"] = 0] = "MSDOS";
    ExternalFileAttributeType[ExternalFileAttributeType["AMIGA"] = 1] = "AMIGA";
    ExternalFileAttributeType[ExternalFileAttributeType["OPENVMS"] = 2] = "OPENVMS";
    ExternalFileAttributeType[ExternalFileAttributeType["UNIX"] = 3] = "UNIX";
    ExternalFileAttributeType[ExternalFileAttributeType["VM_CMS"] = 4] = "VM_CMS";
    ExternalFileAttributeType[ExternalFileAttributeType["ATARI_ST"] = 5] = "ATARI_ST";
    ExternalFileAttributeType[ExternalFileAttributeType["OS2_HPFS"] = 6] = "OS2_HPFS";
    ExternalFileAttributeType[ExternalFileAttributeType["MAC"] = 7] = "MAC";
    ExternalFileAttributeType[ExternalFileAttributeType["Z_SYSTEM"] = 8] = "Z_SYSTEM";
    ExternalFileAttributeType[ExternalFileAttributeType["CP_M"] = 9] = "CP_M";
    ExternalFileAttributeType[ExternalFileAttributeType["NTFS"] = 10] = "NTFS";
    ExternalFileAttributeType[ExternalFileAttributeType["MVS"] = 11] = "MVS";
    ExternalFileAttributeType[ExternalFileAttributeType["VSE"] = 12] = "VSE";
    ExternalFileAttributeType[ExternalFileAttributeType["ACORN_RISC"] = 13] = "ACORN_RISC";
    ExternalFileAttributeType[ExternalFileAttributeType["VFAT"] = 14] = "VFAT";
    ExternalFileAttributeType[ExternalFileAttributeType["ALT_MVS"] = 15] = "ALT_MVS";
    ExternalFileAttributeType[ExternalFileAttributeType["BEOS"] = 16] = "BEOS";
    ExternalFileAttributeType[ExternalFileAttributeType["TANDEM"] = 17] = "TANDEM";
    ExternalFileAttributeType[ExternalFileAttributeType["OS_400"] = 18] = "OS_400";
    ExternalFileAttributeType[ExternalFileAttributeType["OSX"] = 19] = "OSX";
})(exports.ExternalFileAttributeType || (exports.ExternalFileAttributeType = {}));
var ExternalFileAttributeType = exports.ExternalFileAttributeType;
(function (CompressionMethod) {
    CompressionMethod[CompressionMethod["STORED"] = 0] = "STORED";
    CompressionMethod[CompressionMethod["SHRUNK"] = 1] = "SHRUNK";
    CompressionMethod[CompressionMethod["REDUCED_1"] = 2] = "REDUCED_1";
    CompressionMethod[CompressionMethod["REDUCED_2"] = 3] = "REDUCED_2";
    CompressionMethod[CompressionMethod["REDUCED_3"] = 4] = "REDUCED_3";
    CompressionMethod[CompressionMethod["REDUCED_4"] = 5] = "REDUCED_4";
    CompressionMethod[CompressionMethod["IMPLODE"] = 6] = "IMPLODE";
    CompressionMethod[CompressionMethod["DEFLATE"] = 8] = "DEFLATE";
    CompressionMethod[CompressionMethod["DEFLATE64"] = 9] = "DEFLATE64";
    CompressionMethod[CompressionMethod["TERSE_OLD"] = 10] = "TERSE_OLD";
    CompressionMethod[CompressionMethod["BZIP2"] = 12] = "BZIP2";
    CompressionMethod[CompressionMethod["LZMA"] = 14] = "LZMA";
    CompressionMethod[CompressionMethod["TERSE_NEW"] = 18] = "TERSE_NEW";
    CompressionMethod[CompressionMethod["LZ77"] = 19] = "LZ77";
    CompressionMethod[CompressionMethod["WAVPACK"] = 97] = "WAVPACK";
    CompressionMethod[CompressionMethod["PPMD"] = 98] = "PPMD";
})(exports.CompressionMethod || (exports.CompressionMethod = {}));
var CompressionMethod = exports.CompressionMethod;
function msdos2date(time, date) {
    var day = date & 0x1F;
    var month = ((date >> 5) & 0xF) - 1;
    var year = (date >> 9) + 1980;
    var second = time & 0x1F;
    var minute = (time >> 5) & 0x3F;
    var hour = time >> 11;
    return new Date(year, month, day, hour, minute, second);
}
function safeToString(buff, useUTF8, start, length) {
    if (length === 0) {
        return "";
    }
    else if (useUTF8) {
        return buff.toString('utf8', start, start + length);
    }
    else {
        return extended_ascii_1["default"].byte2str(buff.slice(start, start + length));
    }
}
var FileHeader = (function () {
    function FileHeader(data) {
        this.data = data;
        if (data.readUInt32LE(0) !== 0x04034b50) {
            throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, "Invalid Zip file: Local file header has invalid signature: " + this.data.readUInt32LE(0));
        }
    }
    FileHeader.prototype.versionNeeded = function () { return this.data.readUInt16LE(4); };
    FileHeader.prototype.flags = function () { return this.data.readUInt16LE(6); };
    FileHeader.prototype.compressionMethod = function () { return this.data.readUInt16LE(8); };
    FileHeader.prototype.lastModFileTime = function () {
        return msdos2date(this.data.readUInt16LE(10), this.data.readUInt16LE(12));
    };
    FileHeader.prototype.rawLastModFileTime = function () {
        return this.data.readUInt32LE(10);
    };
    FileHeader.prototype.crc32 = function () { return this.data.readUInt32LE(14); };
    FileHeader.prototype.fileNameLength = function () { return this.data.readUInt16LE(26); };
    FileHeader.prototype.extraFieldLength = function () { return this.data.readUInt16LE(28); };
    FileHeader.prototype.fileName = function () {
        return safeToString(this.data, this.useUTF8(), 30, this.fileNameLength());
    };
    FileHeader.prototype.extraField = function () {
        var start = 30 + this.fileNameLength();
        return this.data.slice(start, start + this.extraFieldLength());
    };
    FileHeader.prototype.totalSize = function () { return 30 + this.fileNameLength() + this.extraFieldLength(); };
    FileHeader.prototype.useUTF8 = function () { return (this.flags() & 0x800) === 0x800; };
    return FileHeader;
})();
exports.FileHeader = FileHeader;
var FileData = (function () {
    function FileData(header, record, data) {
        this.header = header;
        this.record = record;
        this.data = data;
    }
    FileData.prototype.decompress = function () {
        var compressionMethod = this.header.compressionMethod();
        switch (compressionMethod) {
            case CompressionMethod.DEFLATE:
                var data = inflateRaw(util_1.buffer2Arrayish(this.data.slice(0, this.record.compressedSize())), { chunkSize: this.record.uncompressedSize() });
                return util_1.arrayish2Buffer(data);
            case CompressionMethod.STORED:
                return util_1.copyingSlice(this.data, 0, this.record.uncompressedSize());
            default:
                var name = CompressionMethod[compressionMethod];
                name = name ? name : "Unknown: " + compressionMethod;
                throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, "Invalid compression method on file '" + this.header.fileName() + "': " + name);
        }
    };
    FileData.prototype.getHeader = function () {
        return this.header;
    };
    FileData.prototype.getRecord = function () {
        return this.record;
    };
    FileData.prototype.getRawData = function () {
        return this.data;
    };
    return FileData;
})();
exports.FileData = FileData;
var DataDescriptor = (function () {
    function DataDescriptor(data) {
        this.data = data;
    }
    DataDescriptor.prototype.crc32 = function () { return this.data.readUInt32LE(0); };
    DataDescriptor.prototype.compressedSize = function () { return this.data.readUInt32LE(4); };
    DataDescriptor.prototype.uncompressedSize = function () { return this.data.readUInt32LE(8); };
    return DataDescriptor;
})();
exports.DataDescriptor = DataDescriptor;
var ArchiveExtraDataRecord = (function () {
    function ArchiveExtraDataRecord(data) {
        this.data = data;
        if (this.data.readUInt32LE(0) !== 0x08064b50) {
            throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, "Invalid archive extra data record signature: " + this.data.readUInt32LE(0));
        }
    }
    ArchiveExtraDataRecord.prototype.length = function () { return this.data.readUInt32LE(4); };
    ArchiveExtraDataRecord.prototype.extraFieldData = function () { return this.data.slice(8, 8 + this.length()); };
    return ArchiveExtraDataRecord;
})();
exports.ArchiveExtraDataRecord = ArchiveExtraDataRecord;
var DigitalSignature = (function () {
    function DigitalSignature(data) {
        this.data = data;
        if (this.data.readUInt32LE(0) !== 0x05054b50) {
            throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, "Invalid digital signature signature: " + this.data.readUInt32LE(0));
        }
    }
    DigitalSignature.prototype.size = function () { return this.data.readUInt16LE(4); };
    DigitalSignature.prototype.signatureData = function () { return this.data.slice(6, 6 + this.size()); };
    return DigitalSignature;
})();
exports.DigitalSignature = DigitalSignature;
var CentralDirectory = (function () {
    function CentralDirectory(zipData, data) {
        this.zipData = zipData;
        this.data = data;
        if (this.data.readUInt32LE(0) !== 0x02014b50)
            throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, "Invalid Zip file: Central directory record has invalid signature: " + this.data.readUInt32LE(0));
    }
    CentralDirectory.prototype.versionMadeBy = function () { return this.data.readUInt16LE(4); };
    CentralDirectory.prototype.versionNeeded = function () { return this.data.readUInt16LE(6); };
    CentralDirectory.prototype.flag = function () { return this.data.readUInt16LE(8); };
    CentralDirectory.prototype.compressionMethod = function () { return this.data.readUInt16LE(10); };
    CentralDirectory.prototype.lastModFileTime = function () {
        return msdos2date(this.data.readUInt16LE(12), this.data.readUInt16LE(14));
    };
    CentralDirectory.prototype.rawLastModFileTime = function () {
        return this.data.readUInt32LE(12);
    };
    CentralDirectory.prototype.crc32 = function () { return this.data.readUInt32LE(16); };
    CentralDirectory.prototype.compressedSize = function () { return this.data.readUInt32LE(20); };
    CentralDirectory.prototype.uncompressedSize = function () { return this.data.readUInt32LE(24); };
    CentralDirectory.prototype.fileNameLength = function () { return this.data.readUInt16LE(28); };
    CentralDirectory.prototype.extraFieldLength = function () { return this.data.readUInt16LE(30); };
    CentralDirectory.prototype.fileCommentLength = function () { return this.data.readUInt16LE(32); };
    CentralDirectory.prototype.diskNumberStart = function () { return this.data.readUInt16LE(34); };
    CentralDirectory.prototype.internalAttributes = function () { return this.data.readUInt16LE(36); };
    CentralDirectory.prototype.externalAttributes = function () { return this.data.readUInt32LE(38); };
    CentralDirectory.prototype.headerRelativeOffset = function () { return this.data.readUInt32LE(42); };
    CentralDirectory.prototype.fileName = function () {
        var fileName = safeToString(this.data, this.useUTF8(), 46, this.fileNameLength());
        return fileName.replace(/\\/g, "/");
    };
    CentralDirectory.prototype.rawFileName = function () {
        return this.data.slice(46, 46 + this.fileNameLength());
    };
    CentralDirectory.prototype.extraField = function () {
        var start = 44 + this.fileNameLength();
        return this.data.slice(start, start + this.extraFieldLength());
    };
    CentralDirectory.prototype.fileComment = function () {
        var start = 46 + this.fileNameLength() + this.extraFieldLength();
        return safeToString(this.data, this.useUTF8(), start, this.fileCommentLength());
    };
    CentralDirectory.prototype.rawFileComment = function () {
        var start = 46 + this.fileNameLength() + this.extraFieldLength();
        return this.data.slice(start, start + this.fileCommentLength());
    };
    CentralDirectory.prototype.totalSize = function () {
        return 46 + this.fileNameLength() + this.extraFieldLength() + this.fileCommentLength();
    };
    CentralDirectory.prototype.isDirectory = function () {
        var fileName = this.fileName();
        return (this.externalAttributes() & 0x10 ? true : false) || (fileName.charAt(fileName.length - 1) === '/');
    };
    CentralDirectory.prototype.isFile = function () { return !this.isDirectory(); };
    CentralDirectory.prototype.useUTF8 = function () { return (this.flag() & 0x800) === 0x800; };
    CentralDirectory.prototype.isEncrypted = function () { return (this.flag() & 0x1) === 0x1; };
    CentralDirectory.prototype.getFileData = function () {
        var start = this.headerRelativeOffset();
        var header = new FileHeader(this.zipData.slice(start));
        return new FileData(header, this, this.zipData.slice(start + header.totalSize()));
    };
    CentralDirectory.prototype.getData = function () {
        return this.getFileData().decompress();
    };
    CentralDirectory.prototype.getRawData = function () {
        return this.getFileData().getRawData();
    };
    CentralDirectory.prototype.getStats = function () {
        return new node_fs_stats_1.default(node_fs_stats_1.FileType.FILE, this.uncompressedSize(), 0x16D, new Date(), this.lastModFileTime());
    };
    return CentralDirectory;
})();
exports.CentralDirectory = CentralDirectory;
var EndOfCentralDirectory = (function () {
    function EndOfCentralDirectory(data) {
        this.data = data;
        if (this.data.readUInt32LE(0) !== 0x06054b50)
            throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, "Invalid Zip file: End of central directory record has invalid signature: " + this.data.readUInt32LE(0));
    }
    EndOfCentralDirectory.prototype.diskNumber = function () { return this.data.readUInt16LE(4); };
    EndOfCentralDirectory.prototype.cdDiskNumber = function () { return this.data.readUInt16LE(6); };
    EndOfCentralDirectory.prototype.cdDiskEntryCount = function () { return this.data.readUInt16LE(8); };
    EndOfCentralDirectory.prototype.cdTotalEntryCount = function () { return this.data.readUInt16LE(10); };
    EndOfCentralDirectory.prototype.cdSize = function () { return this.data.readUInt32LE(12); };
    EndOfCentralDirectory.prototype.cdOffset = function () { return this.data.readUInt32LE(16); };
    EndOfCentralDirectory.prototype.cdZipCommentLength = function () { return this.data.readUInt16LE(20); };
    EndOfCentralDirectory.prototype.cdZipComment = function () {
        return safeToString(this.data, true, 22, this.cdZipCommentLength());
    };
    EndOfCentralDirectory.prototype.rawCdZipComment = function () {
        return this.data.slice(22, 22 + this.cdZipCommentLength());
    };
    return EndOfCentralDirectory;
})();
exports.EndOfCentralDirectory = EndOfCentralDirectory;
var ZipFS = (function (_super) {
    __extends(ZipFS, _super);
    function ZipFS(data, name) {
        if (name === void 0) { name = ''; }
        _super.call(this);
        this.data = data;
        this.name = name;
        this._index = new file_index_1.FileIndex();
        this._directoryEntries = [];
        this._eocd = null;
        this.populateIndex();
    }
    ZipFS.prototype.getName = function () {
        return 'ZipFS' + (this.name !== '' ? ' ' + this.name : '');
    };
    ZipFS.prototype.getCentralDirectoryEntry = function (path) {
        var inode = this._index.getInode(path);
        if (inode === null) {
            throw api_error_1.ApiError.ENOENT(path);
        }
        if (file_index_1.isFileInode(inode)) {
            return inode.getData();
        }
        else if (file_index_1.isDirInode(inode)) {
            return inode.getData();
        }
    };
    ZipFS.prototype.getCentralDirectoryEntryAt = function (index) {
        var dirEntry = this._directoryEntries[index];
        if (!dirEntry) {
            throw new RangeError("Invalid directory index: " + index + ".");
        }
        return dirEntry;
    };
    ZipFS.prototype.getNumberOfCentralDirectoryEntries = function () {
        return this._directoryEntries.length;
    };
    ZipFS.prototype.getEndOfCentralDirectory = function () {
        return this._eocd;
    };
    ZipFS.isAvailable = function () { return true; };
    ZipFS.prototype.diskSpace = function (path, cb) {
        cb(this.data.length, 0);
    };
    ZipFS.prototype.isReadOnly = function () {
        return true;
    };
    ZipFS.prototype.supportsLinks = function () {
        return false;
    };
    ZipFS.prototype.supportsProps = function () {
        return false;
    };
    ZipFS.prototype.supportsSynch = function () {
        return true;
    };
    ZipFS.prototype.statSync = function (path, isLstat) {
        var inode = this._index.getInode(path);
        if (inode === null) {
            throw api_error_1.ApiError.ENOENT(path);
        }
        var stats;
        if (file_index_1.isFileInode(inode)) {
            stats = inode.getData().getStats();
        }
        else if (file_index_1.isDirInode(inode)) {
            stats = inode.getStats();
        }
        else {
            throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, "Invalid inode.");
        }
        return stats;
    };
    ZipFS.prototype.openSync = function (path, flags, mode) {
        if (flags.isWriteable()) {
            throw new api_error_1.ApiError(api_error_1.ErrorCode.EPERM, path);
        }
        var inode = this._index.getInode(path);
        if (!inode) {
            throw api_error_1.ApiError.ENOENT(path);
        }
        else if (file_index_1.isFileInode(inode)) {
            var cdRecord = inode.getData();
            var stats = cdRecord.getStats();
            switch (flags.pathExistsAction()) {
                case file_flag_1.ActionType.THROW_EXCEPTION:
                case file_flag_1.ActionType.TRUNCATE_FILE:
                    throw api_error_1.ApiError.EEXIST(path);
                case file_flag_1.ActionType.NOP:
                    return new preload_file.NoSyncFile(this, path, flags, stats, cdRecord.getData());
                default:
                    throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, 'Invalid FileMode object.');
            }
            return null;
        }
        else {
            throw api_error_1.ApiError.EISDIR(path);
        }
    };
    ZipFS.prototype.readdirSync = function (path) {
        var inode = this._index.getInode(path);
        if (!inode) {
            throw api_error_1.ApiError.ENOENT(path);
        }
        else if (file_index_1.isDirInode(inode)) {
            return inode.getListing();
        }
        else {
            throw api_error_1.ApiError.ENOTDIR(path);
        }
    };
    ZipFS.prototype.readFileSync = function (fname, encoding, flag) {
        var fd = this.openSync(fname, flag, 0x1a4);
        try {
            var fdCast = fd;
            var fdBuff = fdCast.getBuffer();
            if (encoding === null) {
                return util_1.copyingSlice(fdBuff);
            }
            return fdBuff.toString(encoding);
        }
        finally {
            fd.closeSync();
        }
    };
    ZipFS.prototype.getEOCD = function () {
        var startOffset = 22;
        var endOffset = Math.min(startOffset + 0xFFFF, this.data.length - 1);
        for (var i = startOffset; i < endOffset; i++) {
            if (this.data.readUInt32LE(this.data.length - i) === 0x06054b50) {
                return new EndOfCentralDirectory(this.data.slice(this.data.length - i));
            }
        }
        throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, "Invalid ZIP file: Could not locate End of Central Directory signature.");
    };
    ZipFS.prototype.populateIndex = function () {
        var eocd = this._eocd = this.getEOCD();
        if (eocd.diskNumber() !== eocd.cdDiskNumber())
            throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, "ZipFS does not support spanned zip files.");
        var cdPtr = eocd.cdOffset();
        if (cdPtr === 0xFFFFFFFF)
            throw new api_error_1.ApiError(api_error_1.ErrorCode.EINVAL, "ZipFS does not support Zip64.");
        var cdEnd = cdPtr + eocd.cdSize();
        while (cdPtr < cdEnd) {
            var cd = new CentralDirectory(this.data, this.data.slice(cdPtr));
            cdPtr += cd.totalSize();
            var filename = cd.fileName();
            if (filename.charAt(0) === '/')
                throw new Error("WHY IS THIS ABSOLUTE");
            if (filename.charAt(filename.length - 1) === '/') {
                filename = filename.substr(0, filename.length - 1);
            }
            if (cd.isDirectory()) {
                this._index.addPath('/' + filename, new file_index_1.DirInode(cd));
            }
            else {
                this._index.addPath('/' + filename, new file_index_1.FileInode(cd));
            }
            this._directoryEntries.push(cd);
        }
    };
    return ZipFS;
})(file_system.SynchronousFileSystem);
exports.__esModule = true;
exports["default"] = ZipFS;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiWmlwRlMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvYmFja2VuZC9aaXBGUy50cyJdLCJuYW1lcyI6WyJFeHRlcm5hbEZpbGVBdHRyaWJ1dGVUeXBlIiwiQ29tcHJlc3Npb25NZXRob2QiLCJtc2RvczJkYXRlIiwic2FmZVRvU3RyaW5nIiwiRmlsZUhlYWRlciIsIkZpbGVIZWFkZXIuY29uc3RydWN0b3IiLCJGaWxlSGVhZGVyLnZlcnNpb25OZWVkZWQiLCJGaWxlSGVhZGVyLmZsYWdzIiwiRmlsZUhlYWRlci5jb21wcmVzc2lvbk1ldGhvZCIsIkZpbGVIZWFkZXIubGFzdE1vZEZpbGVUaW1lIiwiRmlsZUhlYWRlci5yYXdMYXN0TW9kRmlsZVRpbWUiLCJGaWxlSGVhZGVyLmNyYzMyIiwiRmlsZUhlYWRlci5maWxlTmFtZUxlbmd0aCIsIkZpbGVIZWFkZXIuZXh0cmFGaWVsZExlbmd0aCIsIkZpbGVIZWFkZXIuZmlsZU5hbWUiLCJGaWxlSGVhZGVyLmV4dHJhRmllbGQiLCJGaWxlSGVhZGVyLnRvdGFsU2l6ZSIsIkZpbGVIZWFkZXIudXNlVVRGOCIsIkZpbGVEYXRhIiwiRmlsZURhdGEuY29uc3RydWN0b3IiLCJGaWxlRGF0YS5kZWNvbXByZXNzIiwiRmlsZURhdGEuZ2V0SGVhZGVyIiwiRmlsZURhdGEuZ2V0UmVjb3JkIiwiRmlsZURhdGEuZ2V0UmF3RGF0YSIsIkRhdGFEZXNjcmlwdG9yIiwiRGF0YURlc2NyaXB0b3IuY29uc3RydWN0b3IiLCJEYXRhRGVzY3JpcHRvci5jcmMzMiIsIkRhdGFEZXNjcmlwdG9yLmNvbXByZXNzZWRTaXplIiwiRGF0YURlc2NyaXB0b3IudW5jb21wcmVzc2VkU2l6ZSIsIkFyY2hpdmVFeHRyYURhdGFSZWNvcmQiLCJBcmNoaXZlRXh0cmFEYXRhUmVjb3JkLmNvbnN0cnVjdG9yIiwiQXJjaGl2ZUV4dHJhRGF0YVJlY29yZC5sZW5ndGgiLCJBcmNoaXZlRXh0cmFEYXRhUmVjb3JkLmV4dHJhRmllbGREYXRhIiwiRGlnaXRhbFNpZ25hdHVyZSIsIkRpZ2l0YWxTaWduYXR1cmUuY29uc3RydWN0b3IiLCJEaWdpdGFsU2lnbmF0dXJlLnNpemUiLCJEaWdpdGFsU2lnbmF0dXJlLnNpZ25hdHVyZURhdGEiLCJDZW50cmFsRGlyZWN0b3J5IiwiQ2VudHJhbERpcmVjdG9yeS5jb25zdHJ1Y3RvciIsIkNlbnRyYWxEaXJlY3RvcnkudmVyc2lvbk1hZGVCeSIsIkNlbnRyYWxEaXJlY3RvcnkudmVyc2lvbk5lZWRlZCIsIkNlbnRyYWxEaXJlY3RvcnkuZmxhZyIsIkNlbnRyYWxEaXJlY3RvcnkuY29tcHJlc3Npb25NZXRob2QiLCJDZW50cmFsRGlyZWN0b3J5Lmxhc3RNb2RGaWxlVGltZSIsIkNlbnRyYWxEaXJlY3RvcnkucmF3TGFzdE1vZEZpbGVUaW1lIiwiQ2VudHJhbERpcmVjdG9yeS5jcmMzMiIsIkNlbnRyYWxEaXJlY3RvcnkuY29tcHJlc3NlZFNpemUiLCJDZW50cmFsRGlyZWN0b3J5LnVuY29tcHJlc3NlZFNpemUiLCJDZW50cmFsRGlyZWN0b3J5LmZpbGVOYW1lTGVuZ3RoIiwiQ2VudHJhbERpcmVjdG9yeS5leHRyYUZpZWxkTGVuZ3RoIiwiQ2VudHJhbERpcmVjdG9yeS5maWxlQ29tbWVudExlbmd0aCIsIkNlbnRyYWxEaXJlY3RvcnkuZGlza051bWJlclN0YXJ0IiwiQ2VudHJhbERpcmVjdG9yeS5pbnRlcm5hbEF0dHJpYnV0ZXMiLCJDZW50cmFsRGlyZWN0b3J5LmV4dGVybmFsQXR0cmlidXRlcyIsIkNlbnRyYWxEaXJlY3RvcnkuaGVhZGVyUmVsYXRpdmVPZmZzZXQiLCJDZW50cmFsRGlyZWN0b3J5LmZpbGVOYW1lIiwiQ2VudHJhbERpcmVjdG9yeS5yYXdGaWxlTmFtZSIsIkNlbnRyYWxEaXJlY3RvcnkuZXh0cmFGaWVsZCIsIkNlbnRyYWxEaXJlY3RvcnkuZmlsZUNvbW1lbnQiLCJDZW50cmFsRGlyZWN0b3J5LnJhd0ZpbGVDb21tZW50IiwiQ2VudHJhbERpcmVjdG9yeS50b3RhbFNpemUiLCJDZW50cmFsRGlyZWN0b3J5LmlzRGlyZWN0b3J5IiwiQ2VudHJhbERpcmVjdG9yeS5pc0ZpbGUiLCJDZW50cmFsRGlyZWN0b3J5LnVzZVVURjgiLCJDZW50cmFsRGlyZWN0b3J5LmlzRW5jcnlwdGVkIiwiQ2VudHJhbERpcmVjdG9yeS5nZXRGaWxlRGF0YSIsIkNlbnRyYWxEaXJlY3RvcnkuZ2V0RGF0YSIsIkNlbnRyYWxEaXJlY3RvcnkuZ2V0UmF3RGF0YSIsIkNlbnRyYWxEaXJlY3RvcnkuZ2V0U3RhdHMiLCJFbmRPZkNlbnRyYWxEaXJlY3RvcnkiLCJFbmRPZkNlbnRyYWxEaXJlY3RvcnkuY29uc3RydWN0b3IiLCJFbmRPZkNlbnRyYWxEaXJlY3RvcnkuZGlza051bWJlciIsIkVuZE9mQ2VudHJhbERpcmVjdG9yeS5jZERpc2tOdW1iZXIiLCJFbmRPZkNlbnRyYWxEaXJlY3RvcnkuY2REaXNrRW50cnlDb3VudCIsIkVuZE9mQ2VudHJhbERpcmVjdG9yeS5jZFRvdGFsRW50cnlDb3VudCIsIkVuZE9mQ2VudHJhbERpcmVjdG9yeS5jZFNpemUiLCJFbmRPZkNlbnRyYWxEaXJlY3RvcnkuY2RPZmZzZXQiLCJFbmRPZkNlbnRyYWxEaXJlY3RvcnkuY2RaaXBDb21tZW50TGVuZ3RoIiwiRW5kT2ZDZW50cmFsRGlyZWN0b3J5LmNkWmlwQ29tbWVudCIsIkVuZE9mQ2VudHJhbERpcmVjdG9yeS5yYXdDZFppcENvbW1lbnQiLCJaaXBGUyIsIlppcEZTLmNvbnN0cnVjdG9yIiwiWmlwRlMuZ2V0TmFtZSIsIlppcEZTLmdldENlbnRyYWxEaXJlY3RvcnlFbnRyeSIsIlppcEZTLmdldENlbnRyYWxEaXJlY3RvcnlFbnRyeUF0IiwiWmlwRlMuZ2V0TnVtYmVyT2ZDZW50cmFsRGlyZWN0b3J5RW50cmllcyIsIlppcEZTLmdldEVuZE9mQ2VudHJhbERpcmVjdG9yeSIsIlppcEZTLmlzQXZhaWxhYmxlIiwiWmlwRlMuZGlza1NwYWNlIiwiWmlwRlMuaXNSZWFkT25seSIsIlppcEZTLnN1cHBvcnRzTGlua3MiLCJaaXBGUy5zdXBwb3J0c1Byb3BzIiwiWmlwRlMuc3VwcG9ydHNTeW5jaCIsIlppcEZTLnN0YXRTeW5jIiwiWmlwRlMub3BlblN5bmMiLCJaaXBGUy5yZWFkZGlyU3luYyIsIlppcEZTLnJlYWRGaWxlU3luYyIsIlppcEZTLmdldEVPQ0QiLCJaaXBGUy5wb3B1bGF0ZUluZGV4Il0sIm1hcHBpbmdzIjoiOzs7OztBQStDQSwwQkFBa0MsbUJBQW1CLENBQUMsQ0FBQTtBQUN0RCw4QkFBeUMsdUJBQXVCLENBQUMsQ0FBQTtBQUNqRSxJQUFPLFdBQVcsV0FBVyxxQkFBcUIsQ0FBQyxDQUFDO0FBRXBELDBCQUFtQyxtQkFBbUIsQ0FBQyxDQUFBO0FBQ3ZELElBQU8sWUFBWSxXQUFXLHlCQUF5QixDQUFDLENBQUM7QUFDekQscUJBQXVFLGNBQWMsQ0FBQyxDQUFBO0FBQ3RGLCtCQUEwQiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3pELElBQUksVUFBVSxHQUlWLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUNyRCwyQkFBc0UsdUJBQXVCLENBQUMsQ0FBQTtBQU05RixXQUFZLHlCQUF5QjtJQUNuQ0EsMkVBQVNBLENBQUFBO0lBQUVBLDJFQUFTQSxDQUFBQTtJQUFFQSwrRUFBV0EsQ0FBQUE7SUFBRUEseUVBQVFBLENBQUFBO0lBQUVBLDZFQUFVQSxDQUFBQTtJQUFFQSxpRkFBWUEsQ0FBQUE7SUFDckVBLGlGQUFZQSxDQUFBQTtJQUFFQSx1RUFBT0EsQ0FBQUE7SUFBRUEsaUZBQVlBLENBQUFBO0lBQUVBLHlFQUFRQSxDQUFBQTtJQUFFQSwwRUFBU0EsQ0FBQUE7SUFBRUEsd0VBQVFBLENBQUFBO0lBQUVBLHdFQUFRQSxDQUFBQTtJQUM1RUEsc0ZBQWVBLENBQUFBO0lBQUVBLDBFQUFTQSxDQUFBQTtJQUFFQSxnRkFBWUEsQ0FBQUE7SUFBRUEsMEVBQVNBLENBQUFBO0lBQUVBLDhFQUFXQSxDQUFBQTtJQUFFQSw4RUFBV0EsQ0FBQUE7SUFDN0VBLHdFQUFRQSxDQUFBQTtBQUNWQSxDQUFDQSxF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QUFyTUQsRUFBbUMsV0FBVyxDQUFDLHFCQUFxQixFQXFNbkU7QUFyTUQ7MEJBcU1DLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFppcCBmaWxlLWJhY2tlZCBmaWxlc3lzdGVtXG4gKiBJbXBsZW1lbnRlZCBhY2NvcmRpbmcgdG8gdGhlIHN0YW5kYXJkOlxuICogaHR0cDovL3d3dy5wa3dhcmUuY29tL2RvY3VtZW50cy9jYXNlc3R1ZGllcy9BUFBOT1RFLlRYVFxuICpcbiAqIFdoaWxlIHRoZXJlIGFyZSBhIGZldyB6aXAgbGlicmFyaWVzIGZvciBKYXZhU2NyaXB0IChlLmcuIEpTWmlwIGFuZCB6aXAuanMpLFxuICogdGhleSBhcmUgbm90IGEgZ29vZCBtYXRjaCBmb3IgQnJvd3NlckZTLiBJbiBwYXJ0aWN1bGFyLCB0aGVzZSBsaWJyYXJpZXNcbiAqIHBlcmZvcm0gYSBsb3Qgb2YgdW5uZWVkZWQgZGF0YSBjb3B5aW5nLCBhbmQgZWFnZXJseSBkZWNvbXByZXNzIGV2ZXJ5IGZpbGVcbiAqIGluIHRoZSB6aXAgZmlsZSB1cG9uIGxvYWRpbmcgdG8gY2hlY2sgdGhlIENSQzMyLiBUaGV5IGFsc28gZWFnZXJseSBkZWNvZGVcbiAqIHN0cmluZ3MuIEZ1cnRoZXJtb3JlLCB0aGVzZSBsaWJyYXJpZXMgZHVwbGljYXRlIGZ1bmN0aW9uYWxpdHkgYWxyZWFkeSBwcmVzZW50XG4gKiBpbiBCcm93c2VyRlMgKGUuZy4gVVRGLTggZGVjb2RpbmcgYW5kIGJpbmFyeSBkYXRhIG1hbmlwdWxhdGlvbikuXG4gKlxuICogVGhpcyBmaWxlc3lzdGVtIHRha2VzIGFkdmFudGFnZSBvZiBCcm93c2VyRlMncyBCdWZmZXIgaW1wbGVtZW50YXRpb24sIHdoaWNoXG4gKiBlZmZpY2llbnRseSByZXByZXNlbnRzIHRoZSB6aXAgZmlsZSBpbiBtZW1vcnkgKGluIGJvdGggQXJyYXlCdWZmZXItZW5hYmxlZFxuICogYnJvd3NlcnMgKmFuZCogbm9uLUFycmF5QnVmZmVyIGJyb3dzZXJzKSwgYW5kIHdoaWNoIGNhbiBuZWF0bHkgYmUgJ3NsaWNlZCdcbiAqIHdpdGhvdXQgY29weWluZyBkYXRhLiBFYWNoIHN0cnVjdCBkZWZpbmVkIGluIHRoZSBzdGFuZGFyZCBpcyByZXByZXNlbnRlZCB3aXRoXG4gKiBhIGJ1ZmZlciBzbGljZSBwb2ludGluZyB0byBhbiBvZmZzZXQgaW4gdGhlIHppcCBmaWxlLCBhbmQgaGFzIGdldHRlcnMgZm9yXG4gKiBlYWNoIGZpZWxkLiBBcyB3ZSBhbnRpY2lwYXRlIHRoYXQgdGhpcyBkYXRhIHdpbGwgbm90IGJlIHJlYWQgb2Z0ZW4sIHdlIGNob29zZVxuICogbm90IHRvIHN0b3JlIGVhY2ggc3RydWN0IGZpZWxkIGluIHRoZSBKYXZhU2NyaXB0IG9iamVjdDsgaW5zdGVhZCwgdG8gcmVkdWNlXG4gKiBtZW1vcnkgY29uc3VtcHRpb24sIHdlIHJldHJpZXZlIGl0IGRpcmVjdGx5IGZyb20gdGhlIGJpbmFyeSBkYXRhIGVhY2ggdGltZSBpdFxuICogaXMgcmVxdWVzdGVkLlxuICpcbiAqIFdoZW4gdGhlIGZpbGVzeXN0ZW0gaXMgaW5zdGFudGlhdGVkLCB3ZSBkZXRlcm1pbmUgdGhlIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAqIG9mIHRoZSB6aXAgZmlsZSBhcyBxdWlja2x5IGFzIHBvc3NpYmxlLiBXZSBsYXppbHkgZGVjb21wcmVzcyBhbmQgY2hlY2sgdGhlXG4gKiBDUkMzMiBvZiBmaWxlcy4gV2UgZG8gbm90IGNhY2hlIGRlY29tcHJlc3NlZCBmaWxlczsgaWYgdGhpcyBpcyBhIGRlc2lyZWRcbiAqIGZlYXR1cmUsIGl0IGlzIGJlc3QgaW1wbGVtZW50ZWQgYXMgYSBnZW5lcmljIGZpbGUgc3lzdGVtIHdyYXBwZXIgdGhhdCBjYW5cbiAqIGNhY2hlIGRhdGEgZnJvbSBhcmJpdHJhcnkgZmlsZSBzeXN0ZW1zLlxuICpcbiAqIEZvciBpbmZsYXRpb24sIHdlIHVzZSBgcGFqb2AncyBpbXBsZW1lbnRhdGlvbjpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvcGFrb1xuICpcbiAqIFVuZm9ydHVuYXRlbHksIHRoZWlyIGltcGxlbWVudGF0aW9uIGZhbGxzIGJhY2sgdG8gYW4gYXJyYXkgb2YgYnl0ZXMgZm9yIG5vbi1cbiAqIFR5cGVkQXJyYXkgYnJvd3NlcnMsIHdoaWNoIGlzIHJlc3VsdHMgaW4gYSBtdWNoIGxhcmdlciBtZW1vcnkgZm9vdHByaW50IGluXG4gKiB0aG9zZSBicm93c2Vycy4gUGVyaGFwcyBvbmUgZGF5IHdlJ2xsIGhhdmUgYW4gaW1wbGVtZW50YXRpb24gb2YgaW5mbGF0ZSB0aGF0XG4gKiB3b3JrcyBvbiBCdWZmZXJzPyA6KVxuICpcbiAqIEN1cnJlbnQgbGltaXRhdGlvbnM6XG4gKiAqIE5vIGVuY3J5cHRpb24uXG4gKiAqIE5vIFpJUDY0IHN1cHBvcnQuXG4gKiAqIFJlYWQtb25seS5cbiAqICAgV3JpdGUgc3VwcG9ydCB3b3VsZCByZXF1aXJlIHRoYXQgd2U6XG4gKiAgIC0gS2VlcCB0cmFjayBvZiBjaGFuZ2VkL25ldyBmaWxlcy5cbiAqICAgLSBDb21wcmVzcyBjaGFuZ2VkIGZpbGVzLCBhbmQgZ2VuZXJhdGUgYXBwcm9wcmlhdGUgbWV0YWRhdGEgZm9yIGVhY2guXG4gKiAgIC0gVXBkYXRlIGZpbGUgb2Zmc2V0cyBmb3Igb3RoZXIgZmlsZXMgaW4gdGhlIHppcCBmaWxlLlxuICogICAtIFN0cmVhbSBpdCBvdXQgdG8gYSBsb2NhdGlvbi5cbiAqICAgVGhpcyBpc24ndCB0aGF0IGJhZCwgc28gd2UgbWlnaHQgZG8gdGhpcyBhdCBhIGxhdGVyIGRhdGUuXG4gKi9cbmltcG9ydCB7QXBpRXJyb3IsIEVycm9yQ29kZX0gZnJvbSAnLi4vY29yZS9hcGlfZXJyb3InO1xuaW1wb3J0IHtkZWZhdWx0IGFzIFN0YXRzLCBGaWxlVHlwZX0gZnJvbSAnLi4vY29yZS9ub2RlX2ZzX3N0YXRzJztcbmltcG9ydCBmaWxlX3N5c3RlbSA9IHJlcXVpcmUoJy4uL2NvcmUvZmlsZV9zeXN0ZW0nKTtcbmltcG9ydCBmaWxlID0gcmVxdWlyZSgnLi4vY29yZS9maWxlJyk7XG5pbXBvcnQge0ZpbGVGbGFnLCBBY3Rpb25UeXBlfSBmcm9tICcuLi9jb3JlL2ZpbGVfZmxhZyc7XG5pbXBvcnQgcHJlbG9hZF9maWxlID0gcmVxdWlyZSgnLi4vZ2VuZXJpYy9wcmVsb2FkX2ZpbGUnKTtcbmltcG9ydCB7QXJyYXlpc2gsIGJ1ZmZlcjJBcnJheWlzaCwgYXJyYXlpc2gyQnVmZmVyLCBjb3B5aW5nU2xpY2V9IGZyb20gJy4uL2NvcmUvdXRpbCc7XG5pbXBvcnQgRXh0ZW5kZWRBU0NJSSBmcm9tICdiZnMtYnVmZmVyL2pzL2V4dGVuZGVkX2FzY2lpJztcbnZhciBpbmZsYXRlUmF3OiB7XG4gIChkYXRhOiBBcnJheWlzaDxudW1iZXI+LCBvcHRpb25zPzoge1xuICAgIGNodW5rU2l6ZTogbnVtYmVyO1xuICB9KTogQXJyYXlpc2g8bnVtYmVyPjtcbn0gPSByZXF1aXJlKCdwYWtvL2Rpc3QvcGFrb19pbmZsYXRlLm1pbicpLmluZmxhdGVSYXc7XG5pbXBvcnQge0ZpbGVJbmRleCwgRGlySW5vZGUsIEZpbGVJbm9kZSwgaXNEaXJJbm9kZSwgaXNGaWxlSW5vZGV9IGZyb20gJy4uL2dlbmVyaWMvZmlsZV9pbmRleCc7XG5cblxuLyoqXG4gKiA0LjQuMi4yOiBJbmRpY2F0ZXMgdGhlIGNvbXBhdGliaWx0aXkgb2YgYSBmaWxlJ3MgZXh0ZXJuYWwgYXR0cmlidXRlcy5cbiAqL1xuZXhwb3J0IGVudW0gRXh0ZXJuYWxGaWxlQXR0cmlidXRlVHlwZSB7XG4gIE1TRE9TID0gMCwgQU1JR0EgPSAxLCBPUEVOVk1TID0gMiwgVU5JWCA9IDMsIFZNX0NNUyA9IDQsIEFUQVJJX1NUID0gNSxcbiAgT1MyX0hQRlMgPSA2LCBNQUMgPSA3LCBaX1NZU1RFTSA9IDgsIENQX00gPSA5LCBOVEZTID0gMTAsIE1WUyA9IDExLCBWU0UgPSAxMixcbiAgQUNPUk5fUklTQyA9IDEzLCBWRkFUID0gMTQsIEFMVF9NVlMgPSAxNSwgQkVPUyA9IDE2LCBUQU5ERU0gPSAxNywgT1NfNDAwID0gMTgsXG4gIE9TWCA9IDE5XG59XG5cbi8qKlxuICogNC40LjVcbiAqL1xuZXhwb3J0IGVudW0gQ29tcHJlc3Npb25NZXRob2Qge1xuICBTVE9SRUQgPSAwLCAgICAgLy8gVGhlIGZpbGUgaXMgc3RvcmVkIChubyBjb21wcmVzc2lvbilcbiAgU0hSVU5LID0gMSwgICAgIC8vIFRoZSBmaWxlIGlzIFNocnVua1xuICBSRURVQ0VEXzEgPSAyLCAgLy8gVGhlIGZpbGUgaXMgUmVkdWNlZCB3aXRoIGNvbXByZXNzaW9uIGZhY3RvciAxXG4gIFJFRFVDRURfMiA9IDMsICAvLyBUaGUgZmlsZSBpcyBSZWR1Y2VkIHdpdGggY29tcHJlc3Npb24gZmFjdG9yIDJcbiAgUkVEVUNFRF8zID0gNCwgIC8vIFRoZSBmaWxlIGlzIFJlZHVjZWQgd2l0aCBjb21wcmVzc2lvbiBmYWN0b3IgM1xuICBSRURVQ0VEXzQgPSA1LCAgLy8gVGhlIGZpbGUgaXMgUmVkdWNlZCB3aXRoIGNvbXByZXNzaW9uIGZhY3RvciA0XG4gIElNUExPREUgPSA2LCAgICAvLyBUaGUgZmlsZSBpcyBJbXBsb2RlZFxuICBERUZMQVRFID0gOCwgICAgLy8gVGhlIGZpbGUgaXMgRGVmbGF0ZWRcbiAgREVGTEFURTY0ID0gOSwgIC8vIEVuaGFuY2VkIERlZmxhdGluZyB1c2luZyBEZWZsYXRlNjQodG0pXG4gIFRFUlNFX09MRCA9IDEwLCAvLyBQS1dBUkUgRGF0YSBDb21wcmVzc2lvbiBMaWJyYXJ5IEltcGxvZGluZyAob2xkIElCTSBURVJTRSlcbiAgQlpJUDIgPSAxMiwgICAgIC8vIEZpbGUgaXMgY29tcHJlc3NlZCB1c2luZyBCWklQMiBhbGdvcml0aG1cbiAgTFpNQSA9IDE0LCAgICAgIC8vIExaTUEgKEVGUylcbiAgVEVSU0VfTkVXID0gMTgsIC8vIEZpbGUgaXMgY29tcHJlc3NlZCB1c2luZyBJQk0gVEVSU0UgKG5ldylcbiAgTFo3NyA9IDE5LCAgICAgIC8vIElCTSBMWjc3IHogQXJjaGl0ZWN0dXJlIChQRlMpXG4gIFdBVlBBQ0sgPSA5NywgICAvLyBXYXZQYWNrIGNvbXByZXNzZWQgZGF0YVxuICBQUE1EID0gOTggICAgICAgLy8gUFBNZCB2ZXJzaW9uIEksIFJldiAxXG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIGlucHV0IHRpbWUgYW5kIGRhdGUgaW4gTVMtRE9TIGZvcm1hdCBpbnRvIGEgSmF2YVNjcmlwdCBEYXRlXG4gKiBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIG1zZG9zMmRhdGUodGltZTogbnVtYmVyLCBkYXRlOiBudW1iZXIpOiBEYXRlIHtcbiAgLy8gTVMtRE9TIERhdGVcbiAgLy98MCAwIDAgMCAgMHwwIDAgMCAgMHwwIDAgMCAgMCAwIDAgMFxuICAvLyAgRCAoMS0zMSkgIE0gKDEtMjMpICBZIChmcm9tIDE5ODApXG4gIHZhciBkYXkgPSBkYXRlICYgMHgxRjtcbiAgLy8gSlMgZGF0ZSBpcyAwLWluZGV4ZWQsIERPUyBpcyAxLWluZGV4ZWQuXG4gIHZhciBtb250aCA9ICgoZGF0ZSA+PiA1KSAmIDB4RikgLSAxO1xuICB2YXIgeWVhciA9IChkYXRlID4+IDkpICsgMTk4MDtcbiAgLy8gTVMgRE9TIFRpbWVcbiAgLy98MCAwIDAgMCAgMHwwIDAgMCAgMCAwIDB8MCAgMCAwIDAgMFxuICAvLyAgIFNlY29uZCAgICAgIE1pbnV0ZSAgICAgICBIb3VyXG4gIHZhciBzZWNvbmQgPSB0aW1lICYgMHgxRjtcbiAgdmFyIG1pbnV0ZSA9ICh0aW1lID4+IDUpICYgMHgzRjtcbiAgdmFyIGhvdXIgPSB0aW1lID4+IDExO1xuICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQpO1xufVxuXG4vKipcbiAqIFNhZmVseSByZXR1cm5zIHRoZSBzdHJpbmcgZnJvbSB0aGUgYnVmZmVyLCBldmVuIGlmIGl0IGlzIDAgYnl0ZXMgbG9uZy5cbiAqIChOb3JtYWxseSwgY2FsbGluZyB0b1N0cmluZygpIG9uIGEgYnVmZmVyIHdpdGggc3RhcnQgPT09IGVuZCBjYXVzZXMgYW5cbiAqIGV4Y2VwdGlvbikuXG4gKi9cbmZ1bmN0aW9uIHNhZmVUb1N0cmluZyhidWZmOiBOb2RlQnVmZmVyLCB1c2VVVEY4OiBib29sZWFuLCBzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG4gIGlmIChsZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfSBlbHNlIGlmICh1c2VVVEY4KSB7XG4gICAgcmV0dXJuIGJ1ZmYudG9TdHJpbmcoJ3V0ZjgnLCBzdGFydCwgc3RhcnQgKyBsZW5ndGgpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBFeHRlbmRlZEFTQ0lJLmJ5dGUyc3RyKGJ1ZmYuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgbGVuZ3RoKSk7XG4gIH1cbn1cblxuLypcbiAgIDQuMy42IE92ZXJhbGwgLlpJUCBmaWxlIGZvcm1hdDpcblxuICAgICAgW2xvY2FsIGZpbGUgaGVhZGVyIDFdXG4gICAgICBbZW5jcnlwdGlvbiBoZWFkZXIgMV1cbiAgICAgIFtmaWxlIGRhdGEgMV1cbiAgICAgIFtkYXRhIGRlc2NyaXB0b3IgMV1cbiAgICAgIC5cbiAgICAgIC5cbiAgICAgIC5cbiAgICAgIFtsb2NhbCBmaWxlIGhlYWRlciBuXVxuICAgICAgW2VuY3J5cHRpb24gaGVhZGVyIG5dXG4gICAgICBbZmlsZSBkYXRhIG5dXG4gICAgICBbZGF0YSBkZXNjcmlwdG9yIG5dXG4gICAgICBbYXJjaGl2ZSBkZWNyeXB0aW9uIGhlYWRlcl1cbiAgICAgIFthcmNoaXZlIGV4dHJhIGRhdGEgcmVjb3JkXVxuICAgICAgW2NlbnRyYWwgZGlyZWN0b3J5IGhlYWRlciAxXVxuICAgICAgLlxuICAgICAgLlxuICAgICAgLlxuICAgICAgW2NlbnRyYWwgZGlyZWN0b3J5IGhlYWRlciBuXVxuICAgICAgW3ppcDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSByZWNvcmRdXG4gICAgICBbemlwNjQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IGxvY2F0b3JdXG4gICAgICBbZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IHJlY29yZF1cbiovXG5cbi8qXG4gNC4zLjcgIExvY2FsIGZpbGUgaGVhZGVyOlxuXG4gICAgICBsb2NhbCBmaWxlIGhlYWRlciBzaWduYXR1cmUgICAgIDQgYnl0ZXMgICgweDA0MDM0YjUwKVxuICAgICAgdmVyc2lvbiBuZWVkZWQgdG8gZXh0cmFjdCAgICAgICAyIGJ5dGVzXG4gICAgICBnZW5lcmFsIHB1cnBvc2UgYml0IGZsYWcgICAgICAgIDIgYnl0ZXNcbiAgICAgIGNvbXByZXNzaW9uIG1ldGhvZCAgICAgICAgICAgICAgMiBieXRlc1xuICAgICAgbGFzdCBtb2QgZmlsZSB0aW1lICAgICAgICAgICAgICAyIGJ5dGVzXG4gICAgICBsYXN0IG1vZCBmaWxlIGRhdGUgICAgICAgICAgICAgIDIgYnl0ZXNcbiAgICAgIGNyYy0zMiAgICAgICAgICAgICAgICAgICAgICAgICAgNCBieXRlc1xuICAgICAgY29tcHJlc3NlZCBzaXplICAgICAgICAgICAgICAgICA0IGJ5dGVzXG4gICAgICB1bmNvbXByZXNzZWQgc2l6ZSAgICAgICAgICAgICAgIDQgYnl0ZXNcbiAgICAgIGZpbGUgbmFtZSBsZW5ndGggICAgICAgICAgICAgICAgMiBieXRlc1xuICAgICAgZXh0cmEgZmllbGQgbGVuZ3RoICAgICAgICAgICAgICAyIGJ5dGVzXG5cbiAgICAgIGZpbGUgbmFtZSAodmFyaWFibGUgc2l6ZSlcbiAgICAgIGV4dHJhIGZpZWxkICh2YXJpYWJsZSBzaXplKVxuICovXG5leHBvcnQgY2xhc3MgRmlsZUhlYWRlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YTogTm9kZUJ1ZmZlcikge1xuICAgIGlmIChkYXRhLnJlYWRVSW50MzJMRSgwKSAhPT0gMHgwNDAzNGI1MCkge1xuICAgICAgdGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsIFwiSW52YWxpZCBaaXAgZmlsZTogTG9jYWwgZmlsZSBoZWFkZXIgaGFzIGludmFsaWQgc2lnbmF0dXJlOiBcIiArIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMCkpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgdmVyc2lvbk5lZWRlZCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSg0KTsgfVxuICBwdWJsaWMgZmxhZ3MoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoNik7IH1cbiAgcHVibGljIGNvbXByZXNzaW9uTWV0aG9kKCk6IENvbXByZXNzaW9uTWV0aG9kIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoOCk7IH1cbiAgcHVibGljIGxhc3RNb2RGaWxlVGltZSgpOiBEYXRlIHtcbiAgICAvLyBUaW1lIGFuZCBkYXRlIGlzIGluIE1TLURPUyBmb3JtYXQuXG4gICAgcmV0dXJuIG1zZG9zMmRhdGUodGhpcy5kYXRhLnJlYWRVSW50MTZMRSgxMCksIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMTIpKTtcbiAgfVxuICBwdWJsaWMgcmF3TGFzdE1vZEZpbGVUaW1lKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMTApO1xuICB9XG4gIHB1YmxpYyBjcmMzMigpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgxNCk7IH1cbiAgLyoqXG4gICAqIFRoZXNlIHR3byB2YWx1ZXMgYXJlIENPTVBMRVRFTFkgVVNFTEVTUy5cbiAgICpcbiAgICogU2VjdGlvbiA0LjQuOTpcbiAgICogICBJZiBiaXQgMyBvZiB0aGUgZ2VuZXJhbCBwdXJwb3NlIGJpdCBmbGFnIGlzIHNldCxcbiAgICogICB0aGVzZSBmaWVsZHMgYXJlIHNldCB0byB6ZXJvIGluIHRoZSBsb2NhbCBoZWFkZXIgYW5kIHRoZVxuICAgKiAgIGNvcnJlY3QgdmFsdWVzIGFyZSBwdXQgaW4gdGhlIGRhdGEgZGVzY3JpcHRvciBhbmRcbiAgICogICBpbiB0aGUgY2VudHJhbCBkaXJlY3RvcnkuXG4gICAqXG4gICAqIFNvIHdlJ2xsIGp1c3QgdXNlIHRoZSBjZW50cmFsIGRpcmVjdG9yeSdzIHZhbHVlcy5cbiAgICovXG4gIC8vIHB1YmxpYyBjb21wcmVzc2VkU2l6ZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgxOCk7IH1cbiAgLy8gcHVibGljIHVuY29tcHJlc3NlZFNpemUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMjIpOyB9XG4gIHB1YmxpYyBmaWxlTmFtZUxlbmd0aCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSgyNik7IH1cbiAgcHVibGljIGV4dHJhRmllbGRMZW5ndGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMjgpOyB9XG4gIHB1YmxpYyBmaWxlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBzYWZlVG9TdHJpbmcodGhpcy5kYXRhLCB0aGlzLnVzZVVURjgoKSwgMzAsIHRoaXMuZmlsZU5hbWVMZW5ndGgoKSk7XG4gIH1cbiAgcHVibGljIGV4dHJhRmllbGQoKTogTm9kZUJ1ZmZlciB7XG4gICAgdmFyIHN0YXJ0ID0gMzAgKyB0aGlzLmZpbGVOYW1lTGVuZ3RoKCk7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5zbGljZShzdGFydCwgc3RhcnQgKyB0aGlzLmV4dHJhRmllbGRMZW5ndGgoKSk7XG4gIH1cbiAgcHVibGljIHRvdGFsU2l6ZSgpOiBudW1iZXIgeyByZXR1cm4gMzAgKyB0aGlzLmZpbGVOYW1lTGVuZ3RoKCkgKyB0aGlzLmV4dHJhRmllbGRMZW5ndGgoKTsgfVxuICBwdWJsaWMgdXNlVVRGOCgpOiBib29sZWFuIHsgcmV0dXJuICh0aGlzLmZsYWdzKCkgJiAweDgwMCkgPT09IDB4ODAwOyB9XG59XG5cbi8qKlxuICA0LjMuOCAgRmlsZSBkYXRhXG5cbiAgICBJbW1lZGlhdGVseSBmb2xsb3dpbmcgdGhlIGxvY2FsIGhlYWRlciBmb3IgYSBmaWxlXG4gICAgU0hPVUxEIGJlIHBsYWNlZCB0aGUgY29tcHJlc3NlZCBvciBzdG9yZWQgZGF0YSBmb3IgdGhlIGZpbGUuXG4gICAgSWYgdGhlIGZpbGUgaXMgZW5jcnlwdGVkLCB0aGUgZW5jcnlwdGlvbiBoZWFkZXIgZm9yIHRoZSBmaWxlXG4gICAgU0hPVUxEIGJlIHBsYWNlZCBhZnRlciB0aGUgbG9jYWwgaGVhZGVyIGFuZCBiZWZvcmUgdGhlIGZpbGVcbiAgICBkYXRhLiBUaGUgc2VyaWVzIG9mIFtsb2NhbCBmaWxlIGhlYWRlcl1bZW5jcnlwdGlvbiBoZWFkZXJdXG4gICAgW2ZpbGUgZGF0YV1bZGF0YSBkZXNjcmlwdG9yXSByZXBlYXRzIGZvciBlYWNoIGZpbGUgaW4gdGhlXG4gICAgLlpJUCBhcmNoaXZlLlxuXG4gICAgWmVyby1ieXRlIGZpbGVzLCBkaXJlY3RvcmllcywgYW5kIG90aGVyIGZpbGUgdHlwZXMgdGhhdFxuICAgIGNvbnRhaW4gbm8gY29udGVudCBNVVNUIG5vdCBpbmNsdWRlIGZpbGUgZGF0YS5cbiovXG5leHBvcnQgY2xhc3MgRmlsZURhdGEge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGhlYWRlcjogRmlsZUhlYWRlciwgcHJpdmF0ZSByZWNvcmQ6IENlbnRyYWxEaXJlY3RvcnksIHByaXZhdGUgZGF0YTogTm9kZUJ1ZmZlcikge31cbiAgcHVibGljIGRlY29tcHJlc3MoKTogTm9kZUJ1ZmZlciB7XG4gICAgLy8gQ2hlY2sgdGhlIGNvbXByZXNzaW9uXG4gICAgdmFyIGNvbXByZXNzaW9uTWV0aG9kOiBDb21wcmVzc2lvbk1ldGhvZCA9IHRoaXMuaGVhZGVyLmNvbXByZXNzaW9uTWV0aG9kKCk7XG4gICAgc3dpdGNoIChjb21wcmVzc2lvbk1ldGhvZCkge1xuICAgICAgY2FzZSBDb21wcmVzc2lvbk1ldGhvZC5ERUZMQVRFOlxuICAgICAgICB2YXIgZGF0YSA9IGluZmxhdGVSYXcoXG4gICAgICAgICAgYnVmZmVyMkFycmF5aXNoKHRoaXMuZGF0YS5zbGljZSgwLCB0aGlzLnJlY29yZC5jb21wcmVzc2VkU2l6ZSgpKSksXG4gICAgICAgICAgeyBjaHVua1NpemU6IHRoaXMucmVjb3JkLnVuY29tcHJlc3NlZFNpemUoKSB9XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBhcnJheWlzaDJCdWZmZXIoZGF0YSk7XG4gICAgICBjYXNlIENvbXByZXNzaW9uTWV0aG9kLlNUT1JFRDpcbiAgICAgICAgLy8gR3JhYiBhbmQgY29weS5cbiAgICAgICAgcmV0dXJuIGNvcHlpbmdTbGljZSh0aGlzLmRhdGEsIDAsIHRoaXMucmVjb3JkLnVuY29tcHJlc3NlZFNpemUoKSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB2YXIgbmFtZTogc3RyaW5nID0gQ29tcHJlc3Npb25NZXRob2RbY29tcHJlc3Npb25NZXRob2RdO1xuICAgICAgICBuYW1lID0gbmFtZSA/IG5hbWUgOiBcIlVua25vd246IFwiICsgY29tcHJlc3Npb25NZXRob2Q7XG4gICAgICAgIHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCBcIkludmFsaWQgY29tcHJlc3Npb24gbWV0aG9kIG9uIGZpbGUgJ1wiICsgdGhpcy5oZWFkZXIuZmlsZU5hbWUoKSArIFwiJzogXCIgKyBuYW1lKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldEhlYWRlcigpOiBGaWxlSGVhZGVyIHtcbiAgICByZXR1cm4gdGhpcy5oZWFkZXI7XG4gIH1cbiAgcHVibGljIGdldFJlY29yZCgpOiBDZW50cmFsRGlyZWN0b3J5IHtcbiAgICByZXR1cm4gdGhpcy5yZWNvcmQ7XG4gIH1cbiAgcHVibGljIGdldFJhd0RhdGEoKTogTm9kZUJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfVxufVxuXG4vKlxuIDQuMy45ICBEYXRhIGRlc2NyaXB0b3I6XG5cbiAgICAgIGNyYy0zMiAgICAgICAgICAgICAgICAgICAgICAgICAgNCBieXRlc1xuICAgICAgY29tcHJlc3NlZCBzaXplICAgICAgICAgICAgICAgICA0IGJ5dGVzXG4gICAgICB1bmNvbXByZXNzZWQgc2l6ZSAgICAgICAgICAgICAgIDQgYnl0ZXNcbiAqL1xuZXhwb3J0IGNsYXNzIERhdGFEZXNjcmlwdG9yIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhOiBOb2RlQnVmZmVyKSB7fVxuICBwdWJsaWMgY3JjMzIoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMCk7IH1cbiAgcHVibGljIGNvbXByZXNzZWRTaXplKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDQpOyB9XG4gIHB1YmxpYyB1bmNvbXByZXNzZWRTaXplKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDgpOyB9XG59XG5cbi8qXG5gIDQuMy4xMCAgQXJjaGl2ZSBkZWNyeXB0aW9uIGhlYWRlcjpcblxuICAgICAgNC4zLjEwLjEgVGhlIEFyY2hpdmUgRGVjcnlwdGlvbiBIZWFkZXIgaXMgaW50cm9kdWNlZCBpbiB2ZXJzaW9uIDYuMlxuICAgICAgb2YgdGhlIFpJUCBmb3JtYXQgc3BlY2lmaWNhdGlvbi4gIFRoaXMgcmVjb3JkIGV4aXN0cyBpbiBzdXBwb3J0XG4gICAgICBvZiB0aGUgQ2VudHJhbCBEaXJlY3RvcnkgRW5jcnlwdGlvbiBGZWF0dXJlIGltcGxlbWVudGVkIGFzIHBhcnQgb2ZcbiAgICAgIHRoZSBTdHJvbmcgRW5jcnlwdGlvbiBTcGVjaWZpY2F0aW9uIGFzIGRlc2NyaWJlZCBpbiB0aGlzIGRvY3VtZW50LlxuICAgICAgV2hlbiB0aGUgQ2VudHJhbCBEaXJlY3RvcnkgU3RydWN0dXJlIGlzIGVuY3J5cHRlZCwgdGhpcyBkZWNyeXB0aW9uXG4gICAgICBoZWFkZXIgTVVTVCBwcmVjZWRlIHRoZSBlbmNyeXB0ZWQgZGF0YSBzZWdtZW50LlxuICovXG4vKlxuICA0LjMuMTEgIEFyY2hpdmUgZXh0cmEgZGF0YSByZWNvcmQ6XG5cbiAgICAgICAgYXJjaGl2ZSBleHRyYSBkYXRhIHNpZ25hdHVyZSAgICA0IGJ5dGVzICAoMHgwODA2NGI1MClcbiAgICAgICAgZXh0cmEgZmllbGQgbGVuZ3RoICAgICAgICAgICAgICA0IGJ5dGVzXG4gICAgICAgIGV4dHJhIGZpZWxkIGRhdGEgICAgICAgICAgICAgICAgKHZhcmlhYmxlIHNpemUpXG5cbiAgICAgIDQuMy4xMS4xIFRoZSBBcmNoaXZlIEV4dHJhIERhdGEgUmVjb3JkIGlzIGludHJvZHVjZWQgaW4gdmVyc2lvbiA2LjJcbiAgICAgIG9mIHRoZSBaSVAgZm9ybWF0IHNwZWNpZmljYXRpb24uICBUaGlzIHJlY29yZCBNQVkgYmUgdXNlZCBpbiBzdXBwb3J0XG4gICAgICBvZiB0aGUgQ2VudHJhbCBEaXJlY3RvcnkgRW5jcnlwdGlvbiBGZWF0dXJlIGltcGxlbWVudGVkIGFzIHBhcnQgb2ZcbiAgICAgIHRoZSBTdHJvbmcgRW5jcnlwdGlvbiBTcGVjaWZpY2F0aW9uIGFzIGRlc2NyaWJlZCBpbiB0aGlzIGRvY3VtZW50LlxuICAgICAgV2hlbiBwcmVzZW50LCB0aGlzIHJlY29yZCBNVVNUIGltbWVkaWF0ZWx5IHByZWNlZGUgdGhlIGNlbnRyYWxcbiAgICAgIGRpcmVjdG9yeSBkYXRhIHN0cnVjdHVyZS5cbiovXG5leHBvcnQgY2xhc3MgQXJjaGl2ZUV4dHJhRGF0YVJlY29yZCB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YTogTm9kZUJ1ZmZlcikge1xuICAgIGlmICh0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDApICE9PSAweDA4MDY0YjUwKSB7XG4gICAgICB0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgXCJJbnZhbGlkIGFyY2hpdmUgZXh0cmEgZGF0YSByZWNvcmQgc2lnbmF0dXJlOiBcIiArIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMCkpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgbGVuZ3RoKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDQpOyB9XG4gIHB1YmxpYyBleHRyYUZpZWxkRGF0YSgpOiBOb2RlQnVmZmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5zbGljZSg4LCA4ICsgdGhpcy5sZW5ndGgoKSk7IH1cbn1cblxuLypcbiAgNC4zLjEzIERpZ2l0YWwgc2lnbmF0dXJlOlxuXG4gICAgICAgIGhlYWRlciBzaWduYXR1cmUgICAgICAgICAgICAgICAgNCBieXRlcyAgKDB4MDUwNTRiNTApXG4gICAgICAgIHNpemUgb2YgZGF0YSAgICAgICAgICAgICAgICAgICAgMiBieXRlc1xuICAgICAgICBzaWduYXR1cmUgZGF0YSAodmFyaWFibGUgc2l6ZSlcblxuICAgICAgV2l0aCB0aGUgaW50cm9kdWN0aW9uIG9mIHRoZSBDZW50cmFsIERpcmVjdG9yeSBFbmNyeXB0aW9uXG4gICAgICBmZWF0dXJlIGluIHZlcnNpb24gNi4yIG9mIHRoaXMgc3BlY2lmaWNhdGlvbiwgdGhlIENlbnRyYWxcbiAgICAgIERpcmVjdG9yeSBTdHJ1Y3R1cmUgTUFZIGJlIHN0b3JlZCBib3RoIGNvbXByZXNzZWQgYW5kIGVuY3J5cHRlZC5cbiAgICAgIEFsdGhvdWdoIG5vdCByZXF1aXJlZCwgaXQgaXMgYXNzdW1lZCB3aGVuIGVuY3J5cHRpbmcgdGhlXG4gICAgICBDZW50cmFsIERpcmVjdG9yeSBTdHJ1Y3R1cmUsIHRoYXQgaXQgd2lsbCBiZSBjb21wcmVzc2VkXG4gICAgICBmb3IgZ3JlYXRlciBzdG9yYWdlIGVmZmljaWVuY3kuICBJbmZvcm1hdGlvbiBvbiB0aGVcbiAgICAgIENlbnRyYWwgRGlyZWN0b3J5IEVuY3J5cHRpb24gZmVhdHVyZSBjYW4gYmUgZm91bmQgaW4gdGhlIHNlY3Rpb25cbiAgICAgIGRlc2NyaWJpbmcgdGhlIFN0cm9uZyBFbmNyeXB0aW9uIFNwZWNpZmljYXRpb24uIFRoZSBEaWdpdGFsXG4gICAgICBTaWduYXR1cmUgcmVjb3JkIHdpbGwgYmUgbmVpdGhlciBjb21wcmVzc2VkIG5vciBlbmNyeXB0ZWQuXG4qL1xuZXhwb3J0IGNsYXNzIERpZ2l0YWxTaWduYXR1cmUge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGE6IE5vZGVCdWZmZXIpIHtcbiAgICBpZiAodGhpcy5kYXRhLnJlYWRVSW50MzJMRSgwKSAhPT0gMHgwNTA1NGI1MCkge1xuICAgICAgdGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsIFwiSW52YWxpZCBkaWdpdGFsIHNpZ25hdHVyZSBzaWduYXR1cmU6IFwiICsgdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgwKSk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBzaXplKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDQpOyB9XG4gIHB1YmxpYyBzaWduYXR1cmVEYXRhKCk6IE5vZGVCdWZmZXIgeyByZXR1cm4gdGhpcy5kYXRhLnNsaWNlKDYsIDYgKyB0aGlzLnNpemUoKSk7IH1cbn1cblxuLypcbiAgNC4zLjEyICBDZW50cmFsIGRpcmVjdG9yeSBzdHJ1Y3R1cmU6XG5cbiAgICBjZW50cmFsIGZpbGUgaGVhZGVyIHNpZ25hdHVyZSAgIDQgYnl0ZXMgICgweDAyMDE0YjUwKVxuICAgIHZlcnNpb24gbWFkZSBieSAgICAgICAgICAgICAgICAgMiBieXRlc1xuICAgIHZlcnNpb24gbmVlZGVkIHRvIGV4dHJhY3QgICAgICAgMiBieXRlc1xuICAgIGdlbmVyYWwgcHVycG9zZSBiaXQgZmxhZyAgICAgICAgMiBieXRlc1xuICAgIGNvbXByZXNzaW9uIG1ldGhvZCAgICAgICAgICAgICAgMiBieXRlc1xuICAgIGxhc3QgbW9kIGZpbGUgdGltZSAgICAgICAgICAgICAgMiBieXRlc1xuICAgIGxhc3QgbW9kIGZpbGUgZGF0ZSAgICAgICAgICAgICAgMiBieXRlc1xuICAgIGNyYy0zMiAgICAgICAgICAgICAgICAgICAgICAgICAgNCBieXRlc1xuICAgIGNvbXByZXNzZWQgc2l6ZSAgICAgICAgICAgICAgICAgNCBieXRlc1xuICAgIHVuY29tcHJlc3NlZCBzaXplICAgICAgICAgICAgICAgNCBieXRlc1xuICAgIGZpbGUgbmFtZSBsZW5ndGggICAgICAgICAgICAgICAgMiBieXRlc1xuICAgIGV4dHJhIGZpZWxkIGxlbmd0aCAgICAgICAgICAgICAgMiBieXRlc1xuICAgIGZpbGUgY29tbWVudCBsZW5ndGggICAgICAgICAgICAgMiBieXRlc1xuICAgIGRpc2sgbnVtYmVyIHN0YXJ0ICAgICAgICAgICAgICAgMiBieXRlc1xuICAgIGludGVybmFsIGZpbGUgYXR0cmlidXRlcyAgICAgICAgMiBieXRlc1xuICAgIGV4dGVybmFsIGZpbGUgYXR0cmlidXRlcyAgICAgICAgNCBieXRlc1xuICAgIHJlbGF0aXZlIG9mZnNldCBvZiBsb2NhbCBoZWFkZXIgNCBieXRlc1xuXG4gICAgZmlsZSBuYW1lICh2YXJpYWJsZSBzaXplKVxuICAgIGV4dHJhIGZpZWxkICh2YXJpYWJsZSBzaXplKVxuICAgIGZpbGUgY29tbWVudCAodmFyaWFibGUgc2l6ZSlcbiAqL1xuZXhwb3J0IGNsYXNzIENlbnRyYWxEaXJlY3Rvcnkge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHppcERhdGE6IE5vZGVCdWZmZXIsIHByaXZhdGUgZGF0YTogTm9kZUJ1ZmZlcikge1xuICAgIC8vIFNhbml0eSBjaGVjay5cbiAgICBpZiAodGhpcy5kYXRhLnJlYWRVSW50MzJMRSgwKSAhPT0gMHgwMjAxNGI1MClcbiAgICAgIHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCBcIkludmFsaWQgWmlwIGZpbGU6IENlbnRyYWwgZGlyZWN0b3J5IHJlY29yZCBoYXMgaW52YWxpZCBzaWduYXR1cmU6IFwiICsgdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgwKSk7XG4gIH1cbiAgcHVibGljIHZlcnNpb25NYWRlQnkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoNCk7IH1cbiAgcHVibGljIHZlcnNpb25OZWVkZWQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoNik7IH1cbiAgcHVibGljIGZsYWcoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoOCk7IH1cbiAgcHVibGljIGNvbXByZXNzaW9uTWV0aG9kKCk6IENvbXByZXNzaW9uTWV0aG9kIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMTApOyB9XG4gIHB1YmxpYyBsYXN0TW9kRmlsZVRpbWUoKTogRGF0ZSB7XG4gICAgLy8gVGltZSBhbmQgZGF0ZSBpcyBpbiBNUy1ET1MgZm9ybWF0LlxuICAgIHJldHVybiBtc2RvczJkYXRlKHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMTIpLCB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDE0KSk7XG4gIH1cbiAgcHVibGljIHJhd0xhc3RNb2RGaWxlVGltZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDEyKTtcbiAgfVxuICBwdWJsaWMgY3JjMzIoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMTYpOyB9XG4gIHB1YmxpYyBjb21wcmVzc2VkU2l6ZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgyMCk7IH1cbiAgcHVibGljIHVuY29tcHJlc3NlZFNpemUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMjQpOyB9XG4gIHB1YmxpYyBmaWxlTmFtZUxlbmd0aCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSgyOCk7IH1cbiAgcHVibGljIGV4dHJhRmllbGRMZW5ndGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMzApOyB9XG4gIHB1YmxpYyBmaWxlQ29tbWVudExlbmd0aCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSgzMik7IH1cbiAgcHVibGljIGRpc2tOdW1iZXJTdGFydCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSgzNCk7IH1cbiAgcHVibGljIGludGVybmFsQXR0cmlidXRlcygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSgzNik7IH1cbiAgcHVibGljIGV4dGVybmFsQXR0cmlidXRlcygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgzOCk7IH1cbiAgcHVibGljIGhlYWRlclJlbGF0aXZlT2Zmc2V0KCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDQyKTsgfVxuICBwdWJsaWMgZmlsZU5hbWUoKTogc3RyaW5nIHtcbiAgICAvKlxuICAgICAgNC40LjE3LjEgY2xhaW1zOlxuICAgICAgKiBBbGwgc2xhc2hlcyBhcmUgZm9yd2FyZCAoJy8nKSBzbGFzaGVzLlxuICAgICAgKiBGaWxlbmFtZSBkb2Vzbid0IGJlZ2luIHdpdGggYSBzbGFzaC5cbiAgICAgICogTm8gZHJpdmUgbGV0dGVycyBvciBhbnkgbm9uc2Vuc2UgbGlrZSB0aGF0LlxuICAgICAgKiBJZiBmaWxlbmFtZSBpcyBtaXNzaW5nLCB0aGUgaW5wdXQgY2FtZSBmcm9tIHN0YW5kYXJkIGlucHV0LlxuXG4gICAgICBVbmZvcnR1bmF0ZWx5LCB0aGlzIGlzbid0IHRydWUgaW4gcHJhY3RpY2UuIFNvbWUgV2luZG93cyB6aXAgdXRpbGl0aWVzIHVzZVxuICAgICAgYSBiYWNrc2xhc2ggaGVyZSwgYnV0IHRoZSBjb3JyZWN0IFVuaXgtc3R5bGUgcGF0aCBpbiBmaWxlIGhlYWRlcnMuXG5cbiAgICAgIFRvIGF2b2lkIHNlZWtpbmcgYWxsIG92ZXIgdGhlIGZpbGUgdG8gcmVjb3ZlciB0aGUga25vd24tZ29vZCBmaWxlbmFtZXNcbiAgICAgIGZyb20gZmlsZSBoZWFkZXJzLCB3ZSBzaW1wbHkgY29udmVydCAnLycgdG8gJ1xcJyBoZXJlLlxuICAgICovXG4gICAgdmFyIGZpbGVOYW1lOiBzdHJpbmcgPSBzYWZlVG9TdHJpbmcodGhpcy5kYXRhLCB0aGlzLnVzZVVURjgoKSwgNDYsIHRoaXMuZmlsZU5hbWVMZW5ndGgoKSk7XG4gICAgcmV0dXJuIGZpbGVOYW1lLnJlcGxhY2UoL1xcXFwvZywgXCIvXCIpO1xuICB9XG4gIHB1YmxpYyByYXdGaWxlTmFtZSgpOiBOb2RlQnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLnNsaWNlKDQ2LCA0NiArIHRoaXMuZmlsZU5hbWVMZW5ndGgoKSk7XG4gIH1cbiAgcHVibGljIGV4dHJhRmllbGQoKTogTm9kZUJ1ZmZlciB7XG4gICAgdmFyIHN0YXJ0ID0gNDQgKyB0aGlzLmZpbGVOYW1lTGVuZ3RoKCk7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5zbGljZShzdGFydCwgc3RhcnQgKyB0aGlzLmV4dHJhRmllbGRMZW5ndGgoKSk7XG4gIH1cbiAgcHVibGljIGZpbGVDb21tZW50KCk6IHN0cmluZyB7XG4gICAgdmFyIHN0YXJ0ID0gNDYgKyB0aGlzLmZpbGVOYW1lTGVuZ3RoKCkgKyB0aGlzLmV4dHJhRmllbGRMZW5ndGgoKTtcbiAgICByZXR1cm4gc2FmZVRvU3RyaW5nKHRoaXMuZGF0YSwgdGhpcy51c2VVVEY4KCksIHN0YXJ0LCB0aGlzLmZpbGVDb21tZW50TGVuZ3RoKCkpO1xuICB9XG4gIHB1YmxpYyByYXdGaWxlQ29tbWVudCgpOiBOb2RlQnVmZmVyIHtcbiAgICBsZXQgc3RhcnQgPSA0NiArIHRoaXMuZmlsZU5hbWVMZW5ndGgoKSArIHRoaXMuZXh0cmFGaWVsZExlbmd0aCgpO1xuICAgIHJldHVybiB0aGlzLmRhdGEuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgdGhpcy5maWxlQ29tbWVudExlbmd0aCgpKTtcbiAgfVxuICBwdWJsaWMgdG90YWxTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDQ2ICsgdGhpcy5maWxlTmFtZUxlbmd0aCgpICsgdGhpcy5leHRyYUZpZWxkTGVuZ3RoKCkgKyB0aGlzLmZpbGVDb21tZW50TGVuZ3RoKCk7XG4gIH1cbiAgcHVibGljIGlzRGlyZWN0b3J5KCk6IGJvb2xlYW4ge1xuICAgIC8vIE5PVEU6IFRoaXMgYXNzdW1lcyB0aGF0IHRoZSB6aXAgZmlsZSBpbXBsZW1lbnRhdGlvbiB1c2VzIHRoZSBsb3dlciBieXRlXG4gICAgLy8gICAgICAgb2YgZXh0ZXJuYWwgYXR0cmlidXRlcyBmb3IgRE9TIGF0dHJpYnV0ZXMgZm9yXG4gICAgLy8gICAgICAgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkuIFRoaXMgaXMgbm90IG1hbmRhdGVkLCBidXQgYXBwZWFycyB0byBiZVxuICAgIC8vICAgICAgIGNvbW1vbnBsYWNlLlxuICAgIC8vICAgICAgIEFjY29yZGluZyB0byB0aGUgc3BlYywgdGhlIGxheW91dCBvZiBleHRlcm5hbCBhdHRyaWJ1dGVzIGlzXG4gICAgLy8gICAgICAgcGxhdGZvcm0tZGVwZW5kZW50LlxuICAgIC8vICAgICAgIElmIHRoYXQgZmFpbHMsIHdlIGFsc28gY2hlY2sgaWYgdGhlIG5hbWUgb2YgdGhlIGZpbGUgZW5kcyBpbiAnLycsXG4gICAgLy8gICAgICAgd2hpY2ggaXMgd2hhdCBKYXZhJ3MgWmlwRmlsZSBpbXBsZW1lbnRhdGlvbiBkb2VzLlxuICAgIHZhciBmaWxlTmFtZSA9IHRoaXMuZmlsZU5hbWUoKTtcbiAgICByZXR1cm4gKHRoaXMuZXh0ZXJuYWxBdHRyaWJ1dGVzKCkgJiAweDEwID8gdHJ1ZSA6IGZhbHNlKSB8fCAoZmlsZU5hbWUuY2hhckF0KGZpbGVOYW1lLmxlbmd0aC0xKSA9PT0gJy8nKTtcbiAgfVxuICBwdWJsaWMgaXNGaWxlKCk6IGJvb2xlYW4geyByZXR1cm4gIXRoaXMuaXNEaXJlY3RvcnkoKTsgfVxuICBwdWJsaWMgdXNlVVRGOCgpOiBib29sZWFuIHsgcmV0dXJuICh0aGlzLmZsYWcoKSAmIDB4ODAwKSA9PT0gMHg4MDA7IH1cbiAgcHVibGljIGlzRW5jcnlwdGVkKCk6IGJvb2xlYW4geyByZXR1cm4gKHRoaXMuZmxhZygpICYgMHgxKSA9PT0gMHgxOyB9XG4gIHB1YmxpYyBnZXRGaWxlRGF0YSgpOiBGaWxlRGF0YSB7XG4gICAgLy8gTmVlZCB0byBncmFiIHRoZSBoZWFkZXIgYmVmb3JlIHdlIGNhbiBmaWd1cmUgb3V0IHdoZXJlIHRoZSBhY3R1YWxcbiAgICAvLyBjb21wcmVzc2VkIGRhdGEgc3RhcnRzLlxuICAgIHZhciBzdGFydCA9IHRoaXMuaGVhZGVyUmVsYXRpdmVPZmZzZXQoKTtcbiAgICB2YXIgaGVhZGVyID0gbmV3IEZpbGVIZWFkZXIodGhpcy56aXBEYXRhLnNsaWNlKHN0YXJ0KSk7XG4gICAgcmV0dXJuIG5ldyBGaWxlRGF0YShoZWFkZXIsIHRoaXMsIHRoaXMuemlwRGF0YS5zbGljZShzdGFydCArIGhlYWRlci50b3RhbFNpemUoKSkpO1xuICB9XG4gIHB1YmxpYyBnZXREYXRhKCk6IE5vZGVCdWZmZXIge1xuICAgIHJldHVybiB0aGlzLmdldEZpbGVEYXRhKCkuZGVjb21wcmVzcygpO1xuICB9XG4gIHB1YmxpYyBnZXRSYXdEYXRhKCk6IE5vZGVCdWZmZXIge1xuICAgIHJldHVybiB0aGlzLmdldEZpbGVEYXRhKCkuZ2V0UmF3RGF0YSgpO1xuICB9XG4gIHB1YmxpYyBnZXRTdGF0cygpOiBTdGF0cyB7XG4gICAgcmV0dXJuIG5ldyBTdGF0cyhGaWxlVHlwZS5GSUxFLCB0aGlzLnVuY29tcHJlc3NlZFNpemUoKSwgMHgxNkQsIG5ldyBEYXRlKCksIHRoaXMubGFzdE1vZEZpbGVUaW1lKCkpO1xuICB9XG59XG5cbi8qXG4gIDQuMy4xNjogZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IHJlY29yZFxuICAgIGVuZCBvZiBjZW50cmFsIGRpciBzaWduYXR1cmUgICAgNCBieXRlcyAgKDB4MDYwNTRiNTApXG4gICAgbnVtYmVyIG9mIHRoaXMgZGlzayAgICAgICAgICAgICAyIGJ5dGVzXG4gICAgbnVtYmVyIG9mIHRoZSBkaXNrIHdpdGggdGhlXG4gICAgc3RhcnQgb2YgdGhlIGNlbnRyYWwgZGlyZWN0b3J5ICAyIGJ5dGVzXG4gICAgdG90YWwgbnVtYmVyIG9mIGVudHJpZXMgaW4gdGhlXG4gICAgY2VudHJhbCBkaXJlY3Rvcnkgb24gdGhpcyBkaXNrICAyIGJ5dGVzXG4gICAgdG90YWwgbnVtYmVyIG9mIGVudHJpZXMgaW5cbiAgICB0aGUgY2VudHJhbCBkaXJlY3RvcnkgICAgICAgICAgIDIgYnl0ZXNcbiAgICBzaXplIG9mIHRoZSBjZW50cmFsIGRpcmVjdG9yeSAgIDQgYnl0ZXNcbiAgICBvZmZzZXQgb2Ygc3RhcnQgb2YgY2VudHJhbFxuICAgIGRpcmVjdG9yeSB3aXRoIHJlc3BlY3QgdG9cbiAgICB0aGUgc3RhcnRpbmcgZGlzayBudW1iZXIgICAgICAgIDQgYnl0ZXNcbiAgICAuWklQIGZpbGUgY29tbWVudCBsZW5ndGggICAgICAgIDIgYnl0ZXNcbiAgICAuWklQIGZpbGUgY29tbWVudCAgICAgICAodmFyaWFibGUgc2l6ZSlcbiovXG5leHBvcnQgY2xhc3MgRW5kT2ZDZW50cmFsRGlyZWN0b3J5IHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhOiBOb2RlQnVmZmVyKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMCkgIT09IDB4MDYwNTRiNTApXG4gICAgICB0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgXCJJbnZhbGlkIFppcCBmaWxlOiBFbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgcmVjb3JkIGhhcyBpbnZhbGlkIHNpZ25hdHVyZTogXCIgKyB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDApKTtcbiAgfVxuICBwdWJsaWMgZGlza051bWJlcigpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSg0KTsgfVxuICBwdWJsaWMgY2REaXNrTnVtYmVyKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDYpOyB9XG4gIHB1YmxpYyBjZERpc2tFbnRyeUNvdW50KCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDgpOyB9XG4gIHB1YmxpYyBjZFRvdGFsRW50cnlDb3VudCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSgxMCk7IH1cbiAgcHVibGljIGNkU2l6ZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgxMik7IH1cbiAgcHVibGljIGNkT2Zmc2V0KCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDE2KTsgfVxuICBwdWJsaWMgY2RaaXBDb21tZW50TGVuZ3RoKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDIwKTsgfVxuICBwdWJsaWMgY2RaaXBDb21tZW50KCk6IHN0cmluZyB7XG4gICAgLy8gQXNzdW1pbmcgVVRGLTguIFRoZSBzcGVjaWZpY2F0aW9uIGRvZXNuJ3Qgc3BlY2lmeS5cbiAgICByZXR1cm4gc2FmZVRvU3RyaW5nKHRoaXMuZGF0YSwgdHJ1ZSwgMjIsIHRoaXMuY2RaaXBDb21tZW50TGVuZ3RoKCkpO1xuICB9XG4gIHB1YmxpYyByYXdDZFppcENvbW1lbnQoKTogTm9kZUJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5zbGljZSgyMiwgMjIgKyB0aGlzLmNkWmlwQ29tbWVudExlbmd0aCgpKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFppcEZTIGV4dGVuZHMgZmlsZV9zeXN0ZW0uU3luY2hyb25vdXNGaWxlU3lzdGVtIGltcGxlbWVudHMgZmlsZV9zeXN0ZW0uRmlsZVN5c3RlbSB7XG4gIHByaXZhdGUgX2luZGV4OiBGaWxlSW5kZXg8Q2VudHJhbERpcmVjdG9yeT4gPSBuZXcgRmlsZUluZGV4PENlbnRyYWxEaXJlY3Rvcnk+KCk7XG4gIHByaXZhdGUgX2RpcmVjdG9yeUVudHJpZXM6IENlbnRyYWxEaXJlY3RvcnlbXSA9IFtdO1xuICBwcml2YXRlIF9lb2NkOiBFbmRPZkNlbnRyYWxEaXJlY3RvcnkgPSBudWxsO1xuICAvKipcbiAgICogQ29uc3RydWN0cyBhIFppcEZTIGZyb20gdGhlIGdpdmVuIHppcCBmaWxlIGRhdGEuIE5hbWUgaXMgb3B0aW9uYWwsIGFuZCBpc1xuICAgKiB1c2VkIHByaW1hcmlseSBmb3Igb3VyIHVuaXQgdGVzdHMnIHB1cnBvc2VzIHRvIGRpZmZlcmVudGlhdGUgZGlmZmVyZW50XG4gICAqIHRlc3QgemlwIGZpbGVzIGluIHRlc3Qgb3V0cHV0LlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhOiBOb2RlQnVmZmVyLCBwcml2YXRlIG5hbWU6IHN0cmluZyA9ICcnKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnBvcHVsYXRlSW5kZXgoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXROYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdaaXBGUycgKyAodGhpcy5uYW1lICE9PSAnJyA/ICcgJyArIHRoaXMubmFtZSA6ICcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIENlbnRyYWxEaXJlY3Rvcnkgb2JqZWN0IGZvciB0aGUgZ2l2ZW4gcGF0aC5cbiAgICovXG4gIHB1YmxpYyBnZXRDZW50cmFsRGlyZWN0b3J5RW50cnkocGF0aDogc3RyaW5nKTogQ2VudHJhbERpcmVjdG9yeSB7XG4gICAgbGV0IGlub2RlID0gdGhpcy5faW5kZXguZ2V0SW5vZGUocGF0aCk7XG4gICAgaWYgKGlub2RlID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBBcGlFcnJvci5FTk9FTlQocGF0aCk7XG4gICAgfVxuICAgIGlmIChpc0ZpbGVJbm9kZTxDZW50cmFsRGlyZWN0b3J5Pihpbm9kZSkpIHtcbiAgICAgIHJldHVybiBpbm9kZS5nZXREYXRhKCk7XG4gICAgfSBlbHNlIGlmIChpc0Rpcklub2RlPENlbnRyYWxEaXJlY3Rvcnk+KGlub2RlKSkge1xuICAgICAgcmV0dXJuIGlub2RlLmdldERhdGEoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0Q2VudHJhbERpcmVjdG9yeUVudHJ5QXQoaW5kZXg6IG51bWJlcik6IENlbnRyYWxEaXJlY3Rvcnkge1xuICAgIGxldCBkaXJFbnRyeSA9IHRoaXMuX2RpcmVjdG9yeUVudHJpZXNbaW5kZXhdO1xuICAgIGlmICghZGlyRW50cnkpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIGRpcmVjdG9yeSBpbmRleDogJHtpbmRleH0uYCk7XG4gICAgfVxuICAgIHJldHVybiBkaXJFbnRyeTtcbiAgfVxuXG4gIHB1YmxpYyBnZXROdW1iZXJPZkNlbnRyYWxEaXJlY3RvcnlFbnRyaWVzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdG9yeUVudHJpZXMubGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIGdldEVuZE9mQ2VudHJhbERpcmVjdG9yeSgpOiBFbmRPZkNlbnRyYWxEaXJlY3Rvcnkge1xuICAgIHJldHVybiB0aGlzLl9lb2NkO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBpc0F2YWlsYWJsZSgpOiBib29sZWFuIHsgcmV0dXJuIHRydWU7IH1cblxuICBwdWJsaWMgZGlza1NwYWNlKHBhdGg6IHN0cmluZywgY2I6ICh0b3RhbDogbnVtYmVyLCBmcmVlOiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAvLyBSZWFkLW9ubHkgZmlsZSBzeXN0ZW0uXG4gICAgY2IodGhpcy5kYXRhLmxlbmd0aCwgMCk7XG4gIH1cblxuICBwdWJsaWMgaXNSZWFkT25seSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBzdXBwb3J0c0xpbmtzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBzdXBwb3J0c1Byb3BzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBzdXBwb3J0c1N5bmNoKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIHN0YXRTeW5jKHBhdGg6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbik6IFN0YXRzIHtcbiAgICB2YXIgaW5vZGUgPSB0aGlzLl9pbmRleC5nZXRJbm9kZShwYXRoKTtcbiAgICBpZiAoaW5vZGUgPT09IG51bGwpIHtcbiAgICAgIHRocm93IEFwaUVycm9yLkVOT0VOVChwYXRoKTtcbiAgICB9XG4gICAgdmFyIHN0YXRzOiBTdGF0cztcbiAgICBpZiAoaXNGaWxlSW5vZGU8Q2VudHJhbERpcmVjdG9yeT4oaW5vZGUpKSB7XG4gICAgICBzdGF0cyA9IGlub2RlLmdldERhdGEoKS5nZXRTdGF0cygpO1xuICAgIH0gZWxzZSBpZiAoaXNEaXJJbm9kZShpbm9kZSkpIHtcbiAgICAgIHN0YXRzID0gaW5vZGUuZ2V0U3RhdHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsIFwiSW52YWxpZCBpbm9kZS5cIik7XG4gICAgfVxuICAgIHJldHVybiBzdGF0cztcbiAgfVxuXG4gIHB1YmxpYyBvcGVuU3luYyhwYXRoOiBzdHJpbmcsIGZsYWdzOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyKTogZmlsZS5GaWxlIHtcbiAgICAvLyBJTlZBUklBTlQ6IENhbm5vdCB3cml0ZSB0byBSTyBmaWxlIHN5c3RlbXMuXG4gICAgaWYgKGZsYWdzLmlzV3JpdGVhYmxlKCkpIHtcbiAgICAgIHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRVBFUk0sIHBhdGgpO1xuICAgIH1cbiAgICAvLyBDaGVjayBpZiB0aGUgcGF0aCBleGlzdHMsIGFuZCBpcyBhIGZpbGUuXG4gICAgdmFyIGlub2RlID0gdGhpcy5faW5kZXguZ2V0SW5vZGUocGF0aCk7XG4gICAgaWYgKCFpbm9kZSkge1xuICAgICAgdGhyb3cgQXBpRXJyb3IuRU5PRU5UKHBhdGgpO1xuICAgIH0gZWxzZSBpZiAoaXNGaWxlSW5vZGU8Q2VudHJhbERpcmVjdG9yeT4oaW5vZGUpKSB7XG4gICAgICB2YXIgY2RSZWNvcmQgPSBpbm9kZS5nZXREYXRhKCk7XG4gICAgICB2YXIgc3RhdHMgPSBjZFJlY29yZC5nZXRTdGF0cygpO1xuICAgICAgc3dpdGNoIChmbGFncy5wYXRoRXhpc3RzQWN0aW9uKCkpIHtcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLlRIUk9XX0VYQ0VQVElPTjpcbiAgICAgICAgY2FzZSBBY3Rpb25UeXBlLlRSVU5DQVRFX0ZJTEU6XG4gICAgICAgICAgdGhyb3cgQXBpRXJyb3IuRUVYSVNUKHBhdGgpO1xuICAgICAgICBjYXNlIEFjdGlvblR5cGUuTk9QOlxuICAgICAgICAgIHJldHVybiBuZXcgcHJlbG9hZF9maWxlLk5vU3luY0ZpbGUodGhpcywgcGF0aCwgZmxhZ3MsIHN0YXRzLCBjZFJlY29yZC5nZXREYXRhKCkpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnSW52YWxpZCBGaWxlTW9kZSBvYmplY3QuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgQXBpRXJyb3IuRUlTRElSKHBhdGgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWFkZGlyU3luYyhwYXRoOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgLy8gQ2hlY2sgaWYgaXQgZXhpc3RzLlxuICAgIHZhciBpbm9kZSA9IHRoaXMuX2luZGV4LmdldElub2RlKHBhdGgpO1xuICAgIGlmICghaW5vZGUpIHtcbiAgICAgIHRocm93IEFwaUVycm9yLkVOT0VOVChwYXRoKTtcbiAgICB9IGVsc2UgaWYgKGlzRGlySW5vZGUoaW5vZGUpKSB7XG4gICAgICByZXR1cm4gaW5vZGUuZ2V0TGlzdGluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBBcGlFcnJvci5FTk9URElSKHBhdGgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVjaWFsbHktb3B0aW1pemVkIHJlYWRmaWxlLlxuICAgKi9cbiAgcHVibGljIHJlYWRGaWxlU3luYyhmbmFtZTogc3RyaW5nLCBlbmNvZGluZzogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZyk6IGFueSB7XG4gICAgLy8gR2V0IGZpbGUuXG4gICAgdmFyIGZkID0gdGhpcy5vcGVuU3luYyhmbmFtZSwgZmxhZywgMHgxYTQpO1xuICAgIHRyeSB7XG4gICAgICB2YXIgZmRDYXN0ID0gPHByZWxvYWRfZmlsZS5Ob1N5bmNGaWxlPFppcEZTPj4gZmQ7XG4gICAgICB2YXIgZmRCdWZmID0gPEJ1ZmZlcj4gZmRDYXN0LmdldEJ1ZmZlcigpO1xuICAgICAgaWYgKGVuY29kaW5nID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjb3B5aW5nU2xpY2UoZmRCdWZmKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmZEJ1ZmYudG9TdHJpbmcoZW5jb2RpbmcpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBmZC5jbG9zZVN5bmMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9jYXRlcyB0aGUgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IHJlY29yZCBhdCB0aGUgZW5kIG9mIHRoZSBmaWxlLlxuICAgKiBUaHJvd3MgYW4gZXhjZXB0aW9uIGlmIGl0IGNhbm5vdCBiZSBmb3VuZC5cbiAgICovXG4gIHByaXZhdGUgZ2V0RU9DRCgpOiBFbmRPZkNlbnRyYWxEaXJlY3Rvcnkge1xuICAgIC8vIFVuZm9ydHVuYXRlbHksIHRoZSBjb21tZW50IGlzIHZhcmlhYmxlIHNpemUgYW5kIHVwIHRvIDY0SyBpbiBzaXplLlxuICAgIC8vIFdlIGFzc3VtZSB0aGF0IHRoZSBtYWdpYyBzaWduYXR1cmUgZG9lcyBub3QgYXBwZWFyIGluIHRoZSBjb21tZW50LCBhbmRcbiAgICAvLyBpbiB0aGUgYnl0ZXMgYmV0d2VlbiB0aGUgY29tbWVudCBhbmQgdGhlIHNpZ25hdHVyZS4gT3RoZXIgWklQXG4gICAgLy8gaW1wbGVtZW50YXRpb25zIG1ha2UgdGhpcyBzYW1lIGFzc3VtcHRpb24sIHNpbmNlIHRoZSBhbHRlcm5hdGl2ZSBpcyB0b1xuICAgIC8vIHJlYWQgdGhyZWFkIGV2ZXJ5IGVudHJ5IGluIHRoZSBmaWxlIHRvIGdldCB0byBpdC4gOihcbiAgICAvLyBUaGVzZSBhcmUgKm5lZ2F0aXZlKiBvZmZzZXRzIGZyb20gdGhlIGVuZCBvZiB0aGUgZmlsZS5cbiAgICB2YXIgc3RhcnRPZmZzZXQgPSAyMjtcbiAgICB2YXIgZW5kT2Zmc2V0ID0gTWF0aC5taW4oc3RhcnRPZmZzZXQgKyAweEZGRkYsIHRoaXMuZGF0YS5sZW5ndGggLSAxKTtcbiAgICAvLyBUaGVyZSdzIG5vdCBldmVuIGEgYnl0ZSBhbGlnbm1lbnQgZ3VhcmFudGVlIG9uIHRoZSBjb21tZW50IHNvIHdlIG5lZWQgdG9cbiAgICAvLyBzZWFyY2ggYnl0ZSBieSBieXRlLiAqZ3J1bWJsZSBncnVtYmxlKlxuICAgIGZvciAodmFyIGkgPSBzdGFydE9mZnNldDsgaSA8IGVuZE9mZnNldDsgaSsrKSB7XG4gICAgICAvLyBNYWdpYyBudW1iZXI6IEVPQ0QgU2lnbmF0dXJlXG4gICAgICBpZiAodGhpcy5kYXRhLnJlYWRVSW50MzJMRSh0aGlzLmRhdGEubGVuZ3RoIC0gaSkgPT09IDB4MDYwNTRiNTApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFbmRPZkNlbnRyYWxEaXJlY3RvcnkodGhpcy5kYXRhLnNsaWNlKHRoaXMuZGF0YS5sZW5ndGggLSBpKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCBcIkludmFsaWQgWklQIGZpbGU6IENvdWxkIG5vdCBsb2NhdGUgRW5kIG9mIENlbnRyYWwgRGlyZWN0b3J5IHNpZ25hdHVyZS5cIik7XG4gIH1cblxuICBwcml2YXRlIHBvcHVsYXRlSW5kZXgoKSB7XG4gICAgdmFyIGVvY2Q6IEVuZE9mQ2VudHJhbERpcmVjdG9yeSA9IHRoaXMuX2VvY2QgPSB0aGlzLmdldEVPQ0QoKTtcbiAgICBpZiAoZW9jZC5kaXNrTnVtYmVyKCkgIT09IGVvY2QuY2REaXNrTnVtYmVyKCkpXG4gICAgICB0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgXCJaaXBGUyBkb2VzIG5vdCBzdXBwb3J0IHNwYW5uZWQgemlwIGZpbGVzLlwiKTtcblxuICAgIHZhciBjZFB0ciA9IGVvY2QuY2RPZmZzZXQoKTtcbiAgICBpZiAoY2RQdHIgPT09IDB4RkZGRkZGRkYpXG4gICAgICB0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgXCJaaXBGUyBkb2VzIG5vdCBzdXBwb3J0IFppcDY0LlwiKTtcbiAgICB2YXIgY2RFbmQgPSBjZFB0ciArIGVvY2QuY2RTaXplKCk7XG4gICAgd2hpbGUgKGNkUHRyIDwgY2RFbmQpIHtcbiAgICAgIHZhciBjZDogQ2VudHJhbERpcmVjdG9yeSA9IG5ldyBDZW50cmFsRGlyZWN0b3J5KHRoaXMuZGF0YSwgdGhpcy5kYXRhLnNsaWNlKGNkUHRyKSk7XG4gICAgICBjZFB0ciArPSBjZC50b3RhbFNpemUoKTtcbiAgICAgIC8vIFBhdGhzIG11c3QgYmUgYWJzb2x1dGUsIHlldCB6aXAgZmlsZSBwYXRocyBhcmUgYWx3YXlzIHJlbGF0aXZlIHRvIHRoZVxuICAgICAgLy8gemlwIHJvb3QuIFNvIHdlIGFwcGVuZCAnLycgYW5kIGNhbGwgaXQgYSBkYXkuXG4gICAgICB2YXIgZmlsZW5hbWUgPSBjZC5maWxlTmFtZSgpO1xuICAgICAgaWYgKGZpbGVuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSB0aHJvdyBuZXcgRXJyb3IoXCJXSFkgSVMgVEhJUyBBQlNPTFVURVwiKTtcbiAgICAgIC8vIFhYWDogRm9yIHRoZSBmaWxlIGluZGV4LCBzdHJpcCB0aGUgdHJhaWxpbmcgJy8nLlxuICAgICAgaWYgKGZpbGVuYW1lLmNoYXJBdChmaWxlbmFtZS5sZW5ndGggLSAxKSA9PT0gJy8nKSB7XG4gICAgICAgIGZpbGVuYW1lID0gZmlsZW5hbWUuc3Vic3RyKDAsIGZpbGVuYW1lLmxlbmd0aC0xKTtcbiAgICAgIH1cbiAgICAgIGlmIChjZC5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgIHRoaXMuX2luZGV4LmFkZFBhdGgoJy8nICsgZmlsZW5hbWUsIG5ldyBEaXJJbm9kZTxDZW50cmFsRGlyZWN0b3J5PihjZCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faW5kZXguYWRkUGF0aCgnLycgKyBmaWxlbmFtZSwgbmV3IEZpbGVJbm9kZTxDZW50cmFsRGlyZWN0b3J5PihjZCkpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZGlyZWN0b3J5RW50cmllcy5wdXNoKGNkKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==