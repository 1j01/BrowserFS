var BrowserFS = require('../core/browserfs');
var fs = require('../core/node_fs');
var util_1 = require('../core/util');
var BFSEmscriptenStreamOps = (function () {
    function BFSEmscriptenStreamOps(fs) {
        this.fs = fs;
        this.FS = fs.getFS();
        this.PATH = fs.getPATH();
        this.ERRNO_CODES = fs.getERRNO_CODES();
    }
    BFSEmscriptenStreamOps.prototype.open = function (stream) {
        var path = this.fs.realPath(stream.node), FS = this.FS;
        try {
            if (FS.isFile(stream.node.mode)) {
                stream.nfd = fs.openSync(path, this.fs.flagsToPermissionString(stream.flags));
            }
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenStreamOps.prototype.close = function (stream) {
        var FS = this.FS;
        try {
            if (FS.isFile(stream.node.mode) && stream.nfd) {
                fs.closeSync(stream.nfd);
            }
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenStreamOps.prototype.read = function (stream, buffer, offset, length, position) {
        try {
            return fs.readSync(stream.nfd, util_1.uint8Array2Buffer(buffer), offset, length, position);
        }
        catch (e) {
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenStreamOps.prototype.write = function (stream, buffer, offset, length, position) {
        try {
            return fs.writeSync(stream.nfd, util_1.uint8Array2Buffer(buffer), offset, length, position);
        }
        catch (e) {
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenStreamOps.prototype.llseek = function (stream, offset, whence) {
        var position = offset;
        if (whence === 1) {
            position += stream.position;
        }
        else if (whence === 2) {
            if (this.FS.isFile(stream.node.mode)) {
                try {
                    var stat = fs.fstatSync(stream.nfd);
                    position += stat.size;
                }
                catch (e) {
                    throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
                }
            }
        }
        if (position < 0) {
            throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);
        }
        stream.position = position;
        return position;
    };
    return BFSEmscriptenStreamOps;
})();
var BFSEmscriptenNodeOps = (function () {
    function BFSEmscriptenNodeOps(fs) {
        this.fs = fs;
        this.FS = fs.getFS();
        this.PATH = fs.getPATH();
        this.ERRNO_CODES = fs.getERRNO_CODES();
    }
    BFSEmscriptenNodeOps.prototype.getattr = function (node) {
        var path = this.fs.realPath(node);
        var stat;
        try {
            stat = fs.lstatSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
        return {
            dev: stat.dev,
            ino: stat.ino,
            mode: stat.mode,
            nlink: stat.nlink,
            uid: stat.uid,
            gid: stat.gid,
            rdev: stat.rdev,
            size: stat.size,
            atime: stat.atime,
            mtime: stat.mtime,
            ctime: stat.ctime,
            blksize: stat.blksize,
            blocks: stat.blocks
        };
    };
    BFSEmscriptenNodeOps.prototype.setattr = function (node, attr) {
        var path = this.fs.realPath(node);
        try {
            if (attr.mode !== undefined) {
                fs.chmodSync(path, attr.mode);
                node.mode = attr.mode;
            }
            if (attr.timestamp !== undefined) {
                var date = new Date(attr.timestamp);
                fs.utimesSync(path, date, date);
            }
        }
        catch (e) {
            if (!e.code)
                throw e;
            if (e.code !== "ENOTSUP") {
                throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
            }
        }
        if (attr.size !== undefined) {
            try {
                fs.truncateSync(path, attr.size);
            }
            catch (e) {
                if (!e.code)
                    throw e;
                throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
            }
        }
    };
    BFSEmscriptenNodeOps.prototype.lookup = function (parent, name) {
        var path = this.PATH.join2(this.fs.realPath(parent), name);
        var mode = this.fs.getMode(path);
        return this.fs.createNode(parent, name, mode);
    };
    BFSEmscriptenNodeOps.prototype.mknod = function (parent, name, mode, dev) {
        var node = this.fs.createNode(parent, name, mode, dev);
        var path = this.fs.realPath(node);
        try {
            if (this.FS.isDir(node.mode)) {
                fs.mkdirSync(path, node.mode);
            }
            else {
                fs.writeFileSync(path, '', { mode: node.mode });
            }
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
        return node;
    };
    BFSEmscriptenNodeOps.prototype.rename = function (oldNode, newDir, newName) {
        var oldPath = this.fs.realPath(oldNode);
        var newPath = this.PATH.join2(this.fs.realPath(newDir), newName);
        try {
            fs.renameSync(oldPath, newPath);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenNodeOps.prototype.unlink = function (parent, name) {
        var path = this.PATH.join2(this.fs.realPath(parent), name);
        try {
            fs.unlinkSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenNodeOps.prototype.rmdir = function (parent, name) {
        var path = this.PATH.join2(this.fs.realPath(parent), name);
        try {
            fs.rmdirSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenNodeOps.prototype.readdir = function (node) {
        var path = this.fs.realPath(node);
        try {
            return fs.readdirSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenNodeOps.prototype.symlink = function (parent, newName, oldPath) {
        var newPath = this.PATH.join2(this.fs.realPath(parent), newName);
        try {
            fs.symlinkSync(oldPath, newPath);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenNodeOps.prototype.readlink = function (node) {
        var path = this.fs.realPath(node);
        try {
            return fs.readlinkSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    return BFSEmscriptenNodeOps;
})();
var BFSEmscriptenFS = (function () {
    function BFSEmscriptenFS(_FS, _PATH, _ERRNO_CODES) {
        if (_FS === void 0) { _FS = self['FS']; }
        if (_PATH === void 0) { _PATH = self['PATH']; }
        if (_ERRNO_CODES === void 0) { _ERRNO_CODES = self['ERRNO_CODES']; }
        this.flagsToPermissionStringMap = {
            0: 'r',
            1: 'r+',
            2: 'r+',
            64: 'r',
            65: 'r+',
            66: 'r+',
            129: 'rx+',
            193: 'rx+',
            514: 'w+',
            577: 'w',
            578: 'w+',
            705: 'wx',
            706: 'wx+',
            1024: 'a',
            1025: 'a',
            1026: 'a+',
            1089: 'a',
            1090: 'a+',
            1153: 'ax',
            1154: 'ax+',
            1217: 'ax',
            1218: 'ax+',
            4096: 'rs',
            4098: 'rs+'
        };
        if (typeof BrowserFS === 'undefined') {
            throw new Error("BrowserFS is not loaded. Please load it before this library.");
        }
        this.FS = _FS;
        this.PATH = _PATH;
        this.ERRNO_CODES = _ERRNO_CODES;
        this.node_ops = new BFSEmscriptenNodeOps(this);
        this.stream_ops = new BFSEmscriptenStreamOps(this);
    }
    BFSEmscriptenFS.prototype.mount = function (mount) {
        return this.createNode(null, '/', this.getMode(mount.opts.root), 0);
    };
    BFSEmscriptenFS.prototype.createNode = function (parent, name, mode, dev) {
        var FS = this.FS;
        if (!FS.isDir(mode) && !FS.isFile(mode) && !FS.isLink(mode)) {
            throw new FS.ErrnoError(this.ERRNO_CODES.EINVAL);
        }
        var node = FS.createNode(parent, name, mode);
        node.node_ops = this.node_ops;
        node.stream_ops = this.stream_ops;
        return node;
    };
    BFSEmscriptenFS.prototype.getMode = function (path) {
        var stat;
        try {
            stat = fs.lstatSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
        return stat.mode;
    };
    BFSEmscriptenFS.prototype.realPath = function (node) {
        var parts = [];
        while (node.parent !== node) {
            parts.push(node.name);
            node = node.parent;
        }
        parts.push(node.mount.opts.root);
        parts.reverse();
        return this.PATH.join.apply(null, parts);
    };
    BFSEmscriptenFS.prototype.flagsToPermissionString = function (flags) {
        var parsedFlags = (typeof flags === "string") ? parseInt(flags, 10) : flags;
        parsedFlags &= 0x1FFF;
        if (parsedFlags in this.flagsToPermissionStringMap) {
            return this.flagsToPermissionStringMap[parsedFlags];
        }
        else {
            return flags;
        }
    };
    BFSEmscriptenFS.prototype.getFS = function () {
        return this.FS;
    };
    BFSEmscriptenFS.prototype.getPATH = function () {
        return this.PATH;
    };
    BFSEmscriptenFS.prototype.getERRNO_CODES = function () {
        return this.ERRNO_CODES;
    };
    return BFSEmscriptenFS;
})();
exports.__esModule = true;
exports["default"] = BFSEmscriptenFS;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW1zY3JpcHRlbl9mcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9nZW5lcmljL2Vtc2NyaXB0ZW5fZnMudHMiXSwibmFtZXMiOlsiQkZTRW1zY3JpcHRlblN0cmVhbU9wcyIsIkJGU0Vtc2NyaXB0ZW5TdHJlYW1PcHMuY29uc3RydWN0b3IiLCJCRlNFbXNjcmlwdGVuU3RyZWFtT3BzLm9wZW4iLCJCRlNFbXNjcmlwdGVuU3RyZWFtT3BzLmNsb3NlIiwiQkZTRW1zY3JpcHRlblN0cmVhbU9wcy5yZWFkIiwiQkZTRW1zY3JpcHRlblN0cmVhbU9wcy53cml0ZSIsIkJGU0Vtc2NyaXB0ZW5TdHJlYW1PcHMubGxzZWVrIiwiQkZTRW1zY3JpcHRlbk5vZGVPcHMiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy5jb25zdHJ1Y3RvciIsIkJGU0Vtc2NyaXB0ZW5Ob2RlT3BzLmdldGF0dHIiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy5zZXRhdHRyIiwiQkZTRW1zY3JpcHRlbk5vZGVPcHMubG9va3VwIiwiQkZTRW1zY3JpcHRlbk5vZGVPcHMubWtub2QiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy5yZW5hbWUiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy51bmxpbmsiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy5ybWRpciIsIkJGU0Vtc2NyaXB0ZW5Ob2RlT3BzLnJlYWRkaXIiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy5zeW1saW5rIiwiQkZTRW1zY3JpcHRlbk5vZGVPcHMucmVhZGxpbmsiLCJCRlNFbXNjcmlwdGVuRlMiLCJCRlNFbXNjcmlwdGVuRlMuY29uc3RydWN0b3IiLCJCRlNFbXNjcmlwdGVuRlMubW91bnQiLCJCRlNFbXNjcmlwdGVuRlMuY3JlYXRlTm9kZSIsIkJGU0Vtc2NyaXB0ZW5GUy5nZXRNb2RlIiwiQkZTRW1zY3JpcHRlbkZTLnJlYWxQYXRoIiwiQkZTRW1zY3JpcHRlbkZTLmZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nIiwiQkZTRW1zY3JpcHRlbkZTLmdldEZTIiwiQkZTRW1zY3JpcHRlbkZTLmdldFBBVEgiLCJCRlNFbXNjcmlwdGVuRlMuZ2V0RVJSTk9fQ09ERVMiXSwibWFwcGluZ3MiOiJBQVdBLElBQU8sU0FBUyxXQUFXLG1CQUFtQixDQUFDLENBQUM7QUFDaEQsSUFBTyxFQUFFLFdBQVcsaUJBQWlCLENBQUMsQ0FBQztBQUV2QyxxQkFBZ0MsY0FBYyxDQUFDLENBQUE7QUFpRS9DO0lBS0VBLGdDQUFvQkEsRUFBbUJBO1FBQW5CQyxPQUFFQSxHQUFGQSxFQUFFQSxDQUFpQkE7UUFDckNBLElBQUlBLENBQUNBLEVBQUVBLEdBQUdBLEVBQUVBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBO1FBQ3JCQSxJQUFJQSxDQUFDQSxJQUFJQSxHQUFHQSxFQUFFQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQTtRQUN6QkEsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0EsRUFBRUEsQ0FBQ0EsY0FBY0EsRUFBRUEsQ0FBQ0E7SUFDekNBLENBQUNBO0lBRU1ELHFDQUFJQSxHQUFYQSxVQUFZQSxNQUF3QkE7UUFDbENFLElBQUlBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLFFBQVFBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEVBQ3RDQSxFQUFFQSxHQUFHQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQTtRQUNmQSxJQUFJQSxDQUFDQTtZQUNIQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDaENBLE1BQU1BLENBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLEVBQUVBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLHVCQUF1QkEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDaEZBLENBQUNBO1FBQ0hBLENBQUVBO1FBQUFBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ1hBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBO2dCQUFDQSxNQUFNQSxDQUFDQSxDQUFDQTtZQUNyQkEsTUFBTUEsSUFBSUEsRUFBRUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDcERBLENBQUNBO0lBQ0hBLENBQUNBO0lBRU1GLHNDQUFLQSxHQUFaQSxVQUFhQSxNQUF3QkE7UUFDbkNHLElBQUlBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBO1FBQ2pCQSxJQUFJQSxDQUFDQTtZQUNIQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDOUNBLEVBQUVBLENBQUNBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1lBQzNCQSxDQUFDQTtRQUNIQSxDQUFFQTtRQUFBQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNYQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQTtnQkFBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7WUFDckJBLE1BQU1BLElBQUlBLEVBQUVBLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO1FBQ3BEQSxDQUFDQTtJQUNIQSxDQUFDQTtJQUVNSCxxQ0FBSUEsR0FBWEEsVUFBWUEsTUFBd0JBLEVBQUVBLE1BQWtCQSxFQUFFQSxNQUFjQSxFQUFFQSxNQUFjQSxFQUFFQSxRQUFnQkE7UUFFeEdJLElBQUlBLENBQUNBO1lBQ0hBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBLFFBQVFBLENBQUNBLE1BQU1BLENBQUNBLEdBQUdBLEVBQUVBLHdCQUFpQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsRUFBRUEsTUFBTUEsRUFBRUEsTUFBTUEsRUFBRUEsUUFBUUEsQ0FBQ0EsQ0FBQ0E7UUFDdEZBLENBQUVBO1FBQUFBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ1hBLE1BQU1BLElBQUlBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO1FBQ3pEQSxDQUFDQTtJQUNIQSxDQUFDQTtJQUVNSixzQ0FBS0EsR0FBWkEsVUFBYUEsTUFBd0JBLEVBQUVBLE1BQWtCQSxFQUFFQSxNQUFjQSxFQUFFQSxNQUFjQSxFQUFFQSxRQUFnQkE7UUFFekdLLElBQUlBLENBQUNBO1lBQ0hBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLEdBQUdBLEVBQUVBLHdCQUFpQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsRUFBRUEsTUFBTUEsRUFBRUEsTUFBTUEsRUFBRUEsUUFBUUEsQ0FBQ0EsQ0FBQ0E7UUFDdkZBLENBQUVBO1FBQUFBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ1hBLE1BQU1BLElBQUlBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO1FBQ3pEQSxDQUFDQTtJQUNIQSxDQUFDQTtJQUVNTCx1Q0FBTUEsR0FBYkEsVUFBY0EsTUFBd0JBLEVBQUVBLE1BQWNBLEVBQUVBLE1BQWNBO1FBQ3BFTSxJQUFJQSxRQUFRQSxHQUFHQSxNQUFNQSxDQUFDQTtRQUN0QkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDakJBLFFBQVFBLElBQUlBLE1BQU1BLENBQUNBLFFBQVFBLENBQUNBO1FBQzlCQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxNQUFNQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN4QkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3JDQSxJQUFJQSxDQUFDQTtvQkFDSEEsSUFBSUEsSUFBSUEsR0FBR0EsRUFBRUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBQ3BDQSxRQUFRQSxJQUFJQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQTtnQkFDeEJBLENBQUVBO2dCQUFBQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtvQkFDWEEsTUFBTUEsSUFBSUEsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3pEQSxDQUFDQTtZQUNIQSxDQUFDQTtRQUNIQSxDQUFDQTtRQUVEQSxFQUFFQSxDQUFDQSxDQUFDQSxRQUFRQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNqQkEsTUFBTUEsSUFBSUEsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7UUFDeERBLENBQUNBO1FBRURBLE1BQU1BLENBQUNBLFFBQVFBLEdBQUdBLFFBQVFBLENBQUNBO1FBQzNCQSxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQTtJQUNs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LHdDQUFjQSxHQUFyQkE7UUFDRVMsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0E7SUFDMUJBLENBQUNBO0lBSUhULHNCQUFDQTtBQUFEQSxDQUFDQSxBQXhHRCxJQXdHQztBQXhHRDtvQ0F3R0MsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGVmaW5lcyBhbiBFbXNjcmlwdGVuIGZpbGUgc3lzdGVtIG9iamVjdCBmb3IgdXNlIGluIHRoZSBFbXNjcmlwdGVuIHZpcnR1YWxcbiAqIGZpbGVzeXN0ZW0uIEFsbG93cyB5b3UgdG8gdXNlIHN5bmNocm9ub3VzIEJyb3dzZXJGUyBmaWxlIHN5c3RlbXMgZnJvbSB3aXRoaW5cbiAqIEVtc2NyaXB0ZW4uXG4gKlxuICogWW91IGNhbiBjb25zdHJ1Y3QgYSBCRlNFbXNjcmlwdGVuRlMsIG1vdW50IGl0IHVzaW5nIGl0cyBtb3VudCBjb21tYW5kLFxuICogYW5kIHRoZW4gbW91bnQgaXQgaW50byBFbXNjcmlwdGVuLlxuICpcbiAqIEFkYXB0ZWQgZnJvbSBFbXNjcmlwdGVuJ3MgTm9kZUZTOlxuICogaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9rcmlwa2VuL2Vtc2NyaXB0ZW4vbWFzdGVyL3NyYy9saWJyYXJ5X25vZGVmcy5qc1xuICovXG5pbXBvcnQgQnJvd3NlckZTID0gcmVxdWlyZSgnLi4vY29yZS9icm93c2VyZnMnKTtcbmltcG9ydCBmcyA9IHJlcXVpcmUoJy4uL2NvcmUvbm9kZV9mcycpO1xuaW1wb3J0IE5vZGVTdGF0cyBmcm9tICcuLi9jb3JlL25vZGVfZnNfc3RhdHMnO1xuaW1wb3J0IHt1aW50OEFycmF5MkJ1ZmZlcn0gZnJvbSAnLi4vY29yZS91dGlsJztcblxuZXhwb3J0IGludGVyZmFjZSBTdGF0cyB7XG4gIGRldjogbnVtYmVyO1xuICBpbm86IG51bWJlcjtcbiAgbW9kZTogbnVtYmVyO1xuICBubGluazogbnVtYmVyO1xuICB1aWQ6IG51bWJlcjtcbiAgZ2lkOiBudW1iZXI7XG4gIHJkZXY6IG51bWJlcjtcbiAgc2l6ZTogbnVtYmVyO1xuICBibGtzaXplOiBudW1iZXI7XG4gIGJsb2NrczogbnVtYmVyO1xuICBhdGltZTogRGF0ZTtcbiAgbXRpbWU6IERhdGU7XG4gIGN0aW1lOiBEYXRlO1xuICB0aW1lc3RhbXA/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1zY3JpcHRlbkZTTm9kZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgbW9kZTogbnVtYmVyO1xuICBwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGU7XG4gIG1vdW50OiB7b3B0czoge3Jvb3Q6IHN0cmluZ319O1xuICBzdHJlYW1fb3BzOiBFbXNjcmlwdGVuU3RyZWFtT3BzO1xuICBub2RlX29wczogRW1zY3JpcHRlbk5vZGVPcHM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1zY3JpcHRlblN0cmVhbSB7XG4gIG5vZGU6IEVtc2NyaXB0ZW5GU05vZGU7XG4gIG5mZDogYW55O1xuICBmbGFnczogc3RyaW5nO1xuICBwb3NpdGlvbjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVtc2NyaXB0ZW5Ob2RlT3BzIHtcbiAgZ2V0YXR0cihub2RlOiBFbXNjcmlwdGVuRlNOb2RlKTogU3RhdHM7XG4gIHNldGF0dHIobm9kZTogRW1zY3JpcHRlbkZTTm9kZSwgYXR0cjogU3RhdHMpOiB2b2lkO1xuICBsb29rdXAocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuYW1lOiBzdHJpbmcpOiBFbXNjcmlwdGVuRlNOb2RlO1xuICBta25vZChwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5hbWU6IHN0cmluZywgbW9kZTogbnVtYmVyLCBkZXY6IGFueSk6IEVtc2NyaXB0ZW5GU05vZGU7XG4gIHJlbmFtZShvbGROb2RlOiBFbXNjcmlwdGVuRlNOb2RlLCBuZXdEaXI6IEVtc2NyaXB0ZW5GU05vZGUsIG5ld05hbWU6IHN0cmluZyk6IHZvaWQ7XG4gIHVubGluayhwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5hbWU6IHN0cmluZyk6IHZvaWQ7XG4gIHJtZGlyKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nKTogdm9pZDtcbiAgcmVhZGRpcihub2RlOiBFbXNjcmlwdGVuRlNOb2RlKTogc3RyaW5nW107XG4gIHN5bWxpbmsocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuZXdOYW1lOiBzdHJpbmcsIG9sZFBhdGg6IHN0cmluZyk6IHZvaWQ7XG4gIHJlYWRsaW5rKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUpOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1zY3JpcHRlblN0cmVhbU9wcyB7XG4gIG9wZW4oc3RyZWFtOiBFbXNjcmlwdGVuU3RyZWFtKTogdm9pZDtcbiAgY2xvc2Uoc3RyZWFtOiBFbXNjcmlwdGVuU3RyZWFtKTogdm9pZDtcbiAgcmVhZChzdHJlYW06IEVtc2NyaXB0ZW5TdHJlYW0sIGJ1ZmZlcjogVWludDhBcnJheSwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyKTogbnVtYmVyO1xuICB3cml0ZShzdHJlYW06IEVtc2NyaXB0ZW5TdHJlYW0sIGJ1ZmZlcjogVWludDhBcnJheSwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyKTogbnVtYmVyO1xuICBsbHNlZWsoc3RyZWFtOiBFbXNjcmlwdGVuU3RyZWFtLCBvZmZzZXQ6IG51bWJlciwgd2hlbmNlOiBudW1iZXIpOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1zY3JpcHRlbkZTIHtcbiAgbW91bnQobW91bnQ6IHtvcHRzOiB7cm9vdDogc3RyaW5nfX0pOiBFbXNjcmlwdGVuRlNOb2RlO1xuICBjcmVhdGVOb2RlKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGRldj86IGFueSk6IEVtc2NyaXB0ZW5GU05vZGU7XG4gIGdldE1vZGUocGF0aDogc3RyaW5nKTogbnVtYmVyO1xuICByZWFsUGF0aChub2RlOiBFbXNjcmlwdGVuRlNOb2RlKTogc3RyaW5nO1xuICBub2RlX29wczogRW1zY3JpcHRlbk5vZGVPcHM7XG4gIHN0cmVhbV9vcHM6IEVtc2NyaXB0ZW5TdHJlYW1PcHM7XG59XG5cbmNsYXNzIEJGU0Vtc2NyaXB0ZW5TdHJlYW1PcHMgaW1wbGVtZW50cyBFbXNjcmlwdGVuU3RyZWFtT3BzIHtcbiAgcHJpdmF0ZSBGUzogYW55O1xuICBwcml2YXRlIFBBVEg6IGFueTtcbiAgcHJpdmF0ZSBFUlJOT19DT0RFUzogYW55O1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZnM6IEJGU0Vtc2NyaXB0ZW5GUykge1xuICAgIHRoaXMuRlMgPSBmcy5nZXRGUygpO1xuICAgIHRoaXMuUEFUSCA9IGZzLmdldFBBVEgoKTtcbiAgICB0aGlzLkVSUk5PX0NPREVTID0gZnMuZ2V0RVJSTk9fQ09ERVMoKTtcbiAgfVxuXG4gIHB1YmxpYyBvcGVuKHN0cmVhbTogRW1zY3JpcHRlblN0cmVhbSk6IHZvaWQge1xuICAgIHZhciBwYXRoID0gdGhpcy5mcy5yZWFsUGF0aChzdHJlYW0ubm9kZSksXG4gICAgICBGUyA9IHRoaXMuRlM7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChGUy5pc0ZpbGUoc3RyZWFtLm5vZGUubW9kZSkpIHtcbiAgICAgICAgc3RyZWFtLm5mZCA9IGZzLm9wZW5TeW5jKHBhdGgsIHRoaXMuZnMuZmxhZ3NUb1Blcm1pc3Npb25TdHJpbmcoc3RyZWFtLmZsYWdzKSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLmNvZGUpIHRocm93IGU7XG4gICAgICB0aHJvdyBuZXcgRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjbG9zZShzdHJlYW06IEVtc2NyaXB0ZW5TdHJlYW0pOiB2b2lkIHtcbiAgICB2YXIgRlMgPSB0aGlzLkZTO1xuICAgIHRyeSB7XG4gICAgICBpZiAoRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpICYmIHN0cmVhbS5uZmQpIHtcbiAgICAgICAgZnMuY2xvc2VTeW5jKHN0cmVhbS5uZmQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghZS5jb2RlKSB0aHJvdyBlO1xuICAgICAgdGhyb3cgbmV3IEZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVhZChzdHJlYW06IEVtc2NyaXB0ZW5TdHJlYW0sIGJ1ZmZlcjogVWludDhBcnJheSwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAvLyBBdm9pZCBjb3B5aW5nIG92ZXJoZWFkIGJ5IHJlYWRpbmcgZGlyZWN0bHkgaW50byBidWZmZXIuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmcy5yZWFkU3luYyhzdHJlYW0ubmZkLCB1aW50OEFycmF5MkJ1ZmZlcihidWZmZXIpLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgd3JpdGUoc3RyZWFtOiBFbXNjcmlwdGVuU3RyZWFtLCBidWZmZXI6IFVpbnQ4QXJyYXksIG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgcG9zaXRpb246IG51bWJlcik6IG51bWJlciB7XG4gICAgLy8gQXZvaWQgY29weWluZyBvdmVyaGVhZC5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZzLndyaXRlU3luYyhzdHJlYW0ubmZkLCB1aW50OEFycmF5MkJ1ZmZlcihidWZmZXIpLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbGxzZWVrKHN0cmVhbTogRW1zY3JpcHRlblN0cmVhbSwgb2Zmc2V0OiBudW1iZXIsIHdoZW5jZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB2YXIgcG9zaXRpb24gPSBvZmZzZXQ7XG4gICAgaWYgKHdoZW5jZSA9PT0gMSkgeyAgLy8gU0VFS19DVVIuXG4gICAgICBwb3NpdGlvbiArPSBzdHJlYW0ucG9zaXRpb247XG4gICAgfSBlbHNlIGlmICh3aGVuY2UgPT09IDIpIHsgIC8vIFNFRUtfRU5ELlxuICAgICAgaWYgKHRoaXMuRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHN0YXQgPSBmcy5mc3RhdFN5bmMoc3RyZWFtLm5mZCk7XG4gICAgICAgICAgcG9zaXRpb24gKz0gc3RhdC5zaXplO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTLkVJTlZBTCk7XG4gICAgfVxuXG4gICAgc3RyZWFtLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9XG59XG5cbmNsYXNzIEJGU0Vtc2NyaXB0ZW5Ob2RlT3BzIGltcGxlbWVudHMgRW1zY3JpcHRlbk5vZGVPcHMge1xuICBwcml2YXRlIEZTOiBhbnk7XG4gIHByaXZhdGUgUEFUSDogYW55O1xuICBwcml2YXRlIEVSUk5PX0NPREVTOiBhbnk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBmczogQkZTRW1zY3JpcHRlbkZTKSB7XG4gICAgdGhpcy5GUyA9IGZzLmdldEZTKCk7XG4gICAgdGhpcy5QQVRIID0gZnMuZ2V0UEFUSCgpO1xuICAgIHRoaXMuRVJSTk9fQ09ERVMgPSBmcy5nZXRFUlJOT19DT0RFUygpO1xuICB9XG5cbiAgcHVibGljIGdldGF0dHIobm9kZTogRW1zY3JpcHRlbkZTTm9kZSk6IFN0YXRzIHtcbiAgICB2YXIgcGF0aCA9IHRoaXMuZnMucmVhbFBhdGgobm9kZSk7XG4gICAgdmFyIHN0YXQ6IE5vZGVTdGF0cztcbiAgICB0cnkge1xuICAgICAgc3RhdCA9IGZzLmxzdGF0U3luYyhwYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIWUuY29kZSkgdGhyb3cgZTtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGRldjogc3RhdC5kZXYsXG4gICAgICBpbm86IHN0YXQuaW5vLFxuICAgICAgbW9kZTogc3RhdC5tb2RlLFxuICAgICAgbmxpbms6IHN0YXQubmxpbmssXG4gICAgICB1aWQ6IHN0YXQudWlkLFxuICAgICAgZ2lkOiBzdGF0LmdpZCxcbiAgICAgIHJkZXY6IHN0YXQucmRldixcbiAgICAgIHNpemU6IHN0YXQuc2l6ZSxcbiAgICAgIGF0aW1lOiBzdGF0LmF0aW1lLFxuICAgICAgbXRpbWU6IHN0YXQubXRpbWUsXG4gICAgICBjdGltZTogc3RhdC5jdGltZSxcbiAgICAgIGJsa3NpemU6IHN0YXQuYmxrc2l6ZSxcbiAgICAgIGJsb2Nrczogc3RhdC5ibG9ja3NcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHNldGF0dHIobm9kZTogRW1zY3JpcHRlbkZTTm9kZSwgYXR0cjogU3RhdHMpOiB2b2lkIHtcbiAgICB2YXIgcGF0aCA9IHRoaXMuZnMucmVhbFBhdGgobm9kZSk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChhdHRyLm1vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmcy5jaG1vZFN5bmMocGF0aCwgYXR0ci5tb2RlKTtcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBjb21tb24gbm9kZSBzdHJ1Y3R1cmUgbW9kZSBhcyB3ZWxsXG4gICAgICAgIG5vZGUubW9kZSA9IGF0dHIubW9kZTtcbiAgICAgIH1cbiAgICAgIGlmIChhdHRyLnRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoYXR0ci50aW1lc3RhbXApO1xuICAgICAgICBmcy51dGltZXNTeW5jKHBhdGgsIGRhdGUsIGRhdGUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghZS5jb2RlKSB0aHJvdyBlO1xuICAgICAgLy8gSWdub3JlIG5vdCBzdXBwb3J0ZWQgZXJyb3JzLiBFbXNjcmlwdGVuIGRvZXMgdXRpbWVzU3luYyB3aGVuIGl0XG4gICAgICAvLyB3cml0ZXMgZmlsZXMsIGJ1dCBuZXZlciByZWFsbHkgcmVxdWlyZXMgdGhlIHZhbHVlIHRvIGJlIHNldC5cbiAgICAgIGlmIChlLmNvZGUgIT09IFwiRU5PVFNVUFwiKSB7XG4gICAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGF0dHIuc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBmcy50cnVuY2F0ZVN5bmMocGF0aCwgYXR0ci5zaXplKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKCFlLmNvZGUpIHRocm93IGU7XG4gICAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbG9va3VwKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nKTogRW1zY3JpcHRlbkZTTm9kZSB7XG4gICAgdmFyIHBhdGggPSB0aGlzLlBBVEguam9pbjIodGhpcy5mcy5yZWFsUGF0aChwYXJlbnQpLCBuYW1lKTtcbiAgICB2YXIgbW9kZSA9IHRoaXMuZnMuZ2V0TW9kZShwYXRoKTtcbiAgICByZXR1cm4gdGhpcy5mcy5jcmVhdGVOb2RlKHBhcmVudCwgbmFtZSwgbW9kZSk7XG4gIH1cblxuICBwdWJsaWMgbWtub2QocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuYW1lOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgZGV2OiBhbnkpOiBFbXNjcmlwdGVuRlNOb2RlIHtcbiAgICB2YXIgbm9kZSA9IHRoaXMuZnMuY3JlYXRlTm9kZShwYXJlbnQsIG5hbWUsIG1vZGUsIGRldik7XG4gICAgLy8gY3JlYXRlIHRoZSBiYWNraW5nIG5vZGUgZm9yIHRoaXMgaW4gdGhlIGZzIHJvb3QgYXMgd2VsbFxuICAgIHZhciBwYXRoID0gdGhpcy5mcy5yZWFsUGF0aChub2RlKTtcbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMuRlMuaXNEaXIobm9kZS5tb2RlKSkge1xuICAgICAgICBmcy5ta2RpclN5bmMocGF0aCwgbm9kZS5tb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aCwgJycsIHsgbW9kZTogbm9kZS5tb2RlIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghZS5jb2RlKSB0aHJvdyBlO1xuICAgICAgdGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHB1YmxpYyByZW5hbWUob2xkTm9kZTogRW1zY3JpcHRlbkZTTm9kZSwgbmV3RGlyOiBFbXNjcmlwdGVuRlNOb2RlLCBuZXdOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB2YXIgb2xkUGF0aCA9IHRoaXMuZnMucmVhbFBhdGgob2xkTm9kZSk7XG4gICAgdmFyIG5ld1BhdGggPSB0aGlzLlBBVEguam9pbjIodGhpcy5mcy5yZWFsUGF0aChuZXdEaXIpLCBuZXdOYW1lKTtcbiAgICB0cnkge1xuICAgICAgZnMucmVuYW1lU3luYyhvbGRQYXRoLCBuZXdQYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIWUuY29kZSkgdGhyb3cgZTtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdW5saW5rKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdmFyIHBhdGggPSB0aGlzLlBBVEguam9pbjIodGhpcy5mcy5yZWFsUGF0aChwYXJlbnQpLCBuYW1lKTtcbiAgICB0cnkge1xuICAgICAgZnMudW5saW5rU3luYyhwYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIWUuY29kZSkgdGhyb3cgZTtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcm1kaXIocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuYW1lOiBzdHJpbmcpIHtcbiAgICB2YXIgcGF0aCA9IHRoaXMuUEFUSC5qb2luMih0aGlzLmZzLnJlYWxQYXRoKHBhcmVudCksIG5hbWUpO1xuICAgIHRyeSB7XG4gICAgICBmcy5ybWRpclN5bmMocGF0aCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLmNvZGUpIHRocm93IGU7XG4gICAgICB0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlYWRkaXIobm9kZTogRW1zY3JpcHRlbkZTTm9kZSk6IHN0cmluZ1tdIHtcbiAgICB2YXIgcGF0aCA9IHRoaXMuZnMucmVhbFBhdGgobm9kZSk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmcy5yZWFkZGlyU3luYyhwYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIWUuY29kZSkgdGhyb3cgZTtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3ltbGluayhwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5ld05hbWU6IHN0cmluZywgb2xkUGF0aDogc3RyaW5nKTogdm9pZCB7XG4gICAgdmFyIG5ld1BhdGggPSB0aGlzLlBBVEguam9pbjIodGhpcy5mcy5yZWFsUGF0aChwYXJlbnQpLCBuZXdOYW1lKTtcbiAgICB0cnkge1xuICAgICAgZnMuc3ltbGlua1N5bmMob2xkUGF0aCwgbmV3UGF0aCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLmNvZGUpIHRocm93IGU7XG4gICAgICB0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlYWRsaW5rKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUpOiBzdHJpbmcge1xuICAgIHZhciBwYXRoID0gdGhpcy5mcy5yZWFsUGF0aChub2RlKTtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZzLnJlYWRsaW5rU3luYyhwYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIWUuY29kZSkgdGhyb3cgZTtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQkZTRW1zY3JpcHRlbkZTIGltcGxlbWVudHMgRW1zY3JpcHRlbkZTIHtcbiAgcHJpdmF0ZSBGUzogYW55O1xuICBwcml2YXRlIFBBVEg6IGFueTtcbiAgcHJpdmF0ZSBFUlJOT19DT0RFUzogYW55O1xuICBjb25zdHJ1Y3RvcihfRlMgPSAoPGFueT4gc2VsZilbJ0ZTJ10sIF9QQVRIID0gKDxhbnk+IHNlbGYpWydQQVRIJ10sIF9FUlJOT19DT0RFUyA9ICg8YW55PiBzZWxmKVsnRVJSTk9fQ09ERVMnXSkge1xuICAgIGlmICh0eXBlb2YgQnJvd3NlckZTID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlckZTIGlzIG5vdCBsb2FkZWQuIFBsZWFzZSBsb2FkIGl0IGJlZm9yZSB0aGlzIGxpYnJhcnkuXCIpO1xuICAgIH1cbiAgICB0aGlzLkZTID0gX0ZTO1xuICAgIHRoaXMuUEFUSCA9IF9QQVRIO1xuICAgIHRoaXMuRVJSTk9fQ09ERVMgPSBfRVJSTk9fQ09ERVM7XG4gICAgdGhpcy5ub2RlX29wcyA9IG5ldyBCRlNFbXNjcmlwdGVuTm9kZU9wcyh0aGlzKTtcbiAgICB0aGlzLnN0cmVhbV9vcHMgPSBuZXcgQkZTRW1zY3JpcHRlblN0cmVhbU9wcyh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBtb3VudChtb3VudDoge29wdHM6IHtyb290OiBzdHJpbmd9fSk6IEVtc2NyaXB0ZW5GU05vZGUge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZU5vZGUobnVsbCwgJy8nLCB0aGlzLmdldE1vZGUobW91bnQub3B0cy5yb290KSwgMCk7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlTm9kZShwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5hbWU6IHN0cmluZywgbW9kZTogbnVtYmVyLCBkZXY/OiBhbnkpOiBFbXNjcmlwdGVuRlNOb2RlIHtcbiAgICB2YXIgRlMgPSB0aGlzLkZTO1xuICAgIGlmICghRlMuaXNEaXIobW9kZSkgJiYgIUZTLmlzRmlsZShtb2RlKSAmJiAhRlMuaXNMaW5rKG1vZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTLkVJTlZBTCk7XG4gICAgfVxuICAgIHZhciBub2RlID0gRlMuY3JlYXRlTm9kZShwYXJlbnQsIG5hbWUsIG1vZGUpO1xuICAgIG5vZGUubm9kZV9vcHMgPSB0aGlzLm5vZGVfb3BzO1xuICAgIG5vZGUuc3RyZWFtX29wcyA9IHRoaXMuc3RyZWFtX29wcztcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNb2RlKHBhdGg6IHN0cmluZyk6IG51bWJlciB7XG4gICAgdmFyIHN0YXQ6IE5vZGVTdGF0cztcbiAgICB0cnkge1xuICAgICAgc3RhdCA9IGZzLmxzdGF0U3luYyhwYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIWUuY29kZSkgdGhyb3cgZTtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXQubW9kZTtcbiAgfVxuXG4gIHB1YmxpYyByZWFsUGF0aChub2RlOiBFbXNjcmlwdGVuRlNOb2RlKTogc3RyaW5nIHtcbiAgICB2YXIgcGFydHM6IHN0cmluZ1tdID0gW107XG4gICAgd2hpbGUgKG5vZGUucGFyZW50ICE9PSBub2RlKSB7XG4gICAgICBwYXJ0cy5wdXNoKG5vZGUubmFtZSk7XG4gICAgICBub2RlID0gbm9kZS5wYXJlbnQ7XG4gICAgfVxuICAgIHBhcnRzLnB1c2gobm9kZS5tb3VudC5vcHRzLnJvb3QpO1xuICAgIHBhcnRzLnJldmVyc2UoKTtcbiAgICByZXR1cm4gdGhpcy5QQVRILmpvaW4uYXBwbHkobnVsbCwgcGFydHMpO1xuICB9XG4gIC8vIFRoaXMgbWFwcyB0aGUgaW50ZWdlciBwZXJtaXNzaW9uIG1vZGVzIGZyb20gaHR0cDovL2xpbnV4LmRpZS5uZXQvbWFuLzMvb3BlblxuICAvLyB0byBub2RlLmpzLXNwZWNpZmljIGZpbGUgb3BlbiBwZXJtaXNzaW9uIHN0cmluZ3MgYXQgaHR0cDovL25vZGVqcy5vcmcvYXBpL2ZzLmh0bWwjZnNfZnNfb3Blbl9wYXRoX2ZsYWdzX21vZGVfY2FsbGJhY2tcbiAgcHVibGljIGZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nTWFwID0ge1xuICAgIDAvKk9fUkRPTkxZKi86ICdyJyxcbiAgICAxLypPX1dST05MWSovOiAncisnLFxuICAgIDIvKk9fUkRXUiovOiAncisnLFxuICAgIDY0LypPX0NSRUFUKi86ICdyJyxcbiAgICA2NS8qT19XUk9OTFl8T19DUkVBVCovOiAncisnLFxuICAgIDY2LypPX1JEV1J8T19DUkVBVCovOiAncisnLFxuICAgIDEyOS8qT19XUk9OTFl8T19FWENMKi86ICdyeCsnLFxuICAgIDE5My8qT19XUk9OTFl8T19DUkVBVHxPX0VYQ0wqLzogJ3J4KycsXG4gICAgNTE0LypPX1JEV1J8T19UUlVOQyovOiAndysnLFxuICAgIDU3Ny8qT19XUk9OTFl8T19DUkVBVHxPX1RSVU5DKi86ICd3JyxcbiAgICA1NzgvKk9fQ1JFQVR8T19SRFdSfE9fVFJVTkMqLzogJ3crJyxcbiAgICA3MDUvKk9fV1JPTkxZfE9fQ1JFQVR8T19FWENMfE9fVFJVTkMqLzogJ3d4JyxcbiAgICA3MDYvKk9fUkRXUnxPX0NSRUFUfE9fRVhDTHxPX1RSVU5DKi86ICd3eCsnLFxuICAgIDEwMjQvKk9fQVBQRU5EKi86ICdhJyxcbiAgICAxMDI1LypPX1dST05MWXxPX0FQUEVORCovOiAnYScsXG4gICAgMTAyNi8qT19SRFdSfE9fQVBQRU5EKi86ICdhKycsXG4gICAgMTA4OS8qT19XUk9OTFl8T19DUkVBVHxPX0FQUEVORCovOiAnYScsXG4gICAgMTA5MC8qT19SRFdSfE9fQ1JFQVR8T19BUFBFTkQqLzogJ2ErJyxcbiAgICAxMTUzLypPX1dST05MWXxPX0VYQ0x8T19BUFBFTkQqLzogJ2F4JyxcbiAgICAxMTU0LypPX1JEV1J8T19FWENMfE9fQVBQRU5EKi86ICdheCsnLFxuICAgIDEyMTcvKk9fV1JPTkxZfE9fQ1JFQVR8T19FWENMfE9fQVBQRU5EKi86ICdheCcsXG4gICAgMTIxOC8qT19SRFdSfE9fQ1JFQVR8T19FWENMfE9fQVBQRU5EKi86ICdheCsnLFxuICAgIDQwOTYvKk9fUkRPTkxZfE9fRFNZTkMqLzogJ3JzJyxcbiAgICA0MDk4LypPX1JEV1J8T19EU1lOQyovOiAncnMrJ1xuICB9XG5cbiAgcHVibGljIGZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nKGZsYWdzOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHZhciBwYXJzZWRGbGFncyA9ICh0eXBlb2YgZmxhZ3MgPT09IFwic3RyaW5nXCIpID8gcGFyc2VJbnQoZmxhZ3MsIDEwKSA6IDxudW1iZXI+PGFueT4gZmxhZ3M7XG4gICAgcGFyc2VkRmxhZ3MgJj0gMHgxRkZGO1xuICAgIGlmIChwYXJzZWRGbGFncyBpbiB0aGlzLmZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nTWFwKSB7XG4gICAgICByZXR1cm4gKDxhbnk+IHRoaXMuZmxhZ3NUb1Blcm1pc3Npb25TdHJpbmdNYXApW3BhcnNlZEZsYWdzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZsYWdzO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRGUygpIHtcbiAgICByZXR1cm4gdGhpcy5GUztcbiAgfVxuXG4gIHB1YmxpYyBnZXRQQVRIKCkge1xuICAgIHJldHVybiB0aGlzLlBBVEg7XG4gIH1cblxuICBwdWJsaWMgZ2V0RVJSTk9fQ09ERVMoKSB7XG4gICAgcmV0dXJuIHRoaXMuRVJSTk9fQ09ERVM7XG4gIH1cblxuICBwdWJsaWMgbm9kZV9vcHM6IEVtc2NyaXB0ZW5Ob2RlT3BzO1xuICBwdWJsaWMgc3RyZWFtX29wczogRW1zY3JpcHRlblN0cmVhbU9wcztcbn1cbiJdfQ==