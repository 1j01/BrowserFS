var BrowserFS = require('../core/browserfs');
var fs = require('../core/node_fs');
var util_1 = require('../core/util');
var BFSEmscriptenStreamOps = (function () {
    function BFSEmscriptenStreamOps(fs) {
        this.fs = fs;
        this.nodefs = fs.getNodeFS();
        this.FS = fs.getFS();
        this.PATH = fs.getPATH();
        this.ERRNO_CODES = fs.getERRNO_CODES();
    }
    BFSEmscriptenStreamOps.prototype.open = function (stream) {
        var path = this.fs.realPath(stream.node), FS = this.FS;
        try {
            if (FS.isFile(stream.node.mode)) {
                stream.nfd = this.nodefs.openSync(path, this.fs.flagsToPermissionString(stream.flags));
            }
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenStreamOps.prototype.close = function (stream) {
        var FS = this.FS;
        try {
            if (FS.isFile(stream.node.mode) && stream.nfd) {
                this.nodefs.closeSync(stream.nfd);
            }
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenStreamOps.prototype.read = function (stream, buffer, offset, length, position) {
        try {
            return this.nodefs.readSync(stream.nfd, util_1.uint8Array2Buffer(buffer), offset, length, position);
        }
        catch (e) {
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenStreamOps.prototype.write = function (stream, buffer, offset, length, position) {
        try {
            return this.nodefs.writeSync(stream.nfd, util_1.uint8Array2Buffer(buffer), offset, length, position);
        }
        catch (e) {
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenStreamOps.prototype.llseek = function (stream, offset, whence) {
        var position = offset;
        if (whence === 1) {
            position += stream.position;
        }
        else if (whence === 2) {
            if (this.FS.isFile(stream.node.mode)) {
                try {
                    var stat = this.nodefs.fstatSync(stream.nfd);
                    position += stat.size;
                }
                catch (e) {
                    throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
                }
            }
        }
        if (position < 0) {
            throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);
        }
        stream.position = position;
        return position;
    };
    return BFSEmscriptenStreamOps;
})();
var BFSEmscriptenNodeOps = (function () {
    function BFSEmscriptenNodeOps(fs) {
        this.fs = fs;
        this.nodefs = fs.getNodeFS();
        this.FS = fs.getFS();
        this.PATH = fs.getPATH();
        this.ERRNO_CODES = fs.getERRNO_CODES();
    }
    BFSEmscriptenNodeOps.prototype.getattr = function (node) {
        var path = this.fs.realPath(node);
        var stat;
        try {
            stat = this.nodefs.lstatSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
        return {
            dev: stat.dev,
            ino: stat.ino,
            mode: stat.mode,
            nlink: stat.nlink,
            uid: stat.uid,
            gid: stat.gid,
            rdev: stat.rdev,
            size: stat.size,
            atime: stat.atime,
            mtime: stat.mtime,
            ctime: stat.ctime,
            blksize: stat.blksize,
            blocks: stat.blocks
        };
    };
    BFSEmscriptenNodeOps.prototype.setattr = function (node, attr) {
        var path = this.fs.realPath(node);
        try {
            if (attr.mode !== undefined) {
                this.nodefs.chmodSync(path, attr.mode);
                node.mode = attr.mode;
            }
            if (attr.timestamp !== undefined) {
                var date = new Date(attr.timestamp);
                this.nodefs.utimesSync(path, date, date);
            }
        }
        catch (e) {
            if (!e.code)
                throw e;
            if (e.code !== "ENOTSUP") {
                throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
            }
        }
        if (attr.size !== undefined) {
            try {
                this.nodefs.truncateSync(path, attr.size);
            }
            catch (e) {
                if (!e.code)
                    throw e;
                throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
            }
        }
    };
    BFSEmscriptenNodeOps.prototype.lookup = function (parent, name) {
        var path = this.PATH.join2(this.fs.realPath(parent), name);
        var mode = this.fs.getMode(path);
        return this.fs.createNode(parent, name, mode);
    };
    BFSEmscriptenNodeOps.prototype.mknod = function (parent, name, mode, dev) {
        var node = this.fs.createNode(parent, name, mode, dev);
        var path = this.fs.realPath(node);
        try {
            if (this.FS.isDir(node.mode)) {
                this.nodefs.mkdirSync(path, node.mode);
            }
            else {
                this.nodefs.writeFileSync(path, '', { mode: node.mode });
            }
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
        return node;
    };
    BFSEmscriptenNodeOps.prototype.rename = function (oldNode, newDir, newName) {
        var oldPath = this.fs.realPath(oldNode);
        var newPath = this.PATH.join2(this.fs.realPath(newDir), newName);
        try {
            this.nodefs.renameSync(oldPath, newPath);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenNodeOps.prototype.unlink = function (parent, name) {
        var path = this.PATH.join2(this.fs.realPath(parent), name);
        try {
            this.nodefs.unlinkSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenNodeOps.prototype.rmdir = function (parent, name) {
        var path = this.PATH.join2(this.fs.realPath(parent), name);
        try {
            this.nodefs.rmdirSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenNodeOps.prototype.readdir = function (node) {
        var path = this.fs.realPath(node);
        try {
            return this.nodefs.readdirSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenNodeOps.prototype.symlink = function (parent, newName, oldPath) {
        var newPath = this.PATH.join2(this.fs.realPath(parent), newName);
        try {
            this.nodefs.symlinkSync(oldPath, newPath);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    BFSEmscriptenNodeOps.prototype.readlink = function (node) {
        var path = this.fs.realPath(node);
        try {
            return this.nodefs.readlinkSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
    };
    return BFSEmscriptenNodeOps;
})();
var BFSEmscriptenFS = (function () {
    function BFSEmscriptenFS(_FS, _PATH, _ERRNO_CODES, nodefs) {
        if (_FS === void 0) { _FS = self['FS']; }
        if (_PATH === void 0) { _PATH = self['PATH']; }
        if (_ERRNO_CODES === void 0) { _ERRNO_CODES = self['ERRNO_CODES']; }
        if (nodefs === void 0) { nodefs = fs; }
        this.flagsToPermissionStringMap = {
            0: 'r',
            1: 'r+',
            2: 'r+',
            64: 'r',
            65: 'r+',
            66: 'r+',
            129: 'rx+',
            193: 'rx+',
            514: 'w+',
            577: 'w',
            578: 'w+',
            705: 'wx',
            706: 'wx+',
            1024: 'a',
            1025: 'a',
            1026: 'a+',
            1089: 'a',
            1090: 'a+',
            1153: 'ax',
            1154: 'ax+',
            1217: 'ax',
            1218: 'ax+',
            4096: 'rs',
            4098: 'rs+'
        };
        if (typeof BrowserFS === 'undefined') {
            throw new Error("BrowserFS is not loaded. Please load it before this library.");
        }
        this.nodefs = nodefs;
        this.FS = _FS;
        this.PATH = _PATH;
        this.ERRNO_CODES = _ERRNO_CODES;
        this.node_ops = new BFSEmscriptenNodeOps(this);
        this.stream_ops = new BFSEmscriptenStreamOps(this);
    }
    BFSEmscriptenFS.prototype.mount = function (mount) {
        return this.createNode(null, '/', this.getMode(mount.opts.root), 0);
    };
    BFSEmscriptenFS.prototype.createNode = function (parent, name, mode, dev) {
        var FS = this.FS;
        if (!FS.isDir(mode) && !FS.isFile(mode) && !FS.isLink(mode)) {
            throw new FS.ErrnoError(this.ERRNO_CODES.EINVAL);
        }
        var node = FS.createNode(parent, name, mode);
        node.node_ops = this.node_ops;
        node.stream_ops = this.stream_ops;
        return node;
    };
    BFSEmscriptenFS.prototype.getMode = function (path) {
        var stat;
        try {
            stat = this.nodefs.lstatSync(path);
        }
        catch (e) {
            if (!e.code)
                throw e;
            throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
        return stat.mode;
    };
    BFSEmscriptenFS.prototype.realPath = function (node) {
        var parts = [];
        while (node.parent !== node) {
            parts.push(node.name);
            node = node.parent;
        }
        parts.push(node.mount.opts.root);
        parts.reverse();
        return this.PATH.join.apply(null, parts);
    };
    BFSEmscriptenFS.prototype.flagsToPermissionString = function (flags) {
        var parsedFlags = (typeof flags === "string") ? parseInt(flags, 10) : flags;
        parsedFlags &= 0x1FFF;
        if (parsedFlags in this.flagsToPermissionStringMap) {
            return this.flagsToPermissionStringMap[parsedFlags];
        }
        else {
            return flags;
        }
    };
    BFSEmscriptenFS.prototype.getNodeFS = function () {
        return this.nodefs;
    };
    BFSEmscriptenFS.prototype.getFS = function () {
        return this.FS;
    };
    BFSEmscriptenFS.prototype.getPATH = function () {
        return this.PATH;
    };
    BFSEmscriptenFS.prototype.getERRNO_CODES = function () {
        return this.ERRNO_CODES;
    };
    return BFSEmscriptenFS;
})();
exports.__esModule = true;
exports["default"] = BFSEmscriptenFS;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW1zY3JpcHRlbl9mcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9nZW5lcmljL2Vtc2NyaXB0ZW5fZnMudHMiXSwibmFtZXMiOlsiQkZTRW1zY3JpcHRlblN0cmVhbU9wcyIsIkJGU0Vtc2NyaXB0ZW5TdHJlYW1PcHMuY29uc3RydWN0b3IiLCJCRlNFbXNjcmlwdGVuU3RyZWFtT3BzLm9wZW4iLCJCRlNFbXNjcmlwdGVuU3RyZWFtT3BzLmNsb3NlIiwiQkZTRW1zY3JpcHRlblN0cmVhbU9wcy5yZWFkIiwiQkZTRW1zY3JpcHRlblN0cmVhbU9wcy53cml0ZSIsIkJGU0Vtc2NyaXB0ZW5TdHJlYW1PcHMubGxzZWVrIiwiQkZTRW1zY3JpcHRlbk5vZGVPcHMiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy5jb25zdHJ1Y3RvciIsIkJGU0Vtc2NyaXB0ZW5Ob2RlT3BzLmdldGF0dHIiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy5zZXRhdHRyIiwiQkZTRW1zY3JpcHRlbk5vZGVPcHMubG9va3VwIiwiQkZTRW1zY3JpcHRlbk5vZGVPcHMubWtub2QiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy5yZW5hbWUiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy51bmxpbmsiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy5ybWRpciIsIkJGU0Vtc2NyaXB0ZW5Ob2RlT3BzLnJlYWRkaXIiLCJCRlNFbXNjcmlwdGVuTm9kZU9wcy5zeW1saW5rIiwiQkZTRW1zY3JpcHRlbk5vZGVPcHMucmVhZGxpbmsiLCJCRlNFbXNjcmlwdGVuRlMiLCJCRlNFbXNjcmlwdGVuRlMuY29uc3RydWN0b3IiLCJCRlNFbXNjcmlwdGVuRlMubW91bnQiLCJCRlNFbXNjcmlwdGVuRlMuY3JlYXRlTm9kZSIsIkJGU0Vtc2NyaXB0ZW5GUy5nZXRNb2RlIiwiQkZTRW1zY3JpcHRlbkZTLnJlYWxQYXRoIiwiQkZTRW1zY3JpcHRlbkZTLmZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nIiwiQkZTRW1zY3JpcHRlbkZTLmdldE5vZGVGUyIsIkJGU0Vtc2NyaXB0ZW5GUy5nZXRGUyIsIkJGU0Vtc2NyaXB0ZW5GUy5nZXRQQVRIIiwiQkZTRW1zY3JpcHRlbkZTLmdldEVSUk5PX0NPREVTIl0sIm1hcHBpbmdzIjoiQUFXQSxJQUFPLFNBQVMsV0FBVyxtQkFBbUIsQ0FBQyxDQUFDO0FBRWhELElBQU8sRUFBRSxXQUFXLGlCQUFpQixDQUFDLENBQUM7QUFFdkMscUJBQWdDLGNBQWMsQ0FBQyxDQUFBO0FBaUUvQztJQU1FQSxnQ0FBb0JBLEVBQW1CQTtRQUFuQkMsT0FBRUEsR0FBRkEsRUFBRUEsQ0FBaUJBO1FBQ3JDQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxFQUFFQSxDQUFDQSxTQUFTQSxFQUFFQSxDQUFDQTtRQUM3QkEsSUFBSUEsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0E7UUFDckJBLElBQUlBLENBQUNBLElBQUlBLEdBQUdBLEVBQUVBLENBQUNBLE9BQU9BLEVBQUVBLENBQUNBO1FBQ3pCQSxJQUFJQSxDQUFDQSxXQUFXQSxHQUFHQSxFQUFFQSxDQUFDQSxjQUFjQSxFQUFFQSxDQUFDQTtJQUN6Q0EsQ0FBQ0E7SUFFTUQscUNBQUlBLEdBQVhBLFVBQVlBLE1BQXdCQTtRQUNsQ0UsSUFBSUEsSUFBSUEsR0FBR0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFDdENBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBO1FBQ2ZBLElBQUlBLENBQUNBO1lBQ0hBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLE1BQU1BLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNoQ0EsTUFBTUEsQ0FBQ0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsSUFBSUEsRUFBRUEsSUFBSUEs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Q0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7Z0JBRXZDQSxJQUFJQSxDQUFDQSxJQUFJQSxHQUFHQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQTtZQUN4QkEsQ0FBQ0E7WUFDREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsS0FBS0EsU0FBU0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ2pDQSxJQUFJQSxJQUFJQSxHQUFHQSxJQUFJQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxDQUFDQTtnQkFDcENBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLFVBQVVBLENBQUNBLElBQUlBLEVBQUVBLElBQUlBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO1lBQzNDQSxDQUFDQTtRQUNIQSxDQUFFQTtRQUFBQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNYQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQTtnQkFBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7WUFHckJBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLEtBQUtBLFNBQVNBLENBQUNBLENBQUNBLENBQUNBO2dCQUN6QkEsTUFBTUEsSUFBSUEsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDekRBLENBQUNBO1FBQ0hBLENBQUNBO1FBQ0RBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLEtBQUtBLFNBQVNBLENBQUNBLENBQUNBLENBQUNBO1lBQzVCQSxJQUFJQSxDQUFDQTtnQkFDSEEsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsSUFBSUEsRUFBRUEsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDNUNBLENBQUVBO1lBQUFBLEtBQUtBLENBQUNBLENBQUNB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QSxFQUFFQSxDQUFDQSxHQUFpQkEsS0FBS0EsQ0FBQ0E7UUFDMUZBLFdBQVdBLElBQUlBLE1BQU1BLENBQUNBO1FBQ3RCQSxFQUFFQSxDQUFDQSxDQUFDQSxXQUFXQSxJQUFJQSxJQUFJQSxDQUFDQSwwQkFBMEJBLENBQUNBLENBQUNBLENBQUNBO1lBQ25EQSxNQUFNQSxDQUFRQSxJQUFJQSxDQUFDQSwwQkFBMkJBLENBQUNBLFdBQVdBLENBQUNBLENBQUNBO1FBQzlEQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNOQSxNQUFNQSxDQUFDQSxLQUFLQSxDQUFDQTtRQUNmQSxDQUFDQTtJQUNIQSxDQUFDQTtJQUVNTixtQ0FBU0EsR0FBaEJBO1FBQ0VPLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBO0lBQ3JCQSxDQUFDQTtJQUVNUCwrQkFBS0EsR0FBWkE7UUFDRVEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7SUFDakJBLENBQUNBO0lBRU1SLGlDQUFPQSxHQUFkQTtRQUNFUyxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQTtJQUNuQkEsQ0FBQ0E7SUFFTVQsd0NBQWNBLEdBQXJCQTtRQUNFVSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQTtJQUMxQkEsQ0FBQ0E7SUFJSFYsc0JBQUNBO0FBQURBLENBQUNBLEFBOUdELElBOEdDO0FBOUdEO29DQThHQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEZWZpbmVzIGFuIEVtc2NyaXB0ZW4gZmlsZSBzeXN0ZW0gb2JqZWN0IGZvciB1c2UgaW4gdGhlIEVtc2NyaXB0ZW4gdmlydHVhbFxuICogZmlsZXN5c3RlbS4gQWxsb3dzIHlvdSB0byB1c2Ugc3luY2hyb25vdXMgQnJvd3NlckZTIGZpbGUgc3lzdGVtcyBmcm9tIHdpdGhpblxuICogRW1zY3JpcHRlbi5cbiAqXG4gKiBZb3UgY2FuIGNvbnN0cnVjdCBhIEJGU0Vtc2NyaXB0ZW5GUywgbW91bnQgaXQgdXNpbmcgaXRzIG1vdW50IGNvbW1hbmQsXG4gKiBhbmQgdGhlbiBtb3VudCBpdCBpbnRvIEVtc2NyaXB0ZW4uXG4gKlxuICogQWRhcHRlZCBmcm9tIEVtc2NyaXB0ZW4ncyBOb2RlRlM6XG4gKiBodHRwczovL3Jhdy5naXRodWIuY29tL2tyaXBrZW4vZW1zY3JpcHRlbi9tYXN0ZXIvc3JjL2xpYnJhcnlfbm9kZWZzLmpzXG4gKi9cbmltcG9ydCBCcm93c2VyRlMgPSByZXF1aXJlKCcuLi9jb3JlL2Jyb3dzZXJmcycpO1xuaW1wb3J0IEZTIGZyb20gJy4uL2NvcmUvRlMnO1xuaW1wb3J0IGZzID0gcmVxdWlyZSgnLi4vY29yZS9ub2RlX2ZzJyk7XG5pbXBvcnQgTm9kZVN0YXRzIGZyb20gJy4uL2NvcmUvbm9kZV9mc19zdGF0cyc7XG5pbXBvcnQge3VpbnQ4QXJyYXkyQnVmZmVyfSBmcm9tICcuLi9jb3JlL3V0aWwnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRzIHtcbiAgZGV2OiBudW1iZXI7XG4gIGlubzogbnVtYmVyO1xuICBtb2RlOiBudW1iZXI7XG4gIG5saW5rOiBudW1iZXI7XG4gIHVpZDogbnVtYmVyO1xuICBnaWQ6IG51bWJlcjtcbiAgcmRldjogbnVtYmVyO1xuICBzaXplOiBudW1iZXI7XG4gIGJsa3NpemU6IG51bWJlcjtcbiAgYmxvY2tzOiBudW1iZXI7XG4gIGF0aW1lOiBEYXRlO1xuICBtdGltZTogRGF0ZTtcbiAgY3RpbWU6IERhdGU7XG4gIHRpbWVzdGFtcD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbXNjcmlwdGVuRlNOb2RlIHtcbiAgbmFtZTogc3RyaW5nO1xuICBtb2RlOiBudW1iZXI7XG4gIHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZTtcbiAgbW91bnQ6IHtvcHRzOiB7cm9vdDogc3RyaW5nfX07XG4gIHN0cmVhbV9vcHM6IEVtc2NyaXB0ZW5TdHJlYW1PcHM7XG4gIG5vZGVfb3BzOiBFbXNjcmlwdGVuTm9kZU9wcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbXNjcmlwdGVuU3RyZWFtIHtcbiAgbm9kZTogRW1zY3JpcHRlbkZTTm9kZTtcbiAgbmZkOiBhbnk7XG4gIGZsYWdzOiBzdHJpbmc7XG4gIHBvc2l0aW9uOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1zY3JpcHRlbk5vZGVPcHMge1xuICBnZXRhdHRyKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUpOiBTdGF0cztcbiAgc2V0YXR0cihub2RlOiBFbXNjcmlwdGVuRlNOb2RlLCBhdHRyOiBTdGF0cyk6IHZvaWQ7XG4gIGxvb2t1cChwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5hbWU6IHN0cmluZyk6IEVtc2NyaXB0ZW5GU05vZGU7XG4gIG1rbm9kKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGRldjogYW55KTogRW1zY3JpcHRlbkZTTm9kZTtcbiAgcmVuYW1lKG9sZE5vZGU6IEVtc2NyaXB0ZW5GU05vZGUsIG5ld0RpcjogRW1zY3JpcHRlbkZTTm9kZSwgbmV3TmFtZTogc3RyaW5nKTogdm9pZDtcbiAgdW5saW5rKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nKTogdm9pZDtcbiAgcm1kaXIocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuYW1lOiBzdHJpbmcpOiB2b2lkO1xuICByZWFkZGlyKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUpOiBzdHJpbmdbXTtcbiAgc3ltbGluayhwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5ld05hbWU6IHN0cmluZywgb2xkUGF0aDogc3RyaW5nKTogdm9pZDtcbiAgcmVhZGxpbmsobm9kZTogRW1zY3JpcHRlbkZTTm9kZSk6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbXNjcmlwdGVuU3RyZWFtT3BzIHtcbiAgb3BlbihzdHJlYW06IEVtc2NyaXB0ZW5TdHJlYW0pOiB2b2lkO1xuICBjbG9zZShzdHJlYW06IEVtc2NyaXB0ZW5TdHJlYW0pOiB2b2lkO1xuICByZWFkKHN0cmVhbTogRW1zY3JpcHRlblN0cmVhbSwgYnVmZmVyOiBVaW50OEFycmF5LCBvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIpOiBudW1iZXI7XG4gIHdyaXRlKHN0cmVhbTogRW1zY3JpcHRlblN0cmVhbSwgYnVmZmVyOiBVaW50OEFycmF5LCBvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIpOiBudW1iZXI7XG4gIGxsc2VlayhzdHJlYW06IEVtc2NyaXB0ZW5TdHJlYW0sIG9mZnNldDogbnVtYmVyLCB3aGVuY2U6IG51bWJlcik6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbXNjcmlwdGVuRlMge1xuICBtb3VudChtb3VudDoge29wdHM6IHtyb290OiBzdHJpbmd9fSk6IEVtc2NyaXB0ZW5GU05vZGU7XG4gIGNyZWF0ZU5vZGUocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuYW1lOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgZGV2PzogYW55KTogRW1zY3JpcHRlbkZTTm9kZTtcbiAgZ2V0TW9kZShwYXRoOiBzdHJpbmcpOiBudW1iZXI7XG4gIHJlYWxQYXRoKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUpOiBzdHJpbmc7XG4gIG5vZGVfb3BzOiBFbXNjcmlwdGVuTm9kZU9wcztcbiAgc3RyZWFtX29wczogRW1zY3JpcHRlblN0cmVhbU9wcztcbn1cblxuY2xhc3MgQkZTRW1zY3JpcHRlblN0cmVhbU9wcyBpbXBsZW1lbnRzIEVtc2NyaXB0ZW5TdHJlYW1PcHMge1xuICBwcml2YXRlIEZTOiBhbnk7XG4gIHByaXZhdGUgUEFUSDogYW55O1xuICBwcml2YXRlIEVSUk5PX0NPREVTOiBhbnk7XG4gIHByaXZhdGUgbm9kZWZzOiBGUztcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZzOiBCRlNFbXNjcmlwdGVuRlMpIHtcbiAgICB0aGlzLm5vZGVmcyA9IGZzLmdldE5vZGVGUygpO1xuICAgIHRoaXMuRlMgPSBmcy5nZXRGUygpO1xuICAgIHRoaXMuUEFUSCA9IGZzLmdldFBBVEgoKTtcbiAgICB0aGlzLkVSUk5PX0NPREVTID0gZnMuZ2V0RVJSTk9fQ09ERVMoKTtcbiAgfVxuXG4gIHB1YmxpYyBvcGVuKHN0cmVhbTogRW1zY3JpcHRlblN0cmVhbSk6IHZvaWQge1xuICAgIHZhciBwYXRoID0gdGhpcy5mcy5yZWFsUGF0aChzdHJlYW0ubm9kZSksXG4gICAgICBGUyA9IHRoaXMuRlM7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChGUy5pc0ZpbGUoc3RyZWFtLm5vZGUubW9kZSkpIHtcbiAgICAgICAgc3RyZWFtLm5mZCA9IHRoaXMubm9kZWZzLm9wZW5TeW5jKHBhdGgsIHRoaXMuZnMuZmxhZ3NUb1Blcm1pc3Npb25TdHJpbmcoc3RyZWFtLmZsYWdzKSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLmNvZGUpIHRocm93IGU7XG4gICAgICB0aHJvdyBuZXcgRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjbG9zZShzdHJlYW06IEVtc2NyaXB0ZW5TdHJlYW0pOiB2b2lkIHtcbiAgICB2YXIgRlMgPSB0aGlzLkZTO1xuICAgIHRyeSB7XG4gICAgICBpZiAoRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpICYmIHN0cmVhbS5uZmQpIHtcbiAgICAgICAgdGhpcy5ub2RlZnMuY2xvc2VTeW5jKHN0cmVhbS5uZmQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghZS5jb2RlKSB0aHJvdyBlO1xuICAgICAgdGhyb3cgbmV3IEZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVhZChzdHJlYW06IEVtc2NyaXB0ZW5TdHJlYW0sIGJ1ZmZlcjogVWludDhBcnJheSwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAvLyBBdm9pZCBjb3B5aW5nIG92ZXJoZWFkIGJ5IHJlYWRpbmcgZGlyZWN0bHkgaW50byBidWZmZXIuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGVmcy5yZWFkU3luYyhzdHJlYW0ubmZkLCB1aW50OEFycmF5MkJ1ZmZlcihidWZmZXIpLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgd3JpdGUoc3RyZWFtOiBFbXNjcmlwdGVuU3RyZWFtLCBidWZmZXI6IFVpbnQ4QXJyYXksIG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgcG9zaXRpb246IG51bWJlcik6IG51bWJlciB7XG4gICAgLy8gQXZvaWQgY29weWluZyBvdmVyaGVhZC5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZWZzLndyaXRlU3luYyhzdHJlYW0ubmZkLCB1aW50OEFycmF5MkJ1ZmZlcihidWZmZXIpLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbGxzZWVrKHN0cmVhbTogRW1zY3JpcHRlblN0cmVhbSwgb2Zmc2V0OiBudW1iZXIsIHdoZW5jZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB2YXIgcG9zaXRpb24gPSBvZmZzZXQ7XG4gICAgaWYgKHdoZW5jZSA9PT0gMSkgeyAgLy8gU0VFS19DVVIuXG4gICAgICBwb3NpdGlvbiArPSBzdHJlYW0ucG9zaXRpb247XG4gICAgfSBlbHNlIGlmICh3aGVuY2UgPT09IDIpIHsgIC8vIFNFRUtfRU5ELlxuICAgICAgaWYgKHRoaXMuRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHN0YXQgPSB0aGlzLm5vZGVmcy5mc3RhdFN5bmMoc3RyZWFtLm5mZCk7XG4gICAgICAgICAgcG9zaXRpb24gKz0gc3RhdC5zaXplO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTLkVJTlZBTCk7XG4gICAgfVxuXG4gICAgc3RyZWFtLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9XG59XG5cbmNsYXNzIEJGU0Vtc2NyaXB0ZW5Ob2RlT3BzIGltcGxlbWVudHMgRW1zY3JpcHRlbk5vZGVPcHMge1xuICBwcml2YXRlIEZTOiBhbnk7XG4gIHByaXZhdGUgUEFUSDogYW55O1xuICBwcml2YXRlIEVSUk5PX0NPREVTOiBhbnk7XG4gIHByaXZhdGUgbm9kZWZzOiBGUztcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZzOiBCRlNFbXNjcmlwdGVuRlMpIHtcbiAgICB0aGlzLm5vZGVmcyA9IGZzLmdldE5vZGVGUygpO1xuICAgIHRoaXMuRlMgPSBmcy5nZXRGUygpO1xuICAgIHRoaXMuUEFUSCA9IGZzLmdldFBBVEgoKTtcbiAgICB0aGlzLkVSUk5PX0NPREVTID0gZnMuZ2V0RVJSTk9fQ09ERVMoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRhdHRyKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUpOiBTdGF0cyB7XG4gICAgdmFyIHBhdGggPSB0aGlzLmZzLnJlYWxQYXRoKG5vZGUpO1xuICAgIHZhciBzdGF0OiBOb2RlU3RhdHM7XG4gICAgdHJ5IHtcbiAgICAgIHN0YXQgPSB0aGlzLm5vZGVmcy5sc3RhdFN5bmMocGF0aCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLmNvZGUpIHRocm93IGU7XG4gICAgICB0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBkZXY6IHN0YXQuZGV2LFxuICAgICAgaW5vOiBzdGF0LmlubyxcbiAgICAgIG1vZGU6IHN0YXQubW9kZSxcbiAgICAgIG5saW5rOiBzdGF0Lm5saW5rLFxuICAgICAgdWlkOiBzdGF0LnVpZCxcbiAgICAgIGdpZDogc3RhdC5naWQsXG4gICAgICByZGV2OiBzdGF0LnJkZXYsXG4gICAgICBzaXplOiBzdGF0LnNpemUsXG4gICAgICBhdGltZTogc3RhdC5hdGltZSxcbiAgICAgIG10aW1lOiBzdGF0Lm10aW1lLFxuICAgICAgY3RpbWU6IHN0YXQuY3RpbWUsXG4gICAgICBibGtzaXplOiBzdGF0LmJsa3NpemUsXG4gICAgICBibG9ja3M6IHN0YXQuYmxvY2tzXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRhdHRyKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUsIGF0dHI6IFN0YXRzKTogdm9pZCB7XG4gICAgdmFyIHBhdGggPSB0aGlzLmZzLnJlYWxQYXRoKG5vZGUpO1xuICAgIHRyeSB7XG4gICAgICBpZiAoYXR0ci5tb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5ub2RlZnMuY2htb2RTeW5jKHBhdGgsIGF0dHIubW9kZSk7XG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgY29tbW9uIG5vZGUgc3RydWN0dXJlIG1vZGUgYXMgd2VsbFxuICAgICAgICBub2RlLm1vZGUgPSBhdHRyLm1vZGU7XG4gICAgICB9XG4gICAgICBpZiAoYXR0ci50aW1lc3RhbXAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGF0dHIudGltZXN0YW1wKTtcbiAgICAgICAgdGhpcy5ub2RlZnMudXRpbWVzU3luYyhwYXRoLCBkYXRlLCBkYXRlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIWUuY29kZSkgdGhyb3cgZTtcbiAgICAgIC8vIElnbm9yZSBub3Qgc3VwcG9ydGVkIGVycm9ycy4gRW1zY3JpcHRlbiBkb2VzIHV0aW1lc1N5bmMgd2hlbiBpdFxuICAgICAgLy8gd3JpdGVzIGZpbGVzLCBidXQgbmV2ZXIgcmVhbGx5IHJlcXVpcmVzIHRoZSB2YWx1ZSB0byBiZSBzZXQuXG4gICAgICBpZiAoZS5jb2RlICE9PSBcIkVOT1RTVVBcIikge1xuICAgICAgICB0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChhdHRyLnNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5ub2RlZnMudHJ1bmNhdGVTeW5jKHBhdGgsIGF0dHIuc2l6ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmICghZS5jb2RlKSB0aHJvdyBlO1xuICAgICAgICB0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGxvb2t1cChwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5hbWU6IHN0cmluZyk6IEVtc2NyaXB0ZW5GU05vZGUge1xuICAgIHZhciBwYXRoID0gdGhpcy5QQVRILmpvaW4yKHRoaXMuZnMucmVhbFBhdGgocGFyZW50KSwgbmFtZSk7XG4gICAgdmFyIG1vZGUgPSB0aGlzLmZzLmdldE1vZGUocGF0aCk7XG4gICAgcmV0dXJuIHRoaXMuZnMuY3JlYXRlTm9kZShwYXJlbnQsIG5hbWUsIG1vZGUpO1xuICB9XG5cbiAgcHVibGljIG1rbm9kKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGRldjogYW55KTogRW1zY3JpcHRlbkZTTm9kZSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLmZzLmNyZWF0ZU5vZGUocGFyZW50LCBuYW1lLCBtb2RlLCBkZXYpO1xuICAgIC8vIGNyZWF0ZSB0aGUgYmFja2luZyBub2RlIGZvciB0aGlzIGluIHRoZSBmcyByb290IGFzIHdlbGxcbiAgICB2YXIgcGF0aCA9IHRoaXMuZnMucmVhbFBhdGgobm9kZSk7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLkZTLmlzRGlyKG5vZGUubW9kZSkpIHtcbiAgICAgICAgdGhpcy5ub2RlZnMubWtkaXJTeW5jKHBhdGgsIG5vZGUubW9kZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm5vZGVmcy53cml0ZUZpbGVTeW5jKHBhdGgsICcnLCB7IG1vZGU6IG5vZGUubW9kZSB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIWUuY29kZSkgdGhyb3cgZTtcbiAgICAgIHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICBwdWJsaWMgcmVuYW1lKG9sZE5vZGU6IEVtc2NyaXB0ZW5GU05vZGUsIG5ld0RpcjogRW1zY3JpcHRlbkZTTm9kZSwgbmV3TmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdmFyIG9sZFBhdGggPSB0aGlzLmZzLnJlYWxQYXRoKG9sZE5vZGUpO1xuICAgIHZhciBuZXdQYXRoID0gdGhpcy5QQVRILmpvaW4yKHRoaXMuZnMucmVhbFBhdGgobmV3RGlyKSwgbmV3TmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubm9kZWZzLnJlbmFtZVN5bmMob2xkUGF0aCwgbmV3UGF0aCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLmNvZGUpIHRocm93IGU7XG4gICAgICB0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVubGluayhwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIHZhciBwYXRoID0gdGhpcy5QQVRILmpvaW4yKHRoaXMuZnMucmVhbFBhdGgocGFyZW50KSwgbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubm9kZWZzLnVubGlua1N5bmMocGF0aCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLmNvZGUpIHRocm93IGU7XG4gICAgICB0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJtZGlyKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nKSB7XG4gICAgdmFyIHBhdGggPSB0aGlzLlBBVEguam9pbjIodGhpcy5mcy5yZWFsUGF0aChwYXJlbnQpLCBuYW1lKTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5ub2RlZnMucm1kaXJTeW5jKHBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghZS5jb2RlKSB0aHJvdyBlO1xuICAgICAgdGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWFkZGlyKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUpOiBzdHJpbmdbXSB7XG4gICAgdmFyIHBhdGggPSB0aGlzLmZzLnJlYWxQYXRoKG5vZGUpO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2RlZnMucmVhZGRpclN5bmMocGF0aCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLmNvZGUpIHRocm93IGU7XG4gICAgICB0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN5bWxpbmsocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuZXdOYW1lOiBzdHJpbmcsIG9sZFBhdGg6IHN0cmluZyk6IHZvaWQge1xuICAgIHZhciBuZXdQYXRoID0gdGhpcy5QQVRILmpvaW4yKHRoaXMuZnMucmVhbFBhdGgocGFyZW50KSwgbmV3TmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubm9kZWZzLnN5bWxpbmtTeW5jKG9sZFBhdGgsIG5ld1BhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghZS5jb2RlKSB0aHJvdyBlO1xuICAgICAgdGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWFkbGluayhub2RlOiBFbXNjcmlwdGVuRlNOb2RlKTogc3RyaW5nIHtcbiAgICB2YXIgcGF0aCA9IHRoaXMuZnMucmVhbFBhdGgobm9kZSk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGVmcy5yZWFkbGlua1N5bmMocGF0aCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLmNvZGUpIHRocm93IGU7XG4gICAgICB0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJGU0Vtc2NyaXB0ZW5GUyBpbXBsZW1lbnRzIEVtc2NyaXB0ZW5GUyB7XG4gIHByaXZhdGUgRlM6IGFueTtcbiAgcHJpdmF0ZSBQQVRIOiBhbnk7XG4gIHByaXZhdGUgRVJSTk9fQ09ERVM6IGFueTtcbiAgcHJpdmF0ZSBub2RlZnM6IEZTO1xuICBjb25zdHJ1Y3RvcihfRlMgPSAoPGFueT4gc2VsZilbJ0ZTJ10sIF9QQVRIID0gKDxhbnk+IHNlbGYpWydQQVRIJ10sIF9FUlJOT19DT0RFUyA9ICg8YW55PiBzZWxmKVsnRVJSTk9fQ09ERVMnXSwgbm9kZWZzOiBGUyA9IGZzKSB7XG4gICAgaWYgKHR5cGVvZiBCcm93c2VyRlMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCcm93c2VyRlMgaXMgbm90IGxvYWRlZC4gUGxlYXNlIGxvYWQgaXQgYmVmb3JlIHRoaXMgbGlicmFyeS5cIik7XG4gICAgfVxuICAgIHRoaXMubm9kZWZzID0gbm9kZWZzO1xuICAgIHRoaXMuRlMgPSBfRlM7XG4gICAgdGhpcy5QQVRIID0gX1BBVEg7XG4gICAgdGhpcy5FUlJOT19DT0RFUyA9IF9FUlJOT19DT0RFUztcbiAgICB0aGlzLm5vZGVfb3BzID0gbmV3IEJGU0Vtc2NyaXB0ZW5Ob2RlT3BzKHRoaXMpO1xuICAgIHRoaXMuc3RyZWFtX29wcyA9IG5ldyBCRlNFbXNjcmlwdGVuU3RyZWFtT3BzKHRoaXMpO1xuICB9XG5cbiAgcHVibGljIG1vdW50KG1vdW50OiB7b3B0czoge3Jvb3Q6IHN0cmluZ319KTogRW1zY3JpcHRlbkZTTm9kZSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlTm9kZShudWxsLCAnLycsIHRoaXMuZ2V0TW9kZShtb3VudC5vcHRzLnJvb3QpLCAwKTtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVOb2RlKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGRldj86IGFueSk6IEVtc2NyaXB0ZW5GU05vZGUge1xuICAgIHZhciBGUyA9IHRoaXMuRlM7XG4gICAgaWYgKCFGUy5pc0Rpcihtb2RlKSAmJiAhRlMuaXNGaWxlKG1vZGUpICYmICFGUy5pc0xpbmsobW9kZSkpIHtcbiAgICAgIHRocm93IG5ldyBGUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVMuRUlOVkFMKTtcbiAgICB9XG4gICAgdmFyIG5vZGUgPSBGUy5jcmVhdGVOb2RlKHBhcmVudCwgbmFtZSwgbW9kZSk7XG4gICAgbm9kZS5ub2RlX29wcyA9IHRoaXMubm9kZV9vcHM7XG4gICAgbm9kZS5zdHJlYW1fb3BzID0gdGhpcy5zdHJlYW1fb3BzO1xuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgcHVibGljIGdldE1vZGUocGF0aDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICB2YXIgc3RhdDogTm9kZVN0YXRzO1xuICAgIHRyeSB7XG4gICAgICBzdGF0ID0gdGhpcy5ub2RlZnMubHN0YXRTeW5jKHBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghZS5jb2RlKSB0aHJvdyBlO1xuICAgICAgdGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdC5tb2RlO1xuICB9XG5cbiAgcHVibGljIHJlYWxQYXRoKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUpOiBzdHJpbmcge1xuICAgIHZhciBwYXJ0czogc3RyaW5nW10gPSBbXTtcbiAgICB3aGlsZSAobm9kZS5wYXJlbnQgIT09IG5vZGUpIHtcbiAgICAgIHBhcnRzLnB1c2gobm9kZS5uYW1lKTtcbiAgICAgIG5vZGUgPSBub2RlLnBhcmVudDtcbiAgICB9XG4gICAgcGFydHMucHVzaChub2RlLm1vdW50Lm9wdHMucm9vdCk7XG4gICAgcGFydHMucmV2ZXJzZSgpO1xuICAgIHJldHVybiB0aGlzLlBBVEguam9pbi5hcHBseShudWxsLCBwYXJ0cyk7XG4gIH1cbiAgLy8gVGhpcyBtYXBzIHRoZSBpbnRlZ2VyIHBlcm1pc3Npb24gbW9kZXMgZnJvbSBodHRwOi8vbGludXguZGllLm5ldC9tYW4vMy9vcGVuXG4gIC8vIHRvIG5vZGUuanMtc3BlY2lmaWMgZmlsZSBvcGVuIHBlcm1pc3Npb24gc3RyaW5ncyBhdCBodHRwOi8vbm9kZWpzLm9yZy9hcGkvZnMuaHRtbCNmc19mc19vcGVuX3BhdGhfZmxhZ3NfbW9kZV9jYWxsYmFja1xuICBwdWJsaWMgZmxhZ3NUb1Blcm1pc3Npb25TdHJpbmdNYXAgPSB7XG4gICAgMC8qT19SRE9OTFkqLzogJ3InLFxuICAgIDEvKk9fV1JPTkxZKi86ICdyKycsXG4gICAgMi8qT19SRFdSKi86ICdyKycsXG4gICAgNjQvKk9fQ1JFQVQqLzogJ3InLFxuICAgIDY1LypPX1dST05MWXxPX0NSRUFUKi86ICdyKycsXG4gICAgNjYvKk9fUkRXUnxPX0NSRUFUKi86ICdyKycsXG4gICAgMTI5LypPX1dST05MWXxPX0VYQ0wqLzogJ3J4KycsXG4gICAgMTkzLypPX1dST05MWXxPX0NSRUFUfE9fRVhDTCovOiAncngrJyxcbiAgICA1MTQvKk9fUkRXUnxPX1RSVU5DKi86ICd3KycsXG4gICAgNTc3LypPX1dST05MWXxPX0NSRUFUfE9fVFJVTkMqLzogJ3cnLFxuICAgIDU3OC8qT19DUkVBVHxPX1JEV1J8T19UUlVOQyovOiAndysnLFxuICAgIDcwNS8qT19XUk9OTFl8T19DUkVBVHxPX0VYQ0x8T19UUlVOQyovOiAnd3gnLFxuICAgIDcwNi8qT19SRFdSfE9fQ1JFQVR8T19FWENMfE9fVFJVTkMqLzogJ3d4KycsXG4gICAgMTAyNC8qT19BUFBFTkQqLzogJ2EnLFxuICAgIDEwMjUvKk9fV1JPTkxZfE9fQVBQRU5EKi86ICdhJyxcbiAgICAxMDI2LypPX1JEV1J8T19BUFBFTkQqLzogJ2ErJyxcbiAgICAxMDg5LypPX1dST05MWXxPX0NSRUFUfE9fQVBQRU5EKi86ICdhJyxcbiAgICAxMDkwLypPX1JEV1J8T19DUkVBVHxPX0FQUEVORCovOiAnYSsnLFxuICAgIDExNTMvKk9fV1JPTkxZfE9fRVhDTHxPX0FQUEVORCovOiAnYXgnLFxuICAgIDExNTQvKk9fUkRXUnxPX0VYQ0x8T19BUFBFTkQqLzogJ2F4KycsXG4gICAgMTIxNy8qT19XUk9OTFl8T19DUkVBVHxPX0VYQ0x8T19BUFBFTkQqLzogJ2F4JyxcbiAgICAxMjE4LypPX1JEV1J8T19DUkVBVHxPX0VYQ0x8T19BUFBFTkQqLzogJ2F4KycsXG4gICAgNDA5Ni8qT19SRE9OTFl8T19EU1lOQyovOiAncnMnLFxuICAgIDQwOTgvKk9fUkRXUnxPX0RTWU5DKi86ICdycysnXG4gIH1cblxuICBwdWJsaWMgZmxhZ3NUb1Blcm1pc3Npb25TdHJpbmcoZmxhZ3M6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgdmFyIHBhcnNlZEZsYWdzID0gKHR5cGVvZiBmbGFncyA9PT0gXCJzdHJpbmdcIikgPyBwYXJzZUludChmbGFncywgMTApIDogPG51bWJlcj48YW55PiBmbGFncztcbiAgICBwYXJzZWRGbGFncyAmPSAweDFGRkY7XG4gICAgaWYgKHBhcnNlZEZsYWdzIGluIHRoaXMuZmxhZ3NUb1Blcm1pc3Npb25TdHJpbmdNYXApIHtcbiAgICAgIHJldHVybiAoPGFueT4gdGhpcy5mbGFnc1RvUGVybWlzc2lvblN0cmluZ01hcClbcGFyc2VkRmxhZ3NdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmxhZ3M7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldE5vZGVGUygpIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlZnM7XG4gIH1cblxuICBwdWJsaWMgZ2V0RlMoKSB7XG4gICAgcmV0dXJuIHRoaXMuRlM7XG4gIH1cblxuICBwdWJsaWMgZ2V0UEFUSCgpIHtcbiAgICByZXR1cm4gdGhpcy5QQVRIO1xuICB9XG5cbiAgcHVibGljIGdldEVSUk5PX0NPREVTKCkge1xuICAgIHJldHVybiB0aGlzLkVSUk5PX0NPREVTO1xuICB9XG5cbiAgcHVibGljIG5vZGVfb3BzOiBFbXNjcmlwdGVuTm9kZU9wcztcbiAgcHVibGljIHN0cmVhbV9vcHM6IEVtc2NyaXB0ZW5TdHJlYW1PcHM7XG59XG4iXX0=