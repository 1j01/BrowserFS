(function (ErrorCode) {
    ErrorCode[ErrorCode["EPERM"] = 0] = "EPERM";
    ErrorCode[ErrorCode["ENOENT"] = 1] = "ENOENT";
    ErrorCode[ErrorCode["EIO"] = 2] = "EIO";
    ErrorCode[ErrorCode["EBADF"] = 3] = "EBADF";
    ErrorCode[ErrorCode["EACCES"] = 4] = "EACCES";
    ErrorCode[ErrorCode["EBUSY"] = 5] = "EBUSY";
    ErrorCode[ErrorCode["EEXIST"] = 6] = "EEXIST";
    ErrorCode[ErrorCode["ENOTDIR"] = 7] = "ENOTDIR";
    ErrorCode[ErrorCode["EISDIR"] = 8] = "EISDIR";
    ErrorCode[ErrorCode["EINVAL"] = 9] = "EINVAL";
    ErrorCode[ErrorCode["EFBIG"] = 10] = "EFBIG";
    ErrorCode[ErrorCode["ENOSPC"] = 11] = "ENOSPC";
    ErrorCode[ErrorCode["EROFS"] = 12] = "EROFS";
    ErrorCode[ErrorCode["ENOTEMPTY"] = 13] = "ENOTEMPTY";
    ErrorCode[ErrorCode["ENOTSUP"] = 14] = "ENOTSUP";
})(exports.ErrorCode || (exports.ErrorCode = {}));
var ErrorCode = exports.ErrorCode;
var ErrorStrings = {};
ErrorStrings[ErrorCode.EPERM] = 'Operation not permitted.';
ErrorStrings[ErrorCode.ENOENT] = 'No such file or directory.';
ErrorStrings[ErrorCode.EIO] = 'Input/output error.';
ErrorStrings[ErrorCode.EBADF] = 'Bad file descriptor.';
ErrorStrings[ErrorCode.EACCES] = 'Permission denied.';
ErrorStrings[ErrorCode.EBUSY] = 'Resource busy or locked.';
ErrorStrings[ErrorCode.EEXIST] = 'File exists.';
ErrorStrings[ErrorCode.ENOTDIR] = 'File is not a directory.';
ErrorStrings[ErrorCode.EISDIR] = 'File is a directory.';
ErrorStrings[ErrorCode.EINVAL] = 'Invalid argument.';
ErrorStrings[ErrorCode.EFBIG] = 'File is too big.';
ErrorStrings[ErrorCode.ENOSPC] = 'No space left on disk.';
ErrorStrings[ErrorCode.EROFS] = 'Cannot modify a read-only file system.';
ErrorStrings[ErrorCode.ENOTEMPTY] = 'Directory is not empty.';
ErrorStrings[ErrorCode.ENOTSUP] = 'Operation is not supported.';
var ApiError = (function () {
    function ApiError(type, message) {
        this.type = type;
        this.code = ErrorCode[type];
        if (message != null) {
            this.message = message;
        }
        else {
            this.message = ErrorStrings[type];
        }
    }
    ApiError.prototype.toString = function () {
        return this.code + ": " + ErrorStrings[this.type] + " " + this.message;
    };
    ApiError.prototype.writeToBuffer = function (buffer, i) {
        if (buffer === void 0) { buffer = new Buffer(this.bufferSize()); }
        if (i === void 0) { i = 0; }
        buffer.writeUInt8(this.type, i);
        var bytesWritten = buffer.write(this.message, i + 5);
        buffer.writeUInt32LE(bytesWritten, i + 1);
        return buffer;
    };
    ApiError.fromBuffer = function (buffer, i) {
        if (i === void 0) { i = 0; }
        return new ApiError(buffer.readUInt8(i), buffer.toString("utf8", i + 5, i + 5 + buffer.readUInt32LE(i + 1)));
    };
    ApiError.prototype.bufferSize = function () {
        return 5 + Buffer.byteLength(this.message);
    };
    ApiError.FileError = function (code, p) {
        return new ApiError(code, p + ": " + ErrorStrings[code]);
    };
    ApiError.ENOENT = function (path) {
        return this.FileError(ErrorCode.ENOENT, path);
    };
    ApiError.EEXIST = function (path) {
        return this.FileError(ErrorCode.EEXIST, path);
    };
    ApiError.EISDIR = function (path) {
        return this.FileError(ErrorCode.EISDIR, path);
    };
    ApiError.ENOTDIR = function (path) {
        return this.FileError(ErrorCode.ENOTDIR, path);
    };
    ApiError.EPERM = function (path) {
        return this.FileError(ErrorCode.EPERM, path);
    };
    ApiError.ENOTEMPTY = function (path) {
        return this.FileError(ErrorCode.ENOTEMPTY, path);
    };
    return ApiError;
})();
exports.ApiError = ApiError;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpX2Vycm9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvcmUvYXBpX2Vycm9yLnRzIl0sIm5hbWVzIjpbIkVycm9yQ29kZSIsIkFwaUVycm9yIiwiQXBpRXJyb3IuY29uc3RydWN0b3IiLCJBcGlFcnJvci50b1N0cmluZyIsIkFwaUVycm9yLndyaXRlVG9CdWZmZXIiLCJBcGlFcnJvci5mcm9tQnVmZmVyIiwiQXBpRXJyb3IuYnVmZmVyU2l6ZSIsIkFwaUVycm9yLkZpbGVFcnJvciIsIkFwaUVycm9yLkVOT0VOVCIsIkFwaUVycm9yLkVFWElTVCIsIkFwaUVycm9yLkVJU0RJUiIsIkFwaUVycm9yLkVOT1RESVIiLCJBcGlFcnJvci5FUEVSTSIsIkFwaUVycm9yLkVOT1RFTVBUWSJdLCJtYXBwaW5ncyI6IkFBS0EsV0FBWSxTQUFTO0lBQ25CQSwyQ0FBS0EsQ0FBQUE7SUFBRUEsNkNBQU1BLENBQUFBO0lBQUVBLHVDQUFHQSxDQUFBQTtJQUFFQSwyQ0FBS0EsQ0FBQUE7SUFBRUEsNkNBQU1BLENBQUFBO0lBQUVBLDJDQUFLQSxDQUFBQTtJQUFFQSw2Q0FBTUEsQ0FBQUE7SUFBRUEsK0NBQU9BLENBQUFBO0lBQUVBLDZDQUFNQSxDQUFBQTtJQUFFQSw2Q0FBTUEsQ0FBQUE7SUFDekVBLDRDQUFLQSxDQUFBQTtJQUFFQSw4Q0FBTUEsQ0FBQUE7SUFBRUEsNENBQUtBLENBQUFBO0lBQUVBLG9EQUFTQSxDQUFBQTtJQUFFQSxnREFBT0EsQ0FBQUE7QUFDMUNBLENBQUNBLEVBSFcsaUJBQVMsS0FBVCxpQkFBUyxRQUdwQjtBQUhELElBQVksU0FBUyxHQUFULGlCQUdYLENBQUE7QUFJRCxJQUFJLFlBQVksR0FBNkIsRUFBRSxDQUFDO0FBQ2hELFlBQVksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsMEJBQTBCLENBQUM7QUFDM0QsWUFBWSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyw0QkFBNEIsQ0FBQztBQUM5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QUFTQSxDQUFDQSxTQUFTQSxDQUFDQSxPQUFPQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtJQUNqREEsQ0FBQ0E7SUFFYVYsY0FBS0EsR0FBbkJBLFVBQW9CQSxJQUFZQTtRQUM5QlcsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsS0FBS0EsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7SUFDL0NBLENBQUNBO0lBRWFYLGtCQUFTQSxHQUF2QkEsVUFBd0JBLElBQVlBO1FBQ2xDWSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxTQUFTQSxDQUFDQSxTQUFTQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtJQUNuREEsQ0FBQ0E7SUFDSFosZUFBQ0E7QUFBREEsQ0FBQ0EsQUFuRkQsSUFtRkM7QUFuRlksZ0JBQVEsV0FtRnBCLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFN0YW5kYXJkIGxpYmMgZXJyb3IgY29kZXMuIEFkZCBtb3JlIHRvIHRoaXMgZW51bSBhbmQgRXJyb3JTdHJpbmdzIGFzIHRoZXkgYXJlXG4gKiBuZWVkZWQuXG4gKiBAdXJsIGh0dHA6Ly93d3cuZ251Lm9yZy9zb2Z0d2FyZS9saWJjL21hbnVhbC9odG1sX25vZGUvRXJyb3ItQ29kZXMuaHRtbFxuICovXG5leHBvcnQgZW51bSBFcnJvckNvZGUge1xuICBFUEVSTSwgRU5PRU5ULCBFSU8sIEVCQURGLCBFQUNDRVMsIEVCVVNZLCBFRVhJU1QsIEVOT1RESVIsIEVJU0RJUiwgRUlOVkFMLFxuICBFRkJJRywgRU5PU1BDLCBFUk9GUywgRU5PVEVNUFRZLCBFTk9UU1VQXG59XG4vKipcbiAqIFN0cmluZ3MgYXNzb2NpYXRlZCB3aXRoIGVhY2ggZXJyb3IgY29kZS5cbiAqL1xudmFyIEVycm9yU3RyaW5nczoge1tjb2RlOiBzdHJpbmddOiBzdHJpbmd9ID0ge307XG5FcnJvclN0cmluZ3NbRXJyb3JDb2RlLkVQRVJNXSA9ICdPcGVyYXRpb24gbm90IHBlcm1pdHRlZC4nO1xuRXJyb3JTdHJpbmdzW0Vycm9yQ29kZS5FTk9FTlRdID0gJ05vIHN1Y2ggZmlsZSBvciBkaXJlY3RvcnkuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRUlPXSA9ICdJbnB1dC9vdXRwdXQgZXJyb3IuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRUJBREZdID0gJ0JhZCBmaWxlIGRlc2NyaXB0b3IuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRUFDQ0VTXSA9ICdQZXJtaXNzaW9uIGRlbmllZC4nO1xuRXJyb3JTdHJpbmdzW0Vycm9yQ29kZS5FQlVTWV0gPSAnUmVzb3VyY2UgYnVzeSBvciBsb2NrZWQuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRUVYSVNUXSA9ICdGaWxlIGV4aXN0cy4nO1xuRXJyb3JTdHJpbmdzW0Vycm9yQ29kZS5FTk9URElSXSA9ICdGaWxlIGlzIG5vdCBhIGRpcmVjdG9yeS4nO1xuRXJyb3JTdHJpbmdzW0Vycm9yQ29kZS5FSVNESVJdID0gJ0ZpbGUgaXMgYSBkaXJlY3RvcnkuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRUlOVkFMXSA9ICdJbnZhbGlkIGFyZ3VtZW50Lic7XG5FcnJvclN0cmluZ3NbRXJyb3JDb2RlLkVGQklHXSA9ICdGaWxlIGlzIHRvbyBiaWcuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRU5PU1BDXSA9ICdObyBzcGFjZSBsZWZ0IG9uIGRpc2suJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRVJPRlNdID0gJ0Nhbm5vdCBtb2RpZnkgYSByZWFkLW9ubHkgZmlsZSBzeXN0ZW0uJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRU5PVEVNUFRZXSA9ICdEaXJlY3RvcnkgaXMgbm90IGVtcHR5Lic7XG5FcnJvclN0cmluZ3NbRXJyb3JDb2RlLkVOT1RTVVBdID0gJ09wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkLic7XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIEJyb3dzZXJGUyBlcnJvci4gUGFzc2VkIGJhY2sgdG8gYXBwbGljYXRpb25zIGFmdGVyIGEgZmFpbGVkXG4gKiBjYWxsIHRvIHRoZSBCcm93c2VyRlMgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgQXBpRXJyb3Ige1xuICBwdWJsaWMgdHlwZTogRXJyb3JDb2RlO1xuICBwdWJsaWMgbWVzc2FnZTogc3RyaW5nO1xuICBwdWJsaWMgY29kZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIGEgQnJvd3NlckZTIGVycm9yLiBQYXNzZWQgYmFjayB0byBhcHBsaWNhdGlvbnMgYWZ0ZXIgYSBmYWlsZWRcbiAgICogY2FsbCB0byB0aGUgQnJvd3NlckZTIEFQSS5cbiAgICpcbiAgICogRXJyb3IgY29kZXMgbWlycm9yIHRob3NlIHJldHVybmVkIGJ5IHJlZ3VsYXIgVW5peCBmaWxlIG9wZXJhdGlvbnMsIHdoaWNoIGlzXG4gICAqIHdoYXQgTm9kZSByZXR1cm5zLlxuICAgKiBAY29uc3RydWN0b3IgQXBpRXJyb3JcbiAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIGVycm9yLlxuICAgKiBAcGFyYW0gW21lc3NhZ2VdIEEgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGU6IEVycm9yQ29kZSwgbWVzc2FnZT86c3RyaW5nKSB7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmNvZGUgPSBFcnJvckNvZGVbdHlwZV07XG4gICAgaWYgKG1lc3NhZ2UgIT0gbnVsbCkge1xuICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tZXNzYWdlID0gRXJyb3JTdHJpbmdzW3R5cGVdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIEEgZnJpZW5kbHkgZXJyb3IgbWVzc2FnZS5cbiAgICovXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvZGUgKyAgXCI6IFwiICsgRXJyb3JTdHJpbmdzW3RoaXMudHlwZV0gKyBcIiBcIiArIHRoaXMubWVzc2FnZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcml0ZXMgdGhlIEFQSSBlcnJvciBpbnRvIGEgYnVmZmVyLlxuICAgKi9cbiAgcHVibGljIHdyaXRlVG9CdWZmZXIoYnVmZmVyOiBCdWZmZXIgPSBuZXcgQnVmZmVyKHRoaXMuYnVmZmVyU2l6ZSgpKSwgaTogbnVtYmVyID0gMCk6IEJ1ZmZlciB7XG4gICAgYnVmZmVyLndyaXRlVUludDgodGhpcy50eXBlLCBpKTtcbiAgICB2YXIgYnl0ZXNXcml0dGVuID0gYnVmZmVyLndyaXRlKHRoaXMubWVzc2FnZSwgaSArIDUpO1xuICAgIGJ1ZmZlci53cml0ZVVJbnQzMkxFKGJ5dGVzV3JpdHRlbiwgaSArIDEpO1xuICAgIHJldHVybiBidWZmZXI7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBBcGlFcnJvciBvYmplY3QgZnJvbSBhIGJ1ZmZlci5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZnJvbUJ1ZmZlcihidWZmZXI6IEJ1ZmZlciwgaTogbnVtYmVyID0gMCk6IEFwaUVycm9yIHtcbiAgICByZXR1cm4gbmV3IEFwaUVycm9yKGJ1ZmZlci5yZWFkVUludDgoaSksIGJ1ZmZlci50b1N0cmluZyhcInV0ZjhcIiwgaSArIDUsIGkgKyA1ICsgYnVmZmVyLnJlYWRVSW50MzJMRShpICsgMSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc2l6ZSBvZiB0aGUgQVBJIGVycm9yIGluIGJ1ZmZlci1mb3JtIGluIGJ5dGVzLlxuICAgKi9cbiAgcHVibGljIGJ1ZmZlclNpemUoKTogbnVtYmVyIHtcbiAgICAvLyA0IGJ5dGVzIGZvciBzdHJpbmcgbGVuZ3RoLCAxIGZvciB0eXBlLlxuICAgIHJldHVybiA1ICsgQnVmZmVyLmJ5dGVMZW5ndGgodGhpcy5tZXNzYWdlKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgRmlsZUVycm9yKGNvZGU6IEVycm9yQ29kZSwgcDogc3RyaW5nKTogQXBpRXJyb3Ige1xuICAgIHJldHVybiBuZXcgQXBpRXJyb3IoY29kZSwgcCArIFwiOiBcIiArIEVycm9yU3RyaW5nc1tjb2RlXSk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBFTk9FTlQocGF0aDogc3RyaW5nKTogQXBpRXJyb3Ige1xuICAgIHJldHVybiB0aGlzLkZpbGVFcnJvcihFcnJvckNvZGUuRU5PRU5ULCBwYXRoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgRUVYSVNUKHBhdGg6IHN0cmluZyk6IEFwaUVycm9yIHtcbiAgICByZXR1cm4gdGhpcy5GaWxlRXJyb3IoRXJyb3JDb2RlLkVFWElTVCwgcGF0aCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEVJU0RJUihwYXRoOiBzdHJpbmcpOiBBcGlFcnJvciB7XG4gICAgcmV0dXJuIHRoaXMuRmlsZUVycm9yKEVycm9yQ29kZS5FSVNESVIsIHBhdGgpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBFTk9URElSKHBhdGg6IHN0cmluZyk6IEFwaUVycm9yIHtcbiAgICByZXR1cm4gdGhpcy5GaWxlRXJyb3IoRXJyb3JDb2RlLkVOT1RESVIsIHBhdGgpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBFUEVSTShwYXRoOiBzdHJpbmcpOiBBcGlFcnJvciB7XG4gICAgcmV0dXJuIHRoaXMuRmlsZUVycm9yKEVycm9yQ29kZS5FUEVSTSwgcGF0aCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEVOT1RFTVBUWShwYXRoOiBzdHJpbmcpOiBBcGlFcnJvciB7XG4gICAgcmV0dXJuIHRoaXMuRmlsZUVycm9yKEVycm9yQ29kZS5FTk9URU1QVFksIHBhdGgpO1xuICB9XG59XG4iXX0=