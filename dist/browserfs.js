!function(){if(Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,u,a=[];for(i in o)t.call(o,i)&&a.push(i);if(e)for(u=0;r>u;u++)t.call(o,n[u])&&a.push(n[u]);return a}}()),"b"!=="ab".substr(-1)&&(String.prototype.substr=function(t){return function(e,n){return 0>e&&(e=this.length+e),t.call(this,e,n)}}(String.prototype.substr)),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=0;n<this.length;++n)n in this&&t.call(e,this[n],n,this)}),"undefined"==typeof setImmediate){var t=[],e="zero-timeout-message",n=function(){if(!window.postMessage)return!1;var t=!0,e=window.onmessage;return window.onmessage=function(){t=!1},window.postMessage("","*"),window.onmessage=e,t};if(n()){window.setImmediate=function(n){t.push(n),window.postMessage(e,"*")};var r=function(n){if(n.source===self&&n.data===e&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,t.length>0)){var r=t.shift();return r()}};window.addEventListener?window.addEventListener("message",r,!0):window.attachEvent("onmessage",r)}else window.setImmediate=function(t){return setTimeout(t,0)}}Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if("undefined"==typeof e&&(e=0),!this)throw new TypeError;var n=this.length;if(0===n||r>=n)return-1;var r=e;0>r&&(r=n+r);for(var o=r;n>o;o++)if(this[o]===t)return o;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;for(n=0,r=this.length;r>n;++n)n in this&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,r,o;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),u=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(e&&(n=e),r=new Array(u),o=0;u>o;){var a,f;o in i&&(a=i[o],f=t.call(n,a,o,i),r[o]=f),o++}return r}),document.write("<!-- IEBinaryToArray_ByteStr -->\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n Dim lastIndex\r\n lastIndex = LenB(Binary)\r\n if lastIndex mod 2 Then\r\n IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n Else\r\n IEBinaryToArray_ByteStr_Last = \"\"\r\n End If\r\nEnd Function\r\n</script>\r\n");var o,i,u;!function(t){function e(t,e){return m.call(t,e)}function n(t,e){var n,r,o,i,u,a,f,s,c,p,l=e&&e.split("/"),h=v.map,y=h&&h["*"]||{};if(t&&"."===t.charAt(0))if(e){for(l=l.slice(0,l.length-1),t=l.concat(t.split("/")),s=0;s<t.length;s+=1)if(p=t[s],"."===p)t.splice(s,1),s-=1;else if(".."===p){if(1===s&&(".."===t[2]||".."===t[0]))break;s>0&&(t.splice(s-1,2),s-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((l||y)&&h){for(n=t.split("/"),s=n.length;s>0;s-=1){if(r=n.slice(0,s).join("/"),l)for(c=l.length;c>0;c-=1)if(o=h[l.slice(0,c).join("/")],o&&(o=o[r])){i=o,u=s;break}if(i)break;!a&&y&&y[r]&&(a=y[r],f=s)}!i&&a&&(i=a,u=f),i&&(n.splice(0,u,i),t=n.join("/"))}return t}function r(e,n){return function(){return h.apply(t,S.call(arguments,0).concat([e,n]))}}function a(t){return function(e){return n(e,t)}}function f(t){return function(e){w[t]=e}}function s(n){if(e(g,n)){var r=g[n];delete g[n],E[n]=!0,l.apply(t,r)}if(!e(w,n)&&!e(E,n))throw new Error("No "+n);return w[n]}function c(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function p(t){return function(){return v&&v.config&&v.config[t]||{}}}var l,h,y,d,w={},g={},v={},E={},m=Object.prototype.hasOwnProperty,S=[].slice;y=function(t,e){var r,o=c(t),i=o[0];return t=o[1],i&&(i=n(i,e),r=s(i)),i?t=r&&r.normalize?r.normalize(t,a(e)):n(t,e):(t=n(t,e),o=c(t),i=o[0],t=o[1],i&&(r=s(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:r}},d={require:function(t){return r(t)},exports:function(t){var e=w[t];return"undefined"!=typeof e?e:w[t]={}},module:function(t){return{id:t,uri:"",exports:w[t],config:p(t)}}},l=function(n,o,i,u){var a,c,p,l,h,v,m=[],S=typeof i;if(u=u||n,"undefined"===S||"function"===S){for(o=!o.length&&i.length?["require","exports","module"]:o,h=0;h<o.length;h+=1)if(l=y(o[h],u),c=l.f,"require"===c)m[h]=d.require(n);else if("exports"===c)m[h]=d.exports(n),v=!0;else if("module"===c)a=m[h]=d.module(n);else if(e(w,c)||e(g,c)||e(E,c))m[h]=s(c);else{if(!l.p)throw new Error(n+" missing "+c);l.p.load(l.n,r(u,!0),f(c),{}),m[h]=w[c]}p=i?i.apply(w[n],m):void 0,n&&(a&&a.exports!==t&&a.exports!==w[n]?w[n]=a.exports:p===t&&v||(w[n]=p))}else n&&(w[n]=i)},o=i=h=function(e,n,r,o,i){return"string"==typeof e?d[e]?d[e](n):s(y(e,n).f):(e.splice||(v=e,n.splice?(e=n,n=r,r=null):e=t),n=n||function(){},"function"==typeof r&&(r=o,o=i),o?l(t,e,n,r):setTimeout(function(){l(t,e,n,r)},4),h)},h.config=function(t){return v=t,v.deps&&h(v.deps,v.callback),h},o._defined=w,u=function(t,n,r){n.splice||(r=n,n=[]),e(w,t)||e(g,t)||(g[t]=[t,n,r])},u.amd={jQuery:!0}}(),u("../vendor/almond/almond",function(){}),u("core/api_error",["require","exports"],function(t,e){!function(t){t[t.EPERM=0]="EPERM",t[t.ENOENT=1]="ENOENT",t[t.EIO=2]="EIO",t[t.EBADF=3]="EBADF",t[t.EACCES=4]="EACCES",t[t.EBUSY=5]="EBUSY",t[t.EEXIST=6]="EEXIST",t[t.ENOTDIR=7]="ENOTDIR",t[t.EISDIR=8]="EISDIR",t[t.EINVAL=9]="EINVAL",t[t.EFBIG=10]="EFBIG",t[t.ENOSPC=11]="ENOSPC",t[t.EROFS=12]="EROFS",t[t.ENOTEMPTY=13]="ENOTEMPTY",t[t.ENOTSUP=14]="ENOTSUP"}(e.ErrorCode||(e.ErrorCode={}));var n=e.ErrorCode,r={};r[n.EPERM]="Operation not permitted.",r[n.ENOENT]="No such file or directory.",r[n.EIO]="Input/output error.",r[n.EBADF]="Bad file descriptor.",r[n.EACCES]="Permission denied.",r[n.EBUSY]="Resource busy.",r[n.EEXIST]="File exists.",r[n.ENOTDIR]="File is not a directory.",r[n.EISDIR]="File is a directory.",r[n.EINVAL]="Invalid argument.",r[n.EFBIG]="File is too big.",r[n.ENOSPC]="No space left on disk.",r[n.EROFS]="Cannot modify a read-only file system.",r[n.ENOTEMPTY]="Directory is not empty.",r[n.ENOTSUP]="Operation is not supported.";var o=function(){function t(t,e){this.type=t,this.code=n[t],null!=e&&(this.message=e)}return t.prototype.toString=function(){return this.code+": "+r[this.type]+" "+this.message},t}();e.ApiError=o}),u("core/buffer_core",["require","exports","./api_error"],function(t,e,n){var r=n,o=Math.pow(2,128),i=-1*o,u=2139095040,a=-8388608,f=2143289344,s=function(){function t(){}return t.prototype.getLength=function(){throw new r.ApiError(r.ErrorCode.ENOTSUP,"BufferCore implementations should implement getLength.")},t.prototype.writeInt8=function(t,e){this.writeUInt8(t,255&e|(2147483648&e)>>>24)},t.prototype.writeInt16LE=function(t,e){this.writeUInt8(t,255&e),this.writeUInt8(t+1,255&e>>>8|(2147483648&e)>>>24)},t.prototype.writeInt16BE=function(t,e){this.writeUInt8(t+1,255&e),this.writeUInt8(t,255&e>>>8|(2147483648&e)>>>24)},t.prototype.writeInt32LE=function(t,e){this.writeUInt8(t,255&e),this.writeUInt8(t+1,255&e>>>8),this.writeUInt8(t+2,255&e>>>16),this.writeUInt8(t+3,255&e>>>24)},t.prototype.writeInt32BE=function(t,e){this.writeUInt8(t+3,255&e),this.writeUInt8(t+2,255&e>>>8),this.writeUInt8(t+1,255&e>>>16),this.writeUInt8(t,255&e>>>24)},t.prototype.writeUInt8=function(){throw new r.ApiError(r.ErrorCode.ENOTSUP,"BufferCore implementations should implement writeUInt8.")},t.prototype.writeUInt16LE=function(t,e){this.writeUInt8(t,255&e),this.writeUInt8(t+1,255&e>>8)},t.prototype.writeUInt16BE=function(t,e){this.writeUInt8(t+1,255&e),this.writeUInt8(t,255&e>>8)},t.prototype.writeUInt32LE=function(t,e){this.writeInt32LE(t,0|e)},t.prototype.writeUInt32BE=function(t,e){this.writeInt32BE(t,0|e)},t.prototype.writeFloatLE=function(t,e){this.writeInt32LE(t,this.float2intbits(e))},t.prototype.writeFloatBE=function(t,e){this.writeInt32BE(t,this.float2intbits(e))},t.prototype.writeDoubleLE=function(t,e){var n=this.double2longbits(e);this.writeInt32LE(t,n[0]),this.writeInt32LE(t+4,n[1])},t.prototype.writeDoubleBE=function(t,e){var n=this.double2longbits(e);this.writeInt32BE(t+4,n[0]),this.writeInt32BE(t,n[1])},t.prototype.readInt8=function(t){var e=this.readUInt8(t);return 128&e?4294967168|e:e},t.prototype.readInt16LE=function(t){var e=this.readUInt16LE(t);return 32768&e?4294934528|e:e},t.prototype.readInt16BE=function(t){var e=this.readUInt16BE(t);return 32768&e?4294934528|e:e},t.prototype.readInt32LE=function(t){return 0|this.readUInt32LE(t)},t.prototype.readInt32BE=function(t){return 0|this.readUInt32BE(t)},t.prototype.readUInt8=function(){throw new r.ApiError(r.ErrorCode.ENOTSUP,"BufferCore implementations should implement readUInt8.")},t.prototype.readUInt16LE=function(t){return this.readUInt8(t+1)<<8|this.readUInt8(t)},t.prototype.readUInt16BE=function(t){return this.readUInt8(t)<<8|this.readUInt8(t+1)},t.prototype.readUInt32LE=function(t){return(this.readUInt8(t+3)<<24|this.readUInt8(t+2)<<16|this.readUInt8(t+1)<<8|this.readUInt8(t))>>>0},t.prototype.readUInt32BE=function(t){return(this.readUInt8(t)<<24|this.readUInt8(t+1)<<16|this.readUInt8(t+2)<<8|this.readUInt8(t+3))>>>0},t.prototype.readFloatLE=function(t){return this.intbits2float(this.readInt32LE(t))},t.prototype.readFloatBE=function(t){return this.intbits2float(this.readInt32BE(t))},t.prototype.readDoubleLE=function(t){return this.longbits2double(this.readInt32LE(t+4),this.readInt32LE(t))},t.prototype.readDoubleBE=function(t){return this.longbits2double(this.readInt32BE(t),this.readInt32BE(t+4))},t.prototype.copy=function(){throw new r.ApiError(r.ErrorCode.ENOTSUP,"BufferCore implementations should implement copy.")},t.prototype.fill=function(t,e,n){for(var r=e;n>r;r++)this.writeUInt8(r,t)},t.prototype.float2intbits=function(t){var e,n,r;return 0===t?0:t===Number.POSITIVE_INFINITY?u:t===Number.NEGATIVE_INFINITY?a:isNaN(t)?f:(r=0>t?1:0,t=Math.abs(t),1.1754942106924411e-38>=t&&t>=1.401298464324817e-45?(e=0,n=Math.round(t/Math.pow(2,-126)*Math.pow(2,23)),r<<31|e<<23|n):(e=Math.floor(Math.log(t)/Math.LN2),n=Math.round((t/Math.pow(2,e)-1)*Math.pow(2,23)),r<<31|e+127<<23|n))},t.prototype.double2longbits=function(t){var e,n,r,o;return 0===t?[0,0]:t===Number.POSITIVE_INFINITY?[0,2146435072]:t===Number.NEGATIVE_INFINITY?[0,-1048576]:isNaN(t)?[0,2146959360]:(o=0>t?1<<31:0,t=Math.abs(t),2.225073858507201e-308>=t&&t>=5e-324?(e=0,r=t/Math.pow(2,-1022)*Math.pow(2,52)):(e=Math.floor(Math.log(t)/Math.LN2),t<Math.pow(2,e)&&(e-=1),r=(t/Math.pow(2,e)-1)*Math.pow(2,52),e=e+1023<<20),n=0|r*Math.pow(2,-32)|o|e,[65535&r,n])},t.prototype.intbits2float=function(t){if(t===u)return Number.POSITIVE_INFINITY;if(t===a)return Number.NEGATIVE_INFINITY;var e,n=(2147483648&t)>>>31,r=(2139095040&t)>>>23,f=8388607&t;return e=0===r?Math.pow(-1,n)*f*Math.pow(2,-149):Math.pow(-1,n)*(1+f*Math.pow(2,-23))*Math.pow(2,r-127),(i>e||e>o)&&(e=0/0),e},t.prototype.longbits2double=function(t,e){var n=(2147483648&t)>>>31,r=(2146435072&t)>>>20,o=(1048575&t)*Math.pow(2,32)+e;return 0===r&&0===o?0:2047===r?0===o?1===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:0/0:0===r?Math.pow(-1,n)*o*Math.pow(2,-1074):Math.pow(-1,n)*(1+o*Math.pow(2,-52))*Math.pow(2,r-1023)},t}();e.BufferCoreCommon=s});var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("core/buffer_core_array",["require","exports","./buffer_core"],function(t,e,n){var r=n,o=[4294967040,4294902015,4278255615,16777215],i=function(t){function e(e){t.call(this),this.length=e,this.buff=new Array(Math.ceil(e/4));for(var n=this.buff.length,r=0;n>r;r++)this.buff[r]=0}return a(e,t),e.isAvailable=function(){return!0},e.prototype.getLength=function(){return this.length},e.prototype.writeUInt8=function(t,e){e&=255;var n=t>>2,r=3&t;this.buff[n]=this.buff[n]&o[r],this.buff[n]=this.buff[n]|e<<(r<<3)},e.prototype.readUInt8=function(t){var e=t>>2,n=3&t;return 255&this.buff[e]>>(n<<3)},e.prototype.copy=function(t,n){for(var r=new e(n-t),o=t;n>o;o++)r.writeUInt8(o-t,this.readUInt8(o));return r},e}(r.BufferCoreCommon);e.BufferCoreArray=i});var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("core/buffer_core_arraybuffer",["require","exports","./buffer_core"],function(t,e,n){var r=n,o=function(t){function e(e){t.call(this),this.buff="number"==typeof e?new DataView(new ArrayBuffer(e)):e instanceof DataView?e:new DataView(e),this.length=this.buff.byteLength}return a(e,t),e.isAvailable=function(){return"undefined"!=typeof DataView},e.prototype.getLength=function(){return this.length},e.prototype.writeInt8=function(t,e){this.buff.setInt8(t,e)},e.prototype.writeInt16LE=function(t,e){this.buff.setInt16(t,e,!0)},e.prototype.writeInt16BE=function(t,e){this.buff.setInt16(t,e,!1)},e.prototype.writeInt32LE=function(t,e){this.buff.setInt32(t,e,!0)},e.prototype.writeInt32BE=function(t,e){this.buff.setInt32(t,e,!1)},e.prototype.writeUInt8=function(t,e){this.buff.setUint8(t,e)},e.prototype.writeUInt16LE=function(t,e){this.buff.setUint16(t,e,!0)},e.prototype.writeUInt16BE=function(t,e){this.buff.setUint16(t,e,!1)},e.prototype.writeUInt32LE=function(t,e){this.buff.setUint32(t,e,!0)},e.prototype.writeUInt32BE=function(t,e){this.buff.setUint32(t,e,!1)},e.prototype.writeFloatLE=function(t,e){this.buff.setFloat32(t,e,!0)},e.prototype.writeFloatBE=function(t,e){this.buff.setFloat32(t,e,!1)},e.prototype.writeDoubleLE=function(t,e){this.buff.setFloat64(t,e,!0)},e.prototype.writeDoubleBE=function(t,e){this.buff.setFloat64(t,e,!1)},e.prototype.readInt8=function(t){return this.buff.getInt8(t)},e.prototype.readInt16LE=function(t){return this.buff.getInt16(t,!0)},e.prototype.readInt16BE=function(t){return this.buff.getInt16(t,!1)},e.prototype.readInt32LE=function(t){return this.buff.getInt32(t,!0)},e.prototype.readInt32BE=function(t){return this.buff.getInt32(t,!1)},e.prototype.readUInt8=function(t){return this.buff.getUint8(t)},e.prototype.readUInt16LE=function(t){return this.buff.getUint16(t,!0)},e.prototype.readUInt16BE=function(t){return this.buff.getUint16(t,!1)},e.prototype.readUInt32LE=function(t){return this.buff.getUint32(t,!0)},e.prototype.readUInt32BE=function(t){return this.buff.getUint32(t,!1)},e.prototype.readFloatLE=function(t){return this.buff.getFloat32(t,!0)},e.prototype.readFloatBE=function(t){return this.buff.getFloat32(t,!1)},e.prototype.readDoubleLE=function(t){return this.buff.getFloat64(t,!0)},e.prototype.readDoubleBE=function(t){return this.buff.getFloat64(t,!1)},e.prototype.copy=function(t,n){var r,o=this.buff.buffer;if(ArrayBuffer.prototype.slice)r=o.slice(t,n);else{var i=n-t;r=new ArrayBuffer(i);var u,a=new DataView(r),f=4*(0|i/4);for(u=0;f>u;u+=4)a.setInt32(u,this.buff.getInt32(t+u));for(u=f;i>u;u++)a.setUint8(u,this.buff.getUint8(t+u))}return new e(r)},e.prototype.fill=function(t,e,n){t=255&t;var r,o=n-e,i=4*(0|o/4),u=t<<24|t<<16|t<<8|t;for(r=0;i>r;r+=4)this.writeInt32LE(r+e,u);for(r=i;o>r;r++)this.writeUInt8(r+e,t)},e.prototype.getDataView=function(){return this.buff},e}(r.BufferCoreCommon);e.BufferCoreArrayBuffer=o}),u("core/string_util",["require","exports"],function(t,e){function n(t){switch(t=function(){switch(typeof t){case"object":return""+t;case"string":return t;default:throw new Error("Invalid encoding argument specified")}}(),t=t.toLowerCase()){case"utf8":case"utf-8":return r;case"ascii":return o;case"binary":return i;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a;case"hex":return f;case"base64":return u;case"binary_string":return s;case"binary_string_ie":return c;default:throw new Error("Unknown encoding: "+t)}}e.FindUtil=n;var r=function(){function t(){}return t.str2byte=function(t,e){for(var n=e.length,r=0,o=0,i=n,u=0;r<t.length&&i>o;){var a=t.charCodeAt(r++),f=t.charCodeAt(r);if(a>=55296&&56319>=a&&f>=56320&&57343>=f){if(o+3>=i)break;u++;var s=(1024|1023&a)<<10|1023&f;e.writeUInt8(240|s>>18,o++),e.writeUInt8(128|63&s>>12,o++),e.writeUInt8(128|63&s>>6,o++),e.writeUInt8(128|63&s,o++),r++}else if(128>a)e.writeUInt8(a,o++),u++;else if(2048>a){if(o+1>=i)break;u++,e.writeUInt8(192|a>>6,o++),e.writeUInt8(128|63&a,o++)}else if(65536>a){if(o+2>=i)break;u++,e.writeUInt8(224|a>>12,o++),e.writeUInt8(128|63&a>>6,o++),e.writeUInt8(128|63&a,o++)}}return o},t.byte2str=function(t){for(var e=[],n=0;n<t.length;){var r=t.readUInt8(n++);if(128>r)e.push(String.fromCharCode(r));else{if(192>r)throw new Error("Found incomplete part of character in string.");if(224>r)e.push(String.fromCharCode((31&r)<<6|63&t.readUInt8(n++)));else if(240>r)e.push(String.fromCharCode((15&r)<<12|(63&t.readUInt8(n++))<<6|63&t.readUInt8(n++)));else{if(!(248>r))throw new Error("Unable to represent UTF-8 string as UTF-16 JavaScript string.");var o=t.readUInt8(n+2);e.push(String.fromCharCode(55296|1023&((7&r)<<8|(63&t.readUInt8(n++))<<2|(63&t.readUInt8(n++))>>4))),e.push(String.fromCharCode(56320|((15&o)<<6|63&t.readUInt8(n++))))}}}return e.join("")},t.byteLength=function(t){var e=encodeURIComponent(t).match(/%[89ABab]/g);return t.length+(e?e.length:0)},t}();e.UTF8=r;var o=function(){function t(){}return t.str2byte=function(t,e){for(var n=t.length>e.length?e.length:t.length,r=0;n>r;r++)e.writeUInt8(t.charCodeAt(r)%256,r);return n},t.byte2str=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(127&t.readUInt8(n));return e.join("")},t.byteLength=function(t){return t.length},t}();e.ASCII=o;var i=function(){function t(){}return t.str2byte=function(t,e){for(var n=t.length>e.length?e.length:t.length,r=0;n>r;r++)e.writeUInt8(255&t.charCodeAt(r),r);return n},t.byte2str=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(255&t.readUInt8(n));return e.join("")},t.byteLength=function(t){return t.length},t}();e.BINARY=i;var u=function(){function t(){}return t.byte2str=function(e){for(var n="",r=0;r<e.length;){var o=e.readUInt8(r++),i=r<e.length?e.readUInt8(r++):0/0,u=r<e.length?e.readUInt8(r++):0/0,a=o>>2,f=(3&o)<<4|i>>4,s=(15&i)<<2|u>>6,c=63&u;isNaN(i)?s=c=64:isNaN(u)&&(c=64),n=n+t.num2b64[a]+t.num2b64[f]+t.num2b64[s]+t.num2b64[c]}return n},t.str2byte=function(e,n){var r=n.length,o="",i=0;e=e.replace(/[^A-Za-z0-9\+\/\=\-\_]/g,"");for(var u=0;i<e.length;){var a=t.b642num[e.charAt(i++)],f=t.b642num[e.charAt(i++)],s=t.b642num[e.charAt(i++)],c=t.b642num[e.charAt(i++)],p=a<<2|f>>4,l=(15&f)<<4|s>>2,h=(3&s)<<6|c;if(n.writeUInt8(p,u++),u===r)break;if(64!==s&&(o+=n.writeUInt8(l,u++)),u===r)break;if(64!==c&&(o+=n.writeUInt8(h,u++)),u===r)break}return u},t.byteLength=function(t){return Math.floor(6*t.replace(/[^A-Za-z0-9\+\/\-\_]/g,"").length/8)},t.b64chars=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/","="],t.num2b64=function(){for(var e=new Array(t.b64chars.length),n=0;n<t.b64chars.length;n++){var r=t.b64chars[n];e[n]=r}return e}(),t.b642num=function(){for(var e={},n=0;n<t.b64chars.length;n++){var r=t.b64chars[n];e[r]=n}return e["-"]=62,e._=63,e}(),t}();e.BASE64=u;var a=function(){function t(){}return t.str2byte=function(t,e){var n=t.length;2*n>e.length&&(n=1===e.length%2?(e.length-1)/2:e.length/2);for(var r=0;n>r;r++)e.writeUInt16LE(t.charCodeAt(r),2*r);return 2*n},t.byte2str=function(t){if(0!==t.length%2)throw new Error("Invalid UCS2 byte array.");for(var e=new Array(t.length/2),n=0;n<t.length;n+=2)e[n/2]=String.fromCharCode(t.readUInt8(n)|t.readUInt8(n+1)<<8);return e.join("")},t.byteLength=function(t){return 2*t.length},t}();e.UCS2=a;var f=function(){function t(){}return t.str2byte=function(t,e){if(1===t.length%2)throw new Error("Invalid hex string");var n=t.length>>1;n>e.length&&(n=e.length);for(var r=0;n>r;r++){var o=this.hex2num[t.charAt(r<<1)],i=this.hex2num[t.charAt((r<<1)+1)];e.writeUInt8(o<<4|i,r)}return n},t.byte2str=function(t){for(var e=t.length,n=new Array(e<<1),r=0,o=0;e>o;o++){var i=15&t.readUInt8(o),u=t.readUInt8(o)>>4;n[r++]=this.num2hex[u],n[r++]=this.num2hex[i]}return n.join("")},t.byteLength=function(t){return t.length>>1},t.HEXCHARS="0123456789abcdef",t.num2hex=function(){for(var e=new Array(t.HEXCHARS.length),n=0;n<t.HEXCHARS.length;n++){var r=t.HEXCHARS[n];e[n]=r}return e}(),t.hex2num=function(){var e,n,r={};for(e=0;e<t.HEXCHARS.length;e++)n=t.HEXCHARS[e],r[n]=e;var o="ABCDEF";for(e=0;e<o.length;e++)n=o[e],r[n]=e+10;return r}(),t}();e.HEX=f;var s=function(){function t(){}return t.str2byte=function(e,n){if(0===e.length)return 0;var r=t.byteLength(e);r>n.length&&(r=n.length);var o=0,i=0,u=i+r,a=e.charCodeAt(o++);0!==a&&(n.writeUInt8(255&a,0),i=1);for(var f=i;u>f;f+=2){var s=e.charCodeAt(o++);1===u-f&&n.writeUInt8(s>>8,f),u-f>=2&&n.writeUInt16BE(s,f)}return r},t.byte2str=function(t){var e=t.length;if(0===e)return"";for(var n=new Array((e>>1)+1),r=0,o=0;o<n.length;o++)n[o]=0===o?1===e%2?String.fromCharCode(256|t.readUInt8(r++)):String.fromCharCode(0):String.fromCharCode(t.readUInt8(r++)<<8|t.readUInt8(r++));return n.join("")},t.byteLength=function(t){if(0===t.length)return 0;var e=t.charCodeAt(0),n=t.length-1<<1;return 0!==e&&n++,n},t}();e.BINSTR=s;var c=function(){function t(){}return t.str2byte=function(t,e){for(var n=t.length>e.length?e.length:t.length,r=0;n>r;r++)e.writeUInt8(t.charCodeAt(r)-32,r);return n},t.byte2str=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t.readUInt8(n)+32);return e.join("")},t.byteLength=function(t){return t.length},t}();e.BINSTRIE=c}),u("core/buffer",["require","exports","./buffer_core","./buffer_core_array","./buffer_core_arraybuffer","./string_util"],function(t,e,n,r,o,i){var u=n,a=r,f=o,s=i,c=f.BufferCoreArrayBuffer.isAvailable()?f.BufferCoreArrayBuffer:a.BufferCoreArray,p=function(){function t(e,n,r){"undefined"==typeof n&&(n="utf8"),this.offset=0;var o;if(!(this instanceof t))return new t(e,n);if(e instanceof u.BufferCoreCommon){this.data=e;var i="number"==typeof n?n:0,a="number"==typeof r?r:this.data.getLength();this.offset=i,this.length=a-i}else if("number"==typeof e){if(e!==e>>>0)throw new TypeError("Buffer size must be a uint32.");this.length=e,this.data=new c(e)}else if("undefined"!=typeof DataView&&e instanceof DataView)this.data=new f.BufferCoreArrayBuffer(e),this.length=e.byteLength;else if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer)this.data=new f.BufferCoreArrayBuffer(e),this.length=e.byteLength;else if(e instanceof t){var s=e;this.data=new c(e.length),this.length=e.length,s.copy(this)}else if(Array.isArray(e)||null!=e&&"object"==typeof e&&"number"==typeof e[0]){for(this.data=new c(e.length),o=0;o<e.length;o++)this.data.writeUInt8(o,e[o]);this.length=e.length}else{if("string"!=typeof e)throw new Error("Invalid argument to Buffer constructor: "+e);this.length=t.byteLength(e,n),this.data=new c(this.length),this.write(e,0,this.length,n)}}return t.prototype.getBufferCore=function(){return this.data},t.prototype.getOffset=function(){return this.offset},t.prototype.set=function(t,e){return this.writeUInt8(e,t)},t.prototype.get=function(t){return this.readUInt8(t)},t.prototype.write=function(e,n,r,o){if("undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=this.length),"undefined"==typeof o&&(o="utf8"),"string"==typeof n?(o=""+n,n=0,r=this.length):"string"==typeof r&&(o=""+r,r=this.length),n>=this.length)return 0;var i=s.FindUtil(o);return r=r+n>this.length?this.length-n:r,n+=this.offset,i.str2byte(e,0===n&&r===this.length?this:new t(this.data,n,r+n))},t.prototype.toString=function(e,n,r){if("undefined"==typeof e&&(e="utf8"),"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=this.length),!(r>=n))throw new Error("Invalid start/end positions: "+n+" - "+r);if(n===r)return"";r>this.length&&(r=this.length);var o=s.FindUtil(e);return o.byte2str(0===n&&r===this.length?this:new t(this.data,n+this.offset,r+this.offset))},t.prototype.toJSON=function(){for(var t=this.length,e=new Array(t),n=0;t>n;n++)e[n]=this.readUInt8(this.offset+n);return{type:"Buffer",data:e}},t.prototype.copy=function(t,e,n,r){if("undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=this.length),e=0>e?0:e,n=0>n?0:n,n>r)throw new RangeError("sourceEnd < sourceStart");if(r===n)return 0;if(e>=t.length)throw new RangeError("targetStart out of bounds");if(n>=this.length)throw new RangeError("sourceStart out of bounds");if(r>this.length)throw new RangeError("sourceEnd out of bounds");for(var o=Math.min(r-n,t.length-e,this.length-n),i=0;o>i;i++)t.writeUInt8(this.readUInt8(n+i),e+i);return o},t.prototype.slice=function(e,n){if("undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=this.length),0>e&&(e+=this.length,0>e&&(e=0)),0>n&&(n+=this.length,0>n&&(n=0)),n>this.length&&(n=this.length),e>n&&(e=n),0>e||0>n||e>=this.length||n>this.length)throw new Error("Invalid slice indices.");return new t(this.data,e+this.offset,n+this.offset)},t.prototype.sliceCopy=function(e,n){if("undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=this.length),0>e&&(e+=this.length,0>e&&(e=0)),0>n&&(n+=this.length,0>n&&(n=0)),n>this.length&&(n=this.length),e>n&&(e=n),0>e||0>n||e>=this.length||n>this.length)throw new Error("Invalid slice indices.");return new t(this.data.copy(e+this.offset,n+this.offset))},t.prototype.fill=function(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=this.length);var r=typeof t;switch(r){case"string":t=255&t.charCodeAt(0);break;case"number":break;default:throw new Error("Invalid argument to fill.")}e+=this.offset,n+=this.offset,this.data.fill(t,e,n)},t.prototype.readUInt8=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readUInt8(t)},t.prototype.readUInt16LE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readUInt16LE(t)},t.prototype.readUInt16BE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readUInt16BE(t)},t.prototype.readUInt32LE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readUInt32LE(t)},t.prototype.readUInt32BE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readUInt32BE(t)},t.prototype.readInt8=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readInt8(t)},t.prototype.readInt16LE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readInt16LE(t)},t.prototype.readInt16BE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readInt16BE(t)},t.prototype.readInt32LE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readInt32LE(t)},t.prototype.readInt32BE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readInt32BE(t)},t.prototype.readFloatLE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readFloatLE(t)},t.prototype.readFloatBE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readFloatBE(t)},t.prototype.readDoubleLE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readDoubleLE(t)},t.prototype.readDoubleBE=function(t,e){return"undefined"==typeof e&&(e=!1),t+=this.offset,this.data.readDoubleBE(t)},t.prototype.writeUInt8=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeUInt8(e,t)},t.prototype.writeUInt16LE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeUInt16LE(e,t)},t.prototype.writeUInt16BE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeUInt16BE(e,t)},t.prototype.writeUInt32LE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeUInt32LE(e,t)},t.prototype.writeUInt32BE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeUInt32BE(e,t)},t.prototype.writeInt8=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeInt8(e,t)},t.prototype.writeInt16LE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeInt16LE(e,t)},t.prototype.writeInt16BE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeInt16BE(e,t)},t.prototype.writeInt32LE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeInt32LE(e,t)},t.prototype.writeInt32BE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeInt32BE(e,t)},t.prototype.writeFloatLE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeFloatLE(e,t)},t.prototype.writeFloatBE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeFloatBE(e,t)},t.prototype.writeDoubleLE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeDoubleLE(e,t)},t.prototype.writeDoubleBE=function(t,e,n){"undefined"==typeof n&&(n=!1),e+=this.offset,this.data.writeDoubleBE(e,t)},t.isEncoding=function(t){try{s.FindUtil(t)}catch(e){return!1}return!0},t.isBuffer=function(e){return e instanceof t},t.byteLength=function(t,e){"undefined"==typeof e&&(e="utf8");var n=s.FindUtil(e);return n.byteLength(t)},t.concat=function(e,n){var r;if(0===e.length||0===n)return new t(0);if(1===e.length)return e[0];if(null==n){n=0;for(var o=0;o<e.length;o++)r=e[o],n+=r.length}for(var i=new t(n),u=0,a=0;a<e.length;a++)r=e[a],u+=r.copy(i,u);return i},t.INSPECT_MAX_BYTES=0,t}();e.Buffer=p}),u("core/file_flag",["require","exports","./api_error"],function(t,e,n){var r=n;!function(t){t[t.NOP=0]="NOP",t[t.THROW_EXCEPTION=1]="THROW_EXCEPTION",t[t.TRUNCATE_FILE=2]="TRUNCATE_FILE",t[t.CREATE_FILE=3]="CREATE_FILE"}(e.ActionType||(e.ActionType={}));var o=e.ActionType,i=function(){function t(e){if(this.flagStr=e,t.validFlagStrs.indexOf(e)<0)throw new r.ApiError(r.ErrorCode.EINVAL,"Invalid flag: "+e)}return t.getFileFlag=function(e){return t.flagCache.hasOwnProperty(e)?t.flagCache[e]:t.flagCache[e]=new t(e)},t.prototype.isReadable=function(){return-1!==this.flagStr.indexOf("r")||-1!==this.flagStr.indexOf("+")},t.prototype.isWriteable=function(){return-1!==this.flagStr.indexOf("w")||-1!==this.flagStr.indexOf("a")||-1!==this.flagStr.indexOf("+")},t.prototype.isTruncating=function(){return-1!==this.flagStr.indexOf("w")},t.prototype.isAppendable=function(){return-1!==this.flagStr.indexOf("a")},t.prototype.isSynchronous=function(){return-1!==this.flagStr.indexOf("s")},t.prototype.isExclusive=function(){return-1!==this.flagStr.indexOf("x")},t.prototype.pathExistsAction=function(){return this.isExclusive()?o.THROW_EXCEPTION:this.isTruncating()?o.TRUNCATE_FILE:o.NOP},t.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&"r+"!==this.flagStr?o.CREATE_FILE:o.THROW_EXCEPTION},t.flagCache={},t.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],t}();e.FileFlag=i}),u("core/node_process",["require","exports"],function(t,e){var n=null,r=function(){function e(){this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[]}return e.prototype.chdir=function(e){null===n&&(n=t("./node_path").path),this._cwd=n.resolve(e)},e.prototype.cwd=function(){return this._cwd},e.prototype.uptime=function(){return 0|(Date.now()-this.startTime)/1e3},e.prototype.stdout=function(t){window.alert(t)},e.prototype.stdin=function(t){return window.prompt(t?t:"Input: ")},e}();e.Process=r,e.process=new r}),u("core/node_path",["require","exports","./node_process"],function(t,e,n){var r=n,o=r.process,i=function(){function t(){}return t.normalize=function(e){""===e&&(e=".");var n=e.charAt(0)===t.sep;e=t._removeDuplicateSeps(e);for(var r=e.split(t.sep),o=[],i=0;i<r.length;i++){var u=r[i];"."!==u&&(".."===u&&(n||!n&&o.length>0&&".."!==o[0])?o.pop():o.push(u))}if(!n&&o.length<2)switch(o.length){case 1:""===o[0]&&o.unshift(".");
break;default:o.push(".")}return e=o.join(t.sep),n&&e.charAt(0)!==t.sep&&(e=t.sep+e),e},t.join=function(){for(var e=[],n=0;n<arguments.length-0;n++)e[n]=arguments[n+0];for(var r=[],o=0;o<e.length;o++){var i=e[o];if("string"!=typeof i)throw new TypeError("Invalid argument type to path.join: "+typeof i);""!==i&&r.push(i)}return t.normalize(r.join(t.sep))},t.resolve=function(){for(var e=[],n=0;n<arguments.length-0;n++)e[n]=arguments[n+0];for(var r=[],i=0;i<e.length;i++){var u=e[i];if("string"!=typeof u)throw new TypeError("Invalid argument type to path.join: "+typeof u);""!==u&&(u.charAt(0)===t.sep&&(r=[]),r.push(u))}var a=t.normalize(r.join(t.sep));if(a.length>1&&a.charAt(a.length-1)===t.sep)return a.substr(0,a.length-1);if(a.charAt(0)!==t.sep){"."!==a.charAt(0)||1!==a.length&&a.charAt(1)!==t.sep||(a=1===a.length?"":a.substr(2));var f=o.cwd();a=""!==a?this.normalize(f+("/"!==f?t.sep:"")+a):f}return a},t.relative=function(e,n){var r;e=t.resolve(e),n=t.resolve(n);var o=e.split(t.sep),i=n.split(t.sep);i.shift(),o.shift();var u=0,a=[];for(r=0;r<o.length;r++){var f=o[r];if(f!==i[r]){u=o.length-r;break}}a=i.slice(r),1===o.length&&""===o[0]&&(u=0),u>o.length&&(u=o.length);var s="";for(r=0;u>r;r++)s+="../";return s+=a.join(t.sep),s.length>1&&s.charAt(s.length-1)===t.sep&&(s=s.substr(0,s.length-1)),s},t.dirname=function(e){e=t._removeDuplicateSeps(e);var n=e.charAt(0)===t.sep,r=e.split(t.sep);return""===r.pop()&&r.length>0&&r.pop(),r.length>1?r.join(t.sep):n?t.sep:"."},t.basename=function(e,n){if("undefined"==typeof n&&(n=""),""===e)return e;e=t.normalize(e);var r=e.split(t.sep),o=r[r.length-1];if(""===o&&r.length>1)return r[r.length-2];if(n.length>0){var i=o.substr(o.length-n.length);if(i===n)return o.substr(0,o.length-n.length)}return o},t.extname=function(e){e=t.normalize(e);var n=e.split(t.sep);if(e=n.pop(),""===e&&n.length>0&&(e=n.pop()),".."===e)return"";var r=e.lastIndexOf(".");return-1===r||0===r?"":e.substr(r)},t.isAbsolute=function(e){return e.length>0&&e.charAt(0)===t.sep},t._makeLong=function(t){return t},t._removeDuplicateSeps=function(t){return t=t.replace(this._replaceRegex,this.sep)},t.sep="/",t._replaceRegex=new RegExp("//+","g"),t.delimiter=":",t}();e.path=i}),u("core/node_fs",["require","exports","./api_error","./file_flag","./buffer","./node_path"],function(t,e,n,r,o,i){function u(t,e){if("function"!=typeof t)throw new w(g.EINVAL,"Callback must be a function.");switch("undefined"==typeof __numWaiting&&(__numWaiting=0),__numWaiting++,e){case 1:return function(e){setImmediate(function(){return __numWaiting--,t(e)})};case 2:return function(e,n){setImmediate(function(){return __numWaiting--,t(e,n)})};case 3:return function(e,n,r){setImmediate(function(){return __numWaiting--,t(e,n,r)})};default:throw new Error("Invalid invocation of wrapCb.")}}function a(t){if("function"!=typeof t.write)throw new w(g.EBADF,"Invalid file descriptor.")}function f(t,e){switch(typeof t){case"number":return t;case"string":var n=parseInt(t,8);if(0/0!==n)return n;default:return e}}function s(t){if(t.indexOf("\x00")>=0)throw new w(g.EINVAL,"Path must be a string without null bytes.");if(""===t)throw new w(g.EINVAL,"Path must not be empty.");return m.resolve(t)}function c(t,e,n,r){switch(typeof t){case"object":return{encoding:"undefined"!=typeof t.encoding?t.encoding:e,flag:"undefined"!=typeof t.flag?t.flag:n,mode:f(t.mode,r)};case"string":return{encoding:t,flag:n,mode:r};default:return{encoding:e,flag:n,mode:r}}}function p(){}var l=n,h=r,y=o,d=i,w=l.ApiError,g=l.ErrorCode,v=h.FileFlag,E=y.Buffer,m=d.path,S=function(){function t(){}return t._initialize=function(e){if(!e.constructor.isAvailable())throw new w(g.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return t.root=e},t._toUnixTimestamp=function(t){if("number"==typeof t)return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},t.getRootFS=function(){return t.root?t.root:null},t.rename=function(e,n,r){"undefined"==typeof r&&(r=p);var o=u(r,1);try{t.root.rename(s(e),s(n),o)}catch(i){o(i)}},t.renameSync=function(e,n){t.root.renameSync(s(e),s(n))},t.exists=function(e,n){"undefined"==typeof n&&(n=p);var r=u(n,1);try{return t.root.exists(s(e),r)}catch(o){return r(!1)}},t.existsSync=function(e){try{return t.root.existsSync(s(e))}catch(n){return!1}},t.stat=function(e,n){"undefined"==typeof n&&(n=p);var r=u(n,2);try{return t.root.stat(s(e),!1,r)}catch(o){return r(o,null)}},t.statSync=function(e){return t.root.statSync(s(e),!1)},t.lstat=function(e,n){"undefined"==typeof n&&(n=p);var r=u(n,2);try{return t.root.stat(s(e),!0,r)}catch(o){return r(o,null)}},t.lstatSync=function(e){return t.root.statSync(s(e),!0)},t.truncate=function(e,n,r){"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=p);var o=0;"function"==typeof n?r=n:"number"==typeof n&&(o=n);var i=u(r,1);try{return t.root.truncate(s(e),o,i)}catch(a){return i(a)}},t.truncateSync=function(e,n){return"undefined"==typeof n&&(n=0),t.root.truncateSync(s(e),n)},t.unlink=function(e,n){"undefined"==typeof n&&(n=p);var r=u(n,1);try{return t.root.unlink(s(e),r)}catch(o){return r(o)}},t.unlinkSync=function(e){return t.root.unlinkSync(s(e))},t.open=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i=f(r,420);o="function"==typeof r?r:o;var a=u(o,2);try{return t.root.open(s(e),v.getFileFlag(n),i,a)}catch(c){return a(c,null)}},t.openSync=function(e,n,r){return"undefined"==typeof r&&(r=420),t.root.openSync(s(e),v.getFileFlag(n),r)},t.readFile=function(e,n,r){"undefined"==typeof n&&(n={}),"undefined"==typeof r&&(r=p);var o=c(n,null,"r",null);r="function"==typeof n?n:r;var i=u(r,2);try{var a=v.getFileFlag(o.flag);return a.isReadable()?t.root.readFile(s(e),o.encoding,a,i):i(new w(g.EINVAL,"Flag passed to readFile must allow for reading."))}catch(f){return i(f,null)}},t.readFileSync=function(e,n){"undefined"==typeof n&&(n={});var r=c(n,null,"r",null),o=v.getFileFlag(r.flag);if(!o.isReadable())throw new w(g.EINVAL,"Flag passed to readFile must allow for reading.");return t.root.readFileSync(s(e),r.encoding,o)},t.writeFile=function(e,n,r,o){"undefined"==typeof r&&(r={}),"undefined"==typeof o&&(o=p);var i=c(r,"utf8","w",420);o="function"==typeof r?r:o;var a=u(o,1);try{var f=v.getFileFlag(i.flag);return f.isWriteable()?t.root.writeFile(s(e),n,i.encoding,f,i.mode,a):a(new w(g.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(l){return a(l)}},t.writeFileSync=function(e,n,r){var o=c(r,"utf8","w",420),i=v.getFileFlag(o.flag);if(!i.isWriteable())throw new w(g.EINVAL,"Flag passed to writeFile must allow for writing.");return t.root.writeFileSync(s(e),n,o.encoding,i,o.mode)},t.appendFile=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i=c(r,"utf8","a",420);o="function"==typeof r?r:o;var a=u(o,1);try{var f=v.getFileFlag(i.flag);if(!f.isAppendable())return a(new w(g.EINVAL,"Flag passed to appendFile must allow for appending."));t.root.appendFile(s(e),n,i.encoding,f,i.mode,a)}catch(l){a(l)}},t.appendFileSync=function(e,n,r){var o=c(r,"utf8","a",420),i=v.getFileFlag(o.flag);if(!i.isAppendable())throw new w(g.EINVAL,"Flag passed to appendFile must allow for appending.");return t.root.appendFileSync(s(e),n,o.encoding,i,o.mode)},t.fstat=function(t,e){"undefined"==typeof e&&(e=p);var n=u(e,2);try{a(t),t.stat(n)}catch(r){n(r)}},t.fstatSync=function(t){return a(t),t.statSync()},t.close=function(t,e){"undefined"==typeof e&&(e=p);var n=u(e,1);try{a(t),t.close(n)}catch(r){n(r)}},t.closeSync=function(t){return a(t),t.closeSync()},t.ftruncate=function(t,e,n){"undefined"==typeof n&&(n=p);var r="number"==typeof e?e:0;n="function"==typeof e?e:n;var o=u(n,1);try{a(t),t.truncate(r,o)}catch(i){o(i)}},t.ftruncateSync=function(t,e){return"undefined"==typeof e&&(e=0),a(t),t.truncateSync(e)},t.fsync=function(t,e){"undefined"==typeof e&&(e=p);var n=u(e,1);try{a(t),t.sync(n)}catch(r){n(r)}},t.fsyncSync=function(t){return a(t),t.syncSync()},t.fdatasync=function(t,e){"undefined"==typeof e&&(e=p);var n=u(e,1);try{a(t),t.datasync(n)}catch(r){n(r)}},t.fdatasyncSync=function(t){a(t),t.datasyncSync()},t.write=function(t,e,n,r,o,i){"undefined"==typeof i&&(i=p);var f,s,c,l=null;if("string"==typeof e){var h="utf8";switch(typeof n){case"function":i=n;break;case"number":l=n,h="string"==typeof r?r:"utf8",i="function"==typeof o?o:i;break;default:return i="function"==typeof r?r:"function"==typeof o?o:i,i(new w(g.EINVAL,"Invalid arguments."))}f=new E(e,h),s=0,c=f.length}else f=e,s=n,c=r,l="number"==typeof o?o:null,i="function"==typeof o?o:i;var y=u(i,3);try{a(t),null==l&&(l=t.getPos()),t.write(f,s,c,l,y)}catch(d){y(d)}},t.writeSync=function(t,e,n,r,o){var i,u,f,s=0;if("string"==typeof e){f="number"==typeof n?n:null;var c="string"==typeof r?r:"utf8";s=0,i=new E(e,c),u=i.length}else i=e,s=n,u=r,f="number"==typeof o?o:null;return a(t),null==f&&(f=t.getPos()),t.writeSync(i,s,u,f)},t.read=function(t,e,n,r,o,i){"undefined"==typeof i&&(i=p);var f,s,c,l,h;if("number"==typeof e){c=e,f=n;var y=r;i="function"==typeof o?o:i,s=0,l=new E(c),h=u(function(t,e,n){return t?i(t):(i(t,n.toString(y),e),void 0)},3)}else l=e,s=n,c=r,f=o,h=u(i,3);try{a(t),null==f&&(f=t.getPos()),t.read(l,s,c,f,h)}catch(d){h(d)}},t.readSync=function(t,e,n,r,o){var i,u,f,s,c=!1;if("number"==typeof e){f=e,s=n;var p=r;u=0,i=new E(f),c=!0}else i=e,u=n,f=r,s=o;a(t),null==s&&(s=t.getPos());var l=t.readSync(i,u,f,s);return c?[i.toString(p),l]:l},t.fchown=function(t,e,n,r){"undefined"==typeof r&&(r=p);var o=u(r,1);try{a(t),t.chown(e,n,o)}catch(i){o(i)}},t.fchownSync=function(t,e,n){return a(t),t.chownSync(e,n)},t.fchmod=function(t,e,n){"undefined"==typeof n&&(n=p);var r=u(n,1);try{e="string"==typeof e?parseInt(e,8):e,a(t),t.chmod(e,r)}catch(o){r(o)}},t.fchmodSync=function(t,e){return e="string"==typeof e?parseInt(e,8):e,a(t),t.chmodSync(e)},t.futimes=function(t,e,n,r){"undefined"==typeof r&&(r=p);var o=u(r,1);try{a(t),"number"==typeof e&&(e=new Date(1e3*e)),"number"==typeof n&&(n=new Date(1e3*n)),t.utimes(e,n,o)}catch(i){o(i)}},t.futimesSync=function(t,e,n){return a(t),"number"==typeof e&&(e=new Date(1e3*e)),"number"==typeof n&&(n=new Date(1e3*n)),t.utimesSync(e,n)},t.rmdir=function(e,n){"undefined"==typeof n&&(n=p);var r=u(n,1);try{e=s(e),t.root.rmdir(e,r)}catch(o){r(o)}},t.rmdirSync=function(e){return e=s(e),t.root.rmdirSync(e)},t.mkdir=function(e,n,r){"undefined"==typeof r&&(r=p),"function"==typeof n&&(r=n,n=511);var o=u(r,1);try{e=s(e),t.root.mkdir(e,n,o)}catch(i){o(i)}},t.mkdirSync=function(e,n){return"undefined"==typeof n&&(n=511),n="string"==typeof n?parseInt(n,8):n,e=s(e),t.root.mkdirSync(e,n)},t.readdir=function(e,n){"undefined"==typeof n&&(n=p);var r=u(n,2);try{e=s(e),t.root.readdir(e,r)}catch(o){r(o)}},t.readdirSync=function(e){return e=s(e),t.root.readdirSync(e)},t.link=function(e,n,r){"undefined"==typeof r&&(r=p);var o=u(r,1);try{e=s(e),n=s(n),t.root.link(e,n,o)}catch(i){o(i)}},t.linkSync=function(e,n){return e=s(e),n=s(n),t.root.linkSync(e,n)},t.symlink=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i="string"==typeof r?r:"file";o="function"==typeof r?r:o;var a=u(o,1);try{if("file"!==i&&"dir"!==i)return a(new w(g.EINVAL,"Invalid type: "+i));e=s(e),n=s(n),t.root.symlink(e,n,i,a)}catch(f){a(f)}},t.symlinkSync=function(e,n,r){if(null==r)r="file";else if("file"!==r&&"dir"!==r)throw new w(g.EINVAL,"Invalid type: "+r);return e=s(e),n=s(n),t.root.symlinkSync(e,n,r)},t.readlink=function(e,n){"undefined"==typeof n&&(n=p);var r=u(n,2);try{e=s(e),t.root.readlink(e,r)}catch(o){r(o)}},t.readlinkSync=function(e){return e=s(e),t.root.readlinkSync(e)},t.chown=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i=u(o,1);try{e=s(e),t.root.chown(e,!1,n,r,i)}catch(a){i(a)}},t.chownSync=function(e,n,r){e=s(e),t.root.chownSync(e,!1,n,r)},t.lchown=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i=u(o,1);try{e=s(e),t.root.chown(e,!0,n,r,i)}catch(a){i(a)}},t.lchownSync=function(e,n,r){return e=s(e),t.root.chownSync(e,!0,n,r)},t.chmod=function(e,n,r){"undefined"==typeof r&&(r=p);var o=u(r,1);try{n="string"==typeof n?parseInt(n,8):n,e=s(e),t.root.chmod(e,!1,n,o)}catch(i){o(i)}},t.chmodSync=function(e,n){return n="string"==typeof n?parseInt(n,8):n,e=s(e),t.root.chmodSync(e,!1,n)},t.lchmod=function(e,n,r){"undefined"==typeof r&&(r=p);var o=u(r,1);try{n="string"==typeof n?parseInt(n,8):n,e=s(e),t.root.chmod(e,!0,n,o)}catch(i){o(i)}},t.lchmodSync=function(e,n){return e=s(e),n="string"==typeof n?parseInt(n,8):n,t.root.chmodSync(e,!0,n)},t.utimes=function(e,n,r,o){"undefined"==typeof o&&(o=p);var i=u(o,1);try{e=s(e),"number"==typeof n&&(n=new Date(1e3*n)),"number"==typeof r&&(r=new Date(1e3*r)),t.root.utimes(e,n,r,i)}catch(a){i(a)}},t.utimesSync=function(e,n,r){return e=s(e),"number"==typeof n&&(n=new Date(1e3*n)),"number"==typeof r&&(r=new Date(1e3*r)),t.root.utimesSync(e,n,r)},t.realpath=function(e,n,r){"undefined"==typeof r&&(r=p);var o="object"==typeof n?n:{};r="function"==typeof n?n:p;var i=u(r,2);try{e=s(e),t.root.realpath(e,o,i)}catch(a){i(a)}},t.realpathSync=function(e,n){return"undefined"==typeof n&&(n={}),e=s(e),t.root.realpathSync(e,n)},t.root=null,t}();e.fs=S}),u("core/browserfs",["require","exports","./buffer","./node_fs","./node_path","./node_process"],function(t,e,n,r,o,i){function u(t){t.Buffer=s.Buffer,t.process=l.process;var n=null!=t.require?t.require:null;t.require=function(t){var r=e.require(t);return null==r?n.apply(null,Array.prototype.slice.call(arguments,0)):r}}function a(t,n){e.FileSystem[t]=n}function t(t){switch(t){case"fs":return c.fs;case"path":return p.path;case"buffer":return s.Buffer;case"process":return l.process;default:return e.FileSystem[t]}}function f(t){return c.fs._initialize(t)}var s=n,c=r,p=o,l=i;e.install=u,e.FileSystem={},e.registerFileSystem=a,e.require=t,e.initialize=f}),u("core/file",["require","exports","./api_error"],function(t,e,n){var r=n,o=r.ApiError,i=r.ErrorCode,u=function(){function t(){}return t.prototype.sync=function(t){t(new o(i.ENOTSUP))},t.prototype.syncSync=function(){throw new o(i.ENOTSUP)},t.prototype.datasync=function(t){this.sync(t)},t.prototype.datasyncSync=function(){return this.syncSync()},t.prototype.chown=function(t,e,n){n(new o(i.ENOTSUP))},t.prototype.chownSync=function(){throw new o(i.ENOTSUP)},t.prototype.chmod=function(t,e){e(new o(i.ENOTSUP))},t.prototype.chmodSync=function(){throw new o(i.ENOTSUP)},t.prototype.utimes=function(t,e,n){n(new o(i.ENOTSUP))},t.prototype.utimesSync=function(){throw new o(i.ENOTSUP)},t}();e.BaseFile=u});var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("generic/preload_file",["require","exports","../core/file","../core/buffer","../core/api_error","../core/node_fs"],function(t,e,n,r,o,i){var u=n,f=r,s=o,c=i,p=s.ApiError,l=s.ErrorCode,h=c.fs,y=f.Buffer,d=function(t){function e(e,n,r,o,i){if(t.call(this),this._pos=0,this._fs=e,this._path=n,this._flag=r,this._stat=o,this._buffer=null!=i?i:new y(0),this._stat.size!==this._buffer.length)throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return a(e,t),e.prototype.getPath=function(){return this._path},e.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},e.prototype.advancePos=function(t){return this._pos+=t},e.prototype.setPos=function(t){return this._pos=t},e.prototype.sync=function(t){try{this.syncSync(),t()}catch(e){t(e)}},e.prototype.syncSync=function(){throw new p(l.ENOTSUP)},e.prototype.close=function(t){try{this.closeSync(),t()}catch(e){t(e)}},e.prototype.closeSync=function(){throw new p(l.ENOTSUP)},e.prototype.stat=function(t){try{t(null,this._stat.clone())}catch(e){t(e)}},e.prototype.statSync=function(){return this._stat.clone()},e.prototype.truncate=function(t,e){try{this.truncateSync(t),this._flag.isSynchronous()&&!h.getRootFS().supportsSynch()&&this.sync(e),e()}catch(n){return e(n)}},e.prototype.truncateSync=function(t){if(!this._flag.isWriteable())throw new p(l.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,t>this._buffer.length){var e=new y(t-this._buffer.length);return e.fill(0),this.writeSync(e,0,e.length,this._buffer.length),this._flag.isSynchronous()&&h.getRootFS().supportsSynch()&&this.syncSync(),void 0}this._stat.size=t;var n=new y(t);this._buffer.copy(n,0,0,t),this._buffer=n,this._flag.isSynchronous()&&h.getRootFS().supportsSynch()&&this.syncSync()},e.prototype.write=function(t,e,n,r,o){try{o(null,this.writeSync(t,e,n,r),t)}catch(i){o(i)}},e.prototype.writeSync=function(t,e,n,r){if(null==r&&(r=this.getPos()),!this._flag.isWriteable())throw new p(l.EPERM,"File not opened with a writeable mode.");var o=r+n;if(o>this._stat.size&&(this._stat.size=o,o>this._buffer.length)){var i=new y(o);this._buffer.copy(i),this._buffer=i}var u=t.copy(this._buffer,r,e,e+n);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),u):(this.setPos(r+u),u)},e.prototype.read=function(t,e,n,r,o){try{o(null,this.readSync(t,e,n,r),t)}catch(i){o(i)}},e.prototype.readSync=function(t,e,n,r){if(!this._flag.isReadable())throw new p(l.EPERM,"File not opened with a readable mode.");null==r&&(r=this.getPos());var o=r+n;o>this._stat.size&&(n=this._stat.size-r);var i=this._buffer.copy(t,e,r,r+n);return this._stat.atime=new Date,this._pos=r+n,i},e.prototype.chmod=function(t,e){try{this.chmodSync(t),e()}catch(n){e(n)}},e.prototype.chmodSync=function(t){if(!this._fs.supportsProps())throw new p(l.ENOTSUP);this._stat.chmod(t),this.syncSync()},e}(u.BaseFile);e.PreloadFile=d;var w=function(t){function e(e,n,r,o,i){t.call(this,e,n,r,o,i)}return a(e,t),e.prototype.sync=function(t){t()},e.prototype.syncSync=function(){},e.prototype.close=function(t){t()},e.prototype.closeSync=function(){},e}(d);e.NoSyncFile=w});var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("core/file_system",["require","exports","./api_error","./file_flag","./node_path","./buffer"],function(t,e,n,r,o,i){var u=n,f=r,s=o,c=i,p=u.ApiError,l=u.ErrorCode,h=s.path,y=c.Buffer,d=function(){function t(){}return t.prototype.supportsLinks=function(){return!1},t.prototype.diskSpace=function(t,e){e(0,0)},t.prototype.open=function(t,e,n,r){r(new p(l.ENOTSUP))},t.prototype.rename=function(t,e,n){n(new p(l.ENOTSUP))},t.prototype.renameSync=function(){throw new p(l.ENOTSUP)},t.prototype.stat=function(t,e,n){n(new p(l.ENOTSUP))},t.prototype.statSync=function(){throw new p(l.ENOTSUP)},t.prototype.openSync=function(){throw new p(l.ENOTSUP)},t.prototype.unlink=function(t,e){e(new p(l.ENOTSUP))},t.prototype.unlinkSync=function(){throw new p(l.ENOTSUP)},t.prototype.rmdir=function(t,e){e(new p(l.ENOTSUP))},t.prototype.rmdirSync=function(){throw new p(l.ENOTSUP)},t.prototype.mkdir=function(t,e,n){n(new p(l.ENOTSUP))},t.prototype.mkdirSync=function(){throw new p(l.ENOTSUP)},t.prototype.readdir=function(t,e){e(new p(l.ENOTSUP))},t.prototype.readdirSync=function(){throw new p(l.ENOTSUP)},t.prototype.exists=function(t,e){this.stat(t,null,function(t){e(null==t)})},t.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch(e){return!1}},t.prototype.realpath=function(t,e,n){if(this.supportsLinks())for(var r=t.split(h.sep),o=0;o<r.length;o++){var i=r.slice(0,o+1);r[o]=h.join.apply(null,i)}else this.exists(t,function(e){e?n(null,t):n(new p(l.ENOENT,"File "+t+" not found."))})},t.prototype.realpathSync=function(t){if(!this.supportsLinks()){if(this.existsSync(t))return t;throw new p(l.ENOENT,"File "+t+" not found.")}for(var e=t.split(h.sep),n=0;n<e.length;n++){var r=e.slice(0,n+1);e[n]=h.join.apply(null,r)}},t.prototype.truncate=function(t,e,n){this.open(t,f.FileFlag.getFileFlag("w"),420,function(t,r){return t?n(t):(r.truncate(e,function(t){r.close(function(e){n(t||e)})}),void 0)})},t.prototype.truncateSync=function(t,e){var n=this.openSync(t,f.FileFlag.getFileFlag("w"),420);try{n.truncateSync(e)}catch(r){throw r}finally{n.closeSync()}},t.prototype.readFile=function(t,e,n,r){var o=r;this.open(t,n,420,function(t,n){return t?r(t):(r=function(t,e){n.close(function(n){return null==t&&(t=n),o(t,e)})},n.stat(function(t,o){if(null!=t)return r(t);var i=new y(o.size);n.read(i,0,o.size,0,function(t){if(null!=t)return r(t);if(null===e)return r(t,i);try{r(null,i.toString(e))}catch(n){r(n)}})}),void 0)})},t.prototype.readFileSync=function(t,e,n){var r=this.openSync(t,n,420);try{var o=r.statSync(),i=new y(o.size);return r.readSync(i,0,o.size,0),r.closeSync(),null===e?i:i.toString(e)}catch(u){throw r.closeSync(),u}},t.prototype.writeFile=function(t,e,n,r,o,i){var u=i;this.open(t,r,420,function(t,r){if(null!=t)return i(t);i=function(t){r.close(function(e){u(null!=t?t:e)})};try{"string"==typeof e&&(e=new y(e,n))}catch(o){return i(o)}r.write(e,0,e.length,0,i)})},t.prototype.writeFileSync=function(t,e,n,r,o){var i=this.openSync(t,r,o);try{"string"==typeof e&&(e=new y(e,n)),i.writeSync(e,0,e.length,0)}finally{i.closeSync()}},t.prototype.appendFile=function(t,e,n,r,o,i){var u=i;this.open(t,r,o,function(t,r){return null!=t?i(t):(i=function(t){r.close(function(e){u(null!=t?t:e)})},"string"==typeof e&&(e=new y(e,n)),r.write(e,0,e.length,null,i),void 0)})},t.prototype.appendFileSync=function(t,e,n,r,o){var i=this.openSync(t,r,o);try{"string"==typeof e&&(e=new y(e,n)),i.writeSync(e,0,e.length,null)}finally{i.closeSync()}},t.prototype.chmod=function(t,e,n,r){r(new p(l.ENOTSUP))},t.prototype.chmodSync=function(){throw new p(l.ENOTSUP)},t.prototype.chown=function(t,e,n,r,o){o(new p(l.ENOTSUP))},t.prototype.chownSync=function(){throw new p(l.ENOTSUP)},t.prototype.utimes=function(t,e,n,r){r(new p(l.ENOTSUP))},t.prototype.utimesSync=function(){throw new p(l.ENOTSUP)},t.prototype.link=function(t,e,n){n(new p(l.ENOTSUP))},t.prototype.linkSync=function(){throw new p(l.ENOTSUP)},t.prototype.symlink=function(t,e,n,r){r(new p(l.ENOTSUP))},t.prototype.symlinkSync=function(){throw new p(l.ENOTSUP)},t.prototype.readlink=function(t,e){e(new p(l.ENOTSUP))},t.prototype.readlinkSync=function(){throw new p(l.ENOTSUP)},t}();e.BaseFileSystem=d;var w=function(t){function e(){t.apply(this,arguments)}return a(e,t),e.prototype.supportsSynch=function(){return!0},e.prototype.rename=function(t,e,n){try{this.renameSync(t,e),n()}catch(r){n(r)}},e.prototype.stat=function(t,e,n){try{n(null,this.statSync(t,e))}catch(r){n(r)}},e.prototype.open=function(t,e,n,r){try{r(null,this.openSync(t,e,n))}catch(o){r(o)}},e.prototype.unlink=function(t,e){try{this.unlinkSync(t),e()}catch(n){e(n)}},e.prototype.rmdir=function(t,e){try{this.rmdirSync(t),e()}catch(n){e(n)}},e.prototype.mkdir=function(t,e,n){try{this.mkdirSync(t,e),n()}catch(r){n(r)}},e.prototype.readdir=function(t,e){try{e(null,this.readdirSync(t))}catch(n){e(n)}},e.prototype.chmod=function(t,e,n,r){try{this.chmodSync(t,e,n),r()}catch(o){r(o)}},e.prototype.chown=function(t,e,n,r,o){try{this.chownSync(t,e,n,r),o()}catch(i){o(i)}},e.prototype.utimes=function(t,e,n,r){try{this.utimesSync(t,e,n),r()}catch(o){r(o)}},e.prototype.link=function(t,e,n){try{this.linkSync(t,e),n()}catch(r){n(r)}},e.prototype.symlink=function(t,e,n,r){try{this.symlinkSync(t,e,n),r()}catch(o){r(o)}},e.prototype.readlink=function(t,e){try{e(null,this.readlinkSync(t))}catch(n){e(n)}},e}(d);e.SynchronousFileSystem=w}),u("core/node_fs_stats",["require","exports"],function(t,e){!function(t){t[t.FILE=32768]="FILE",t[t.DIRECTORY=16384]="DIRECTORY",t[t.SYMLINK=40960]="SYMLINK"}(e.FileType||(e.FileType={}));var n=e.FileType,r=function(){function t(t,e,r,o,i,u){if("undefined"==typeof o&&(o=new Date),"undefined"==typeof i&&(i=new Date),"undefined"==typeof u&&(u=new Date),this.size=e,this.mode=r,this.atime=o,this.mtime=i,this.ctime=u,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,null==this.mode)switch(t){case n.FILE:this.mode=420;break;case n.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(e/512),this.mode|=t}return t.prototype.clone=function(){return new t(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},t.prototype.isFile=function(){return(61440&this.mode)===n.FILE},t.prototype.isDirectory=function(){return(61440&this.mode)===n.DIRECTORY},t.prototype.isSymbolicLink=function(){return(61440&this.mode)===n.SYMLINK},t.prototype.chmod=function(t){this.mode=61440&this.mode|t},t.prototype.isSocket=function(){return!1},t.prototype.isBlockDevice=function(){return!1},t.prototype.isCharacterDevice=function(){return!1},t.prototype.isFIFO=function(){return!1},t}();e.Stats=r}),function(){function t(t){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,t.apply(e,arguments)}}var e,n,r={};e=this,null!=e&&(n=e.async),r.noConflict=function(){return e.async=n,r};var o=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n+=1)e(t[n],n,t)},i=function(t,e){if(t.map)return t.map(e);var n=[];return o(t,function(t,r,o){n.push(e(t,r,o))}),n},a=function(t,e,n){return t.reduce?t.reduce(e,n):(o(t,function(t,r,o){n=e(n,t,r,o)}),n)},f=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};r.nextTick="undefined"!=typeof process&&process.nextTick?process.nextTick:"function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},r.each=function(e,n,r){if(r=r||function(){},!e.length)return r();var i=0;o(e,function(o){n(o,t(function(t){t?(r(t),r=function(){}):(i+=1,i>=e.length&&r(null))}))})},r.forEach=r.each,r.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var o=0,i=function(){var u=!0;e(t[o],function(e){e?(n(e),n=function(){}):(o+=1,o>=t.length?n(null):u?r.nextTick(i):i())}),u=!1};i()},r.forEachSeries=r.eachSeries,r.eachLimit=function(t,e,n,r){var o=s(e);o.apply(null,[t,n,r])},r.forEachLimit=r.eachLimit;var s=function(t){return function(e,n,r){if(r=r||function(){},!e.length||0>=t)return r();var o=0,i=0,u=0;!function a(){if(o>=e.length)return r();for(;t>u&&i<e.length;)i+=1,u+=1,n(e[i-1],function(t){t?(r(t),r=function(){}):(o+=1,u-=1,o>=e.length?r():a())})}()}},c=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[r.each].concat(e))}},p=function(t,e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[s(t)].concat(n))}},l=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[r.eachSeries].concat(e))}},h=function(t,e,n,r){var o=[];e=i(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n,r){o[t.index]=r,e(n)})},function(t){r(t,o)})};r.map=c(h),r.mapSeries=l(h),r.mapLimit=function(t,e,n,r){return y(e)(t,n,r)};var y=function(t){return p(t,h)};r.reduce=function(t,e,n,o){r.eachSeries(t,function(t,r){n(e,t,function(t,n){e=n,r(t)})},function(t){o(t,e)})},r.inject=r.reduce,r.foldl=r.reduce,r.reduceRight=function(t,e,n,o){var u=i(t,function(t){return t}).reverse();r.reduce(u,e,n,o)},r.foldr=r.reduceRight;var d=function(t,e,n,r){var o=[];e=i(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n&&o.push(t),e()})},function(){r(i(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};r.filter=c(d),r.filterSeries=l(d),r.select=r.filter,r.selectSeries=r.filterSeries;var w=function(t,e,n,r){var o=[];e=i(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n||o.push(t),e()})},function(){r(i(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};r.reject=c(w),r.rejectSeries=l(w);var g=function(t,e,n,r){t(e,function(t,e){n(t,function(n){n?(r(t),r=function(){}):e()})},function(){r()})};r.detect=c(g),r.detectSeries=l(g),r.some=function(t,e,n){r.each(t,function(t,r){e(t,function(t){t&&(n(!0),n=function(){}),r()})},function(){n(!1)})},r.any=r.some,r.every=function(t,e,n){r.each(t,function(t,r){e(t,function(t){t||(n(!1),n=function(){}),r()})},function(){n(!0)})},r.all=r.every,r.sortBy=function(t,e,n){r.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);var r=function(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0};n(null,i(e.sort(r),function(t){return t.value}))})},r.auto=function(t,e){e=e||function(){};var n=f(t);if(!n.length)return e(null);var i={},u=[],s=function(t){u.unshift(t)},c=function(t){for(var e=0;e<u.length;e+=1)if(u[e]===t)return u.splice(e,1),void 0},p=function(){o(u.slice(0),function(t){t()})};s(function(){f(i).length===n.length&&(e(null,i),e=function(){})}),o(n,function(n){var o=t[n]instanceof Function?[t[n]]:t[n],u=function(t){if(t)e(t),e=function(){};else{var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),i[n]=o,r.nextTick(p)}},f=o.slice(0,Math.abs(o.length-1))||[],l=function(){return a(f,function(t,e){return t&&i.hasOwnProperty(e)},!0)&&!i.hasOwnProperty(n)};if(l())o[o.length-1](u,i);else{var h=function(){l()&&(c(h),o[o.length-1](u,i))};s(h)}})},r.waterfall=function(t,e){if(e=e||function(){},!t.length)return e();var n=function(t){return function(o){if(o)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),u=t.next();u?i.push(n(u)):i.push(e),r.nextTick(function(){t.apply(null,i)})}}};n(r.iterator(t))()};var v=function(t,e,n){if(n=n||function(){},e.constructor===Array)t.map(e,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},n);else{var r={};t.each(f(e),function(t,n){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),r[t]=o,n(e)})},function(t){n(t,r)})}};r.parallel=function(t,e){v({map:r.map,each:r.each},t,e)},r.parallelLimit=function(t,e,n){v({map:y(e),each:s(e)},t,n)},r.series=function(t,e){if(e=e||function(){},t.constructor===Array)r.mapSeries(t,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},e);else{var n={};r.eachSeries(f(t),function(e,r){t[e](function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),n[e]=o,r(t)})},function(t){e(t,n)})}},r.iterator=function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)},r.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var E=function(t,e,n,r){var o=[];t(e,function(t,e){n(t,function(t,n){o=o.concat(n||[]),e(t)})},function(t){r(t,o)})};r.concat=c(E),r.concatSeries=l(E),r.whilst=function(t,e,n){if(t()){var o=!0;e(function(i){return i?n(i):(o?r.nextTick(function(){r.whilst(t,e,n)}):r.whilst(t,e,n),void 0)}),o=!1}else n()},r.doWhilst=function(t,e,n){var o=!0;t(function(i){return i?n(i):(e()?o?r.nextTick(function(){r.doWhilst(t,e,n)}):r.doWhilst(t,e,n):n(),void 0)}),o=!1},r.until=function(t,e,n){if(t())n();else{var o=!0;e(function(i){return i?n(i):(o?r.nextTick(function(){r.until(t,e,n)}):r.until(t,e,n),void 0)}),o=!1}},r.doUntil=function(t,e,n){var o=!0;t(function(i){return i?n(i):(e()?n():o?r.nextTick(function(){r.doUntil(t,e,n)}):r.doUntil(t,e,n),void 0)}),o=!1},r.queue=function(e,n){function i(t,e,i,u){e.constructor!==Array&&(e=[e]),o(e,function(e){var o={data:e,callback:"function"==typeof u?u:null};i?t.tasks.unshift(o):t.tasks.push(o),t.saturated&&t.tasks.length===n&&t.saturated(),r.nextTick(t.process)})}var u=0,a={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(t,e){i(a,t,!1,e)},unshift:function(t,e){i(a,t,!0,e)},process:function(){if(u<a.concurrency&&a.tasks.length){var n=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),u+=1;var o=!0,i=function(){u-=1,n.callback&&n.callback.apply(n,arguments),a.drain&&0===a.tasks.length+u&&a.drain(),a.process()},f=t(function(){var t=arguments;o?r.nextTick(function(){i.apply(null,t)}):i.apply(null,arguments)});e(n.data,f),o=!1}},length:function(){return a.tasks.length},running:function(){return u
}};return a},r.cargo=function(t,e){var n=!1,u=[],a={tasks:u,payload:e,saturated:null,empty:null,drain:null,push:function(t,n){t.constructor!==Array&&(t=[t]),o(t,function(t){u.push({data:t,callback:"function"==typeof n?n:null}),a.saturated&&u.length===e&&a.saturated()}),r.nextTick(a.process)},process:function f(){if(!n){if(0===u.length)return a.drain&&a.drain(),void 0;var r="number"==typeof e?u.splice(0,e):u.splice(0),s=i(r,function(t){return t.data});a.empty&&a.empty(),n=!0,t(s,function(){n=!1;var t=arguments;o(r,function(e){e.callback&&e.callback.apply(null,t)}),f()})}},length:function(){return u.length},running:function(){return n}};return a};var m=function(t){return function(e){var n=Array.prototype.slice.call(arguments,1);e.apply(null,n.concat([function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&o(n,function(e){console[t](e)}))}]))}};r.log=m("log"),r.dir=m("dir"),r.memoize=function(t,e){var n={},r={};e=e||function(t){return t};var o=function(){var o=Array.prototype.slice.call(arguments),i=o.pop(),u=e.apply(null,o);u in n?i.apply(null,n[u]):u in r?r[u].push(i):(r[u]=[i],t.apply(null,o.concat([function(){n[u]=arguments;var t=r[u];delete r[u];for(var e=0,o=t.length;o>e;e++)t[e].apply(null,arguments)}])))};return o.memo=n,o.unmemoized=t,o},r.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},r.times=function(t,e,n){for(var o=[],i=0;t>i;i++)o.push(i);return r.map(o,e,n)},r.timesSeries=function(t,e,n){for(var o=[],i=0;t>i;i++)o.push(i);return r.mapSeries(o,e,n)},r.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var e=this,n=Array.prototype.slice.call(arguments),o=n.pop();r.reduce(t,n,function(t,n,r){n.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);r(t,e)}]))},function(t,n){o.apply(e,[t].concat(n))})}},"undefined"!=typeof u&&u.amd?u("backend/../../vendor/async/lib/async",[],function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:e.async=r}();var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("backend/dropbox",["require","exports","../generic/preload_file","../core/file_system","../core/node_fs_stats","../core/buffer","../core/api_error","../core/node_path","../core/browserfs","../core/buffer_core_arraybuffer","../../vendor/async/lib/async"],function(t,e,n,r,o,i,u,f,s,c){var p=n,l=r,h=o,y=i,d=u,w=f,g=s,v=c,E=y.Buffer,m=h.Stats,S=d.ApiError,I=d.ErrorCode,_=w.path,b=h.FileType;window.db=window.Dropbox;var F=t("../../vendor/async/lib/async"),E=y.Buffer,T=function(t){function e(e,n,r,o,i){t.call(this,e,n,r,o,i)}return a(e,t),e.prototype.sync=function(t){var e=this._buffer,n=this._buffer.getBufferCore();n instanceof v.BufferCoreArrayBuffer||(e=new E(this._buffer.length),this._buffer.copy(e),n=e.getBufferCore());var r=n.getDataView(),o=new DataView(r.buffer,r.byteOffset+e.getOffset(),e.length);this._fs._writeFileStrict(this._path,o,t)},e.prototype.close=function(t){this.sync(t)},e}(p.PreloadFile);e.DropboxFile=T;var N=function(t){function e(e){t.call(this),this.client=e}return a(e,t),e.prototype.getName=function(){return"Dropbox"},e.isAvailable=function(){return"undefined"!=typeof db},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!1},e.prototype.empty=function(t){var e=this;e.client.readdir("/",function(n,r,o,i){if(n)t(e.convert(n));else{var u=function(t,n){e.client.remove(t.path,function(t){n(t?e.convert(t):t)})},a=function(n){n?t(e.convert(n)):t()};F.each(i,u,a)}})},e.prototype.rename=function(t,e,n){var r=this;r.client.move(t,e,function(r){if(r){var o=r.response.error.indexOf(t)>-1?t:e;n(new S(I.ENOENT,o+" doesn't exist"))}else n()})},e.prototype.stat=function(t,e,n){var r=this;r.client.stat(t,function(e,o){if(!(e||null!=o&&o.isRemoved)){var i=new m(r._statType(o),o.size);return n(null,i)}n(new S(I.ENOENT,t+" doesn't exist"))})},e.prototype.open=function(t,e,n,r){var o=this;o.client.readFile(t,{arrayBuffer:!0},function(n,i,u){if(!n){var a;a=null===i?new E(0):new E(i);var f=o._makeFile(t,e,u,a);return r(null,f)}if(e.isReadable())r(new S(I.ENOENT,t+" doesn't exist"));else switch(n.status){case 0:return console.error("No connection");case 404:var s=new ArrayBuffer(0);return o._writeFileStrict(t,s,function(n,i){if(n)r(n);else{var u=o._makeFile(t,e,i,new E(s));r(null,u)}});default:return console.log("Unhandled error: "+n)}})},e.prototype._writeFileStrict=function(t,e,n){var r=this,o=_.dirname(t);r.stat(o,!1,function(i){i?n(new S(I.ENOENT,"Can't create "+t+" because "+o+" doesn't exist")):r.client.writeFile(t,e,function(t,e){t?n(r.convert(t)):n(null,e)})})},e.prototype._statType=function(t){return t.isFile?b.FILE:b.DIRECTORY},e.prototype._makeFile=function(t,e,n,r){var o=this._statType(n),i=new m(o,n.size);return new T(this,t,e,i,r)},e.prototype._remove=function(t,e,n){var r=this;r.client.stat(t,function(o,i){o?e(new S(I.ENOENT,t+" doesn't exist")):i.isFile&&!n?e(new S(I.ENOTDIR,t+" is a file.")):!i.isFile&&n?e(new S(I.EISDIR,t+" is a directory.")):r.client.remove(t,function(n){n?e(new S(I.EIO,"Failed to remove "+t)):e(null)})})},e.prototype.unlink=function(t,e){this._remove(t,e,!0)},e.prototype.rmdir=function(t,e){this._remove(t,e,!1)},e.prototype.mkdir=function(t,e,n){var r=this,o=_.dirname(t);r.client.stat(o,function(e){e?n(new S(I.ENOENT,"Can't create "+t+" because "+o+" doesn't exist")):r.client.mkdir(t,function(e){e?n(new S(I.EEXIST,t+" already exists")):n(null)})})},e.prototype.readdir=function(t,e){var n=this;this.client.readdir(t,function(t,r){return t?e(n.convert(t)):e(null,r)})},e.prototype.convert=function(t,e){switch("undefined"==typeof e&&(e=""),t.status){case 400:return new S(I.EINVAL,e);case 401:case 403:return new S(I.EIO,e);case 404:return new S(I.ENOENT,e);case 405:return new S(I.ENOTSUP,e);case 0:case 304:case 406:case 409:default:return new S(I.EIO,e)}},e}(l.BaseFileSystem);e.Dropbox=N,g.registerFileSystem("Dropbox",N)});var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("backend/html5fs",["require","exports","../generic/preload_file","../core/file_system","../core/api_error","../core/file_flag","../core/node_fs_stats","../core/buffer","../core/browserfs","../core/buffer_core_arraybuffer","../../vendor/async/lib/async"],function(t,e,n,r,o,i,u,f,s,c){function p(t,e,n,r){if("undefined"!=typeof navigator.webkitPersistentStorage)switch(t){case window.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(e,n,r);break;case window.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(e,n,r);break;default:r(null)}else window.webkitStorageInfo.requestQuota(t,e,n,r)}function l(t){return Array.prototype.slice.call(t||[],0)}var h=n,y=r,d=o,w=i,g=u,v=f,E=s,m=c,S=v.Buffer,I=g.Stats,_=g.FileType,b=d.ApiError,F=d.ErrorCode,T=w.ActionType,N=t("../../vendor/async/lib/async"),O=window.webkitRequestFileSystem||window.requestFileSystem||null,A=function(t){function e(e,n,r,o,i){t.call(this,e,n,r,o,i)}return a(e,t),e.prototype.sync=function(t){var e=this,n={create:!1},r=this._fs,o=function(n){n.createWriter(function(n){var o=e._buffer,i=e._buffer.getBufferCore();i instanceof m.BufferCoreArrayBuffer||(o=new S(e._buffer.length),e._buffer.copy(o),i=o.getBufferCore());var u=i.getDataView(),a=new DataView(u.buffer,u.byteOffset+o.getOffset(),o.length),f=new Blob([a]),s=f.size;n.onwriteend=function(){n.onwriteend=null,n.truncate(s),t()},n.onerror=function(e){t(r.convert(e))},n.write(f)})},i=function(e){t(r.convert(e))};r.fs.root.getFile(this._path,n,o,i)},e.prototype.close=function(t){this.sync(t)},e}(h.PreloadFile);e.HTML5FSFile=A;var x=function(t){function e(e,n){t.call(this),this.size=null!=e?e:5,this.type=null!=n?n:window.PERSISTENT;var r=1024,o=r*r;this.size*=o}return a(e,t),e.prototype.getName=function(){return"HTML5 FileSystem"},e.isAvailable=function(){return null!=O},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!1},e.prototype.convert=function(t,e){switch("undefined"==typeof e&&(e=""),t.name){case"QuotaExceededError":return new b(F.ENOSPC,e);case"NotFoundError":return new b(F.ENOENT,e);case"SecurityError":return new b(F.EACCES,e);case"SyntaxError":case"TypeMismatchError":return new b(F.EINVAL,e);default:return console.log("Unknown Error: "+t.name),new b(F.EINVAL,e)}},e.prototype.convertErrorEvent=function(t,e){return"undefined"==typeof e&&(e=""),new b(F.ENOENT,t.message+"; "+e)},e.prototype.allocate=function(t){"undefined"==typeof t&&(t=function(){});var e=this,n=function(n){e.fs=n,t()},r=function(n){t(e.convert(n))};this.type===window.PERSISTENT?p(this.type,this.size,function(t){O(this.type,t,n,r)},r):O(this.type,this.size,n,r)},e.prototype.empty=function(t){var e=this;e._readdir("/",function(n,r){if(n)console.error("Failed to empty FS"),t(n);else{var o=function(){n?(console.error("Failed to empty FS"),t(n)):t()},i=function(t,n){var r=function(){n()},o=function(r){n(e.convert(r,t.fullPath))};t.isFile?t.remove(r,o):t.removeRecursively(r,o)};N.each(r,i,o)}})},e.prototype.rename=function(t,e,n){var r=this,o=function(r){r.moveTo(t,e),n()},i=function(o){n(r.convert(o,"Failed to rename "+t+" to "+e+"."))};this.fs.root.getFile(t,{},o,i)},e.prototype.stat=function(t,e,n){var r=this,o={create:!1},i=function(t){var e=function(t){var e=new I(_.FILE,t.size);n(null,e)};t.file(e,a)},u=function(){var t=4096,e=new I(_.DIRECTORY,t);n(null,e)},a=function(e){n(r.convert(e,t))},f=function(){r.fs.root.getDirectory(t,o,u,a)};this.fs.root.getFile(t,o,i,f)},e.prototype.open=function(t,e,n,r){var o=this,i={create:e.pathNotExistsAction()===T.CREATE_FILE,exclusive:e.isExclusive()},u=function(e){r(o.convertErrorEvent(e,t))},a=function(e){r(o.convert(e,t))},f=function(n){var i=function(n){var i=new FileReader;i.onloadend=function(){var u=o._makeFile(t,e,n,i.result);r(null,u)},i.onerror=u,i.readAsArrayBuffer(n)};n.file(i,a)};this.fs.root.getFile(t,i,f,u)},e.prototype._statType=function(t){return t.isFile?_.FILE:_.DIRECTORY},e.prototype._makeFile=function(t,e,n,r){"undefined"==typeof r&&(r=new ArrayBuffer(0));var o=new I(_.FILE,n.size),i=new S(r);return new A(this,t,e,o,i)},e.prototype._remove=function(t,e,n){var r=this,o=function(n){var o=function(){e()},i=function(n){e(r.convert(n,t))};n.remove(o,i)},i=function(n){e(r.convert(n,t))},u={create:!1};n?this.fs.root.getFile(t,u,o,i):this.fs.root.getDirectory(t,u,o,i)},e.prototype.unlink=function(t,e){this._remove(t,e,!0)},e.prototype.rmdir=function(t,e){this._remove(t,e,!1)},e.prototype.mkdir=function(t,e,n){var r=this,o={create:!0,exclusive:!0},i=function(){n()},u=function(e){n(r.convert(e,t))};this.fs.root.getDirectory(t,o,i,u)},e.prototype._readdir=function(t,e){var n=this,r=this.fs.root.createReader(),o=[],i=function(r){e(n.convert(r,t))},u=function(){r.readEntries(function(t){t.length?(o=o.concat(l(t)),u()):e(null,o)},i)};u()},e.prototype.readdir=function(t,e){this._readdir(t,function(t,n){if(null!=t)return e(t);for(var r=[],o=0;o<n.length;o++)r.push(n[o].name);e(null,r)})},e}(y.BaseFileSystem);e.HTML5FS=x,E.registerFileSystem("HTML5FS",x)}),u("generic/file_index",["require","exports","../core/node_fs_stats","../core/node_path"],function(t,e,n,r){var o=n,i=r,u=o.Stats,a=i.path,f=function(){function t(){this._index={},this.addPath("/",new s)}return t.prototype._split_path=function(t){var e=a.dirname(t),n=t.substr(e.length+("/"===e?0:1));return[e,n]},t.prototype.fileIterator=function(t){for(var e in this._index)for(var n=this._index[e],r=n.getListing(),o=0;o<r.length;o++){var i=n.getItem(r[o]);i.isFile()&&t(i)}},t.prototype.addPath=function(t,e){if(null==e)throw new Error("Inode must be specified");if("/"!==t[0])throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===e;var n=this._split_path(t),r=n[0],o=n[1],i=this._index[r];return void 0!==i||"/"===t||(i=new s,this.addPath(r,i))?"/"===t||i.addItem(o,e)?(e.isFile()||(this._index[t]=e),!0):!1:!1},t.prototype.removePath=function(t){var e=this._split_path(t),n=e[0],r=e[1],o=this._index[n];if(void 0===o)return null;var i=o.remItem(r);if(null===i)return null;if(!i.isFile()){for(var u=i,a=u.getListing(),f=0;f<a.length;f++)this.removePath(t+"/"+a[f]);"/"!==t&&delete this._index[t]}return i},t.prototype.ls=function(t){var e=this._index[t];return void 0===e?null:e.getListing()},t.prototype.getInode=function(t){var e=this._split_path(t),n=e[0],r=e[1],o=this._index[n];return void 0===o?null:n===t?o:o.getItem(r)},t.from_listing=function(e){var n=new t,r=new s;n._index["/"]=r;for(var i=[["",e,r]];i.length>0;){var a,f=i.pop(),c=f[0],p=f[1],l=f[2];for(var h in p){var y=p[h],d=""+c+"/"+h;null!=y?(n._index[d]=a=new s,i.push([d,y,a])):a=new u(o.FileType.FILE,-1),null!=l&&(l._ls[h]=a)}}return n},t}();e.FileIndex=f;var s=function(){function t(){this._ls={}}return t.prototype.isFile=function(){return!1},t.prototype.isDirectory=function(){return!0},t.prototype.getStats=function(){return new u(o.FileType.DIRECTORY,4096)},t.prototype.getListing=function(){return Object.keys(this._ls)},t.prototype.getItem=function(t){var e;return null!=(e=this._ls[t])?e:null},t.prototype.addItem=function(t,e){return t in this._ls?!1:(this._ls[t]=e,!0)},t.prototype.remItem=function(t){var e=this._ls[t];return void 0===e?null:(delete this._ls[t],e)},t}();e.DirInode=s});var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("generic/indexed_filesystem",["require","exports","../core/file_system","./file_index","../core/file_flag","../core/node_fs_stats","../core/api_error","../core/node_path"],function(t,e,n,r,o,i,u,f){var s=n,c=r,p=o,l=i,h=u,y=f,d=h.ApiError,w=h.ErrorCode,g=p.ActionType,v=l.FileType,E=l.Stats,m=p.FileFlag,S=y.path,I=c.DirInode,_=function(t){function e(e){t.call(this),this._index=e}return a(e,t),e.prototype.renameSync=function(t,e){var n=this._index.removePath(t);if(null===n)throw new d(w.ENOENT,""+t+" not found.");this._index.removePath(e),this._index.addPath(e,n)},e.prototype.statSync=function(t){var e=this._index.getInode(t);if(null===e)throw new d(w.ENOENT,""+t+" not found.");var n="function"==typeof e.getStats?e.getStats():e;return n},e.prototype.openSync=function(t,e,n){var r=this._index.getInode(t);if(null!==r){if(!r.isFile())throw new d(w.EISDIR,""+t+" is a directory.");switch(e.pathExistsAction()){case g.THROW_EXCEPTION:throw new d(w.EEXIST,""+t+" already exists.");case g.TRUNCATE_FILE:return this._truncate(t,e,r);case g.NOP:return this._fetch(t,e,r);default:throw new d(w.EINVAL,"Invalid FileFlag object.")}}else switch(e.pathNotExistsAction()){case g.CREATE_FILE:var o=S.dirname(t),i=this._index.getInode(o);if(null===i||i.isFile())throw new d(w.ENOENT,""+o+" doesn't exist.");return r=new E(v.FILE,0,n),this._create(t,e,r);case g.THROW_EXCEPTION:throw new d(w.ENOENT,""+t+" doesn't exist.");default:throw new d(w.EINVAL,"Invalid FileFlag object.")}},e.prototype.unlinkSync=function(t){var e=this._index.getInode(t);if(null===e)throw new d(w.ENOENT,""+t+" not found.");if(!e.isFile())throw new d(w.EISDIR,""+t+" is a directory, not a file.");this._index.removePath(t)},e.prototype.rmdirSync=function(t){var e=this._index.getInode(t);if(null===e)throw new d(w.ENOENT,""+t+" not found.");if(e.isFile())throw new d(w.ENOTDIR,""+t+" is a file, not a directory.");this._index.removePath(t),this._rmdirSync(t,e)},e.prototype.mkdirSync=function(t){var e=this._index.getInode(t);if(null!==e)throw new d(w.EEXIST,""+t+" already exists.");var n=S.dirname(t);if("/"!==n&&null===this._index.getInode(n))throw new d(w.ENOENT,"Can't create "+t+" because "+n+" doesn't exist.");var r=this._index.addPath(t,new I);if(!r)throw new d(w.EINVAL,"Could not add "+S+" for some reason.")},e.prototype.readdirSync=function(t){var e=this._index.getInode(t);if(null===e)throw new d(w.ENOENT,""+t+" not found.");if(e.isFile())throw new d(w.ENOTDIR,""+t+" is a file, not a directory.");return e.getListing()},e.prototype.chmodSync=function(t,e,n){var r=this.openSync(t,m.getFileFlag("r+"),420);r._stat.chmod(n),r.closeSync()},e.prototype.chownSync=function(t,e,n,r){var o=this.openSync(t,m.getFileFlag("r+"),420);o._stat.uid=n,o._stat.gid=r,o.closeSync()},e.prototype.utimesSync=function(t,e,n){var r=this.openSync(t,m.getFileFlag("r+"),420);r._stat.atime=e,r._stat.mtime=n,r.closeSync()},e.prototype._rmdirSync=function(){throw new d(w.ENOTSUP,"_rmdirSync is not implemented.")},e.prototype._create=function(){throw new d(w.ENOTSUP,"_create is not implemented.")},e.prototype._fetch=function(){throw new d(w.ENOTSUP,"_fetch is not implemented.")},e.prototype._truncate=function(){throw new d(w.ENOTSUP,"_truncate is not implemented.")},e}(s.SynchronousFileSystem);e.IndexedFileSystem=_}),u("core/util",["require","exports"],function(t,e){function n(t){var e,n,r,o,i,u;for(r=[],i=[t],e=0;0!==i.length;)if(u=i.pop(),"boolean"==typeof u)e+=4;else if("string"==typeof u)e+=2*u.length;else if("number"==typeof u)e+=8;else if("object"==typeof u&&r.indexOf(u)<0){r.push(u),e+=4;for(n in u)o=u[n],e+=2*n.length,i.push(o)}return e}e.roughSizeOfObject=n,e.isIE=null!=/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())});var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("backend/in_memory",["require","exports","../generic/indexed_filesystem","../generic/file_index","../core/buffer","../generic/preload_file","../core/util","../core/browserfs"],function(t,e,n,r,o,i,u,f){var s=n,c=r,p=o,l=i,h=u,y=f,d=p.Buffer,w=l.NoSyncFile,g=function(t){function e(){t.call(this,new c.FileIndex)}return a(e,t),e.prototype.empty=function(){this._index=new c.FileIndex},e.prototype.getName=function(){return"In-memory"},e.isAvailable=function(){return!0},e.prototype.diskSpace=function(t,e){return e(1/0,h.roughSizeOfObject(this._index))},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype._truncate=function(t,e,n){n.size=0,n.mtime=new Date;var r=n.file_data;return r._flag=e,r._buffer=new d(0),r},e.prototype._fetch=function(t,e,n){var r=n.file_data;return r._flag=e,r},e.prototype._create=function(t,e,n){var r=new w(this,t,e,n);return n.file_data=r,this._index.addPath(t,n),r},e.prototype._rmdirSync=function(){},e}(s.IndexedFileSystem);e.InMemory=g,y.registerFileSystem("InMemory",g)});var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("backend/localStorage",["require","exports","../generic/indexed_filesystem","../generic/preload_file","../core/node_fs_stats","../core/buffer","../generic/file_index","../core/string_util","../core/api_error","../core/node_path","../core/browserfs"],function(t,e,n,r,o,i,u,f,s,c,p){var l=n,h=r,y=o,d=i,w=u,g=f,v=s,E=c,m=p,S=d.Buffer,I=y.Stats,_=y.FileType,b=v.ApiError,F=v.ErrorCode,T=E.path,N=function(t){function e(){t.call(this,new w.FileIndex);for(var e=0;e<window.localStorage.length;e++){var n=window.localStorage.key(e);if("/"===n[0]){var r=window.localStorage.getItem(n);null==r&&(r="");var o=this._getFileLength(r),i=new I(_.FILE,o);this._index.addPath(n,i)}}}return a(e,t),e.prototype._getFile=function(t,e,n){var r=window.localStorage.getItem(t);return null===r?null:this._convertFromBinaryString(t,r,e,n)},e.prototype._syncSync=function(t,e,n){var r=this._convertToBinaryString(e,n);try{window.localStorage.setItem(t,r),this._index.addPath(t,n)}catch(o){throw new b(F.ENOSPC,"Unable to sync "+t)}},e.prototype.empty=function(){window.localStorage.clear(),this._index=new w.FileIndex},e.prototype.getName=function(){return"localStorage"},e.isAvailable=function(){return"undefined"!=typeof window&&null!==window&&"undefined"!=typeof window.localStorage},e.prototype.diskSpace=function(t,e){for(var n=5242880,r=0,o=0;o<window.localStorage.length;o++){var i=window.localStorage.key(o);r+=2*i.length;var u=window.localStorage.getItem(i);r+=2*u.length}if("undefined"!=typeof window.localStorage.remainingSpace){var a=window.localStorage.remainingSpace;n=r+a}e(n,r)},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!0},e.prototype.unlinkSync=function(e){t.prototype.unlinkSync.call(this,e),window.localStorage.removeItem(e)},e.prototype._truncate=function(t,e,n){return n.size=0,new x(this,t,e,n)},e.prototype._fetch=function(t,e,n){return this._getFile(t,e,n)},e.prototype._create=function(t,e,n){return new x(this,t,e,n)},e.prototype._rmdirSync=function(t,e){for(var n=e.getListing(),r=T.sep,o=0;o<n.length;o++){var i=n[o];window.localStorage.removeItem(""+t+r+i)}},e.prototype._convertToBinaryString=function(){throw new b(F.ENOTSUP,"LocalStorageAbstract is an abstract class.")},e.prototype._convertFromBinaryString=function(){throw new b(F.ENOTSUP,"LocalStorageAbstract is an abstract class.")},e.prototype._getFileLength=function(){throw new b(F.ENOTSUP,"LocalStorageAbstract is an abstract class.")},e}(l.IndexedFileSystem);e.LocalStorageAbstract=N;var O=function(t){function e(){t.call(this)}return a(e,t),e.prototype._convertToBinaryString=function(t,e){var n=t.toString("binary_string"),r=new S(18);r.writeUInt16BE(e.mode,0),r.writeDoubleBE(e.mtime.getTime(),2),r.writeDoubleBE(e.atime.getTime(),10);var o=r.toString("binary_string");return n=o+n},e.prototype._convertFromBinaryString=function(t,e,n,r){var o=new S(e.substr(0,10),"binary_string");e=e.substr(10);var i=new S(e,"binary_string"),u=new x(this,t,n,r,i);return u._stat.mode=o.readUInt16BE(0),u._stat.mtime=new Date(o.readDoubleBE(2)),u._stat.atime=new Date(o.readDoubleBE(10)),u},e.prototype._getFileLength=function(t){return t.length>10?g.FindUtil("binary_string").byteLength(t.substr(10)):0},e}(N);e.LocalStorageModern=O;var A=function(t){function e(){t.call(this)}return a(e,t),e.prototype._convertToBinaryString=function(t,e){var n=t.toString("binary_string_ie"),r=new S(18);r.writeUInt16BE(e.mode,0),r.writeDoubleBE(e.mtime.getTime(),2),r.writeDoubleBE(e.atime.getTime(),10);var o=r.toString("binary_string_ie");return n=o+n},e.prototype._convertFromBinaryString=function(t,e,n,r){var o=new S(e.substr(0,18),"binary_string_ie");e=e.substr(18);var i=new S(e,"binary_string_ie"),u=new x(this,t,n,r,i);return u._stat.mode=o.readUInt16BE(0),u._stat.mtime=new Date(o.readDoubleBE(2)),u._stat.atime=new Date(o.readDoubleBE(10)),u},e.prototype._getFileLength=function(t){return t.length>0?t.length-18:0},e}(N);e.LocalStorageOld=A;var x=function(t){function e(e,n,r,o,i){t.call(this,e,n,r,o,i)}return a(e,t),e.prototype.syncSync=function(){this._fs._syncSync(this._path,this._buffer,this._stat)},e.prototype.closeSync=function(){this.syncSync()},e}(h.PreloadFile);e.LocalStorageFile=x;var U=!1;try{window.localStorage.setItem("__test__",String.fromCharCode(55296)),U=window.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch(B){U=!1}e.LocalStorage=U?O:A,m.registerFileSystem("LocalStorage",e.LocalStorage)});var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("backend/mountable_file_system",["require","exports","../core/file_system","./in_memory","../core/api_error","../core/node_fs","../core/browserfs"],function(t,e,n,r,o,i,u){function f(t,e){return e?function(){for(var e=[],n=0;n<arguments.length-0;n++)e[n]=arguments[n+0];var r=e[0],o=this._get_fs(r);e[0]=o.path;try{return o.fs[t].apply(o.fs,e)}catch(i){throw this.standardizeError(i,o.path,r),i}}:function(){for(var e=[],n=0;n<arguments.length-0;n++)e[n]=arguments[n+0];var r=e[0],o=this._get_fs(r);if(e[0]=o.path,"function"==typeof e[e.length-1]){var i=e[e.length-1],u=this;e[e.length-1]=function(){for(var t=[],e=0;e<arguments.length-0;e++)t[e]=arguments[e+0];t.length>0&&t[0]instanceof p.ApiError&&u.standardizeError(t[0],o.path,r),i.apply(null,t)}}return o.fs[t].apply(o.fs,e)}}var s=n,c=r,p=o,l=i,h=u,y=p.ApiError,d=p.ErrorCode,w=l.fs,g=function(t){function e(){t.call(this),this.mntMap={},this.rootFs=new c.InMemory}return a(e,t),e.prototype.mount=function(t,e){if(this.mntMap[t])throw new y(d.EINVAL,"Mount point "+t+" is already taken.");this.rootFs.mkdirSync(t,511),this.mntMap[t]=e},e.prototype.umount=function(t){if(!this.mntMap[t])throw new y(d.EINVAL,"Mount point "+t+" is already unmounted.");delete this.mntMap[t],this.rootFs.rmdirSync(t)},e.prototype._get_fs=function(t){for(var e in this.mntMap){var n=this.mntMap[e];if(0===t.indexOf(e))return t=t.substr(e.length>1?e.length:0),""===t&&(t="/"),{fs:n,path:t}}return{fs:this.rootFs,path:t}},e.prototype.getName=function(){return"MountableFileSystem"},e.isAvailable=function(){return!0},e.prototype.diskSpace=function(t,e){e(0,0)},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.standardizeError=function(t,e,n){var r;return-1!==(r=t.message.indexOf(e))&&(t.message=t.message.substr(0,r)+n+t.message.substr(r+e.length)),t},e.prototype.rename=function(t,e,n){var r=this._get_fs(t),o=this._get_fs(e);if(r.fs===o.fs){var i=this;return r.fs.rename(r.path,o.path,function(u){u&&i.standardizeError(i.standardizeError(u,r.path,t),o.path,e),n(u)})}return w.readFile(t,function(r,o){return r?n(r):(w.writeFile(e,o,function(e){return e?n(e):(w.unlink(t,n),void 0)}),void 0)})},e.prototype.renameSync=function(t,e){var n=this._get_fs(t),r=this._get_fs(e);if(n.fs===r.fs)try{return n.fs.renameSync(n.path,r.path)}catch(o){throw this.standardizeError(this.standardizeError(o,n.path,t),r.path,e),o}var i=w.readFileSync(t);return w.writeFileSync(e,i),w.unlinkSync(t)},e}(s.BaseFileSystem);e.MountableFileSystem=g;for(var v=[["readdir","exists","unlink","rmdir","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],E=0;E<v.length;E++)for(var m=v[E],S=0;S<m.length;S++){var I=m[S];g.prototype[I]=f(I,!1,E+1),g.prototype[I+"Sync"]=f(I+"Sync",!0,E+1)}h.registerFileSystem("MountableFileSystem",g)}),u("generic/xhr",["require","exports","../core/util","../core/buffer","../core/api_error"],function(t,e,n,r,o){function i(t){for(var e=IEBinaryToArray_ByteStr(t),n=IEBinaryToArray_ByteStr_Last(t),r=e.replace(/[\s\S]/g,function(t){var e=t.charCodeAt(0);return String.fromCharCode(255&e,e>>8)})+n,o=new Array(r.length),i=0;i<r.length;i++)o[i]=r.charCodeAt(i);return o}function u(t,e,n,r){switch(n){case"buffer":case"json":break;default:return r(new v(E.EINVAL,"Invalid download type: "+n))}var o=new XMLHttpRequest;o.open("GET",e,t),o.setRequestHeader("Accept-Charset","x-user-defined"),o.onreadystatechange=function(){var t;if(4===o.readyState){if(200!==o.status)return r(new v(o.status,"XHR error."));switch(n){case"buffer":return t=i(o.responseBody),r(null,new m(t));case"json":return r(null,JSON.parse(o.responseText))}}},o.send()}function a(t,e,n){u(!0,t,e,n)}function f(t,e){var n;return u(!1,t,e,function(t,e){if(t)throw t;n=e}),n}function s(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0);var o=!0;switch(e){case"buffer":r.responseType="arraybuffer";break;case"json":try{r.responseType="json",o="json"===r.responseType}catch(i){o=!1}break;default:return n(new v(E.EINVAL,"Invalid download type: "+e))}r.onreadystatechange=function(){if(4===r.readyState){if(200!==r.status)return n(new v(r.status,"XHR error."));switch(e){case"buffer":return n(null,new m(r.response?r.response:0));case"json":return o?n(null,r.response):n(null,JSON.parse(r.responseText))}}},r.send()}function c(t,e){var n=new XMLHttpRequest;n.open("GET",t,!1);var r=null,o=null;if(n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(){if(4===n.readyState){if(200!==n.status)return o=new v(n.status,"XHR error."),void 0;switch(e){case"buffer":var t=n.responseText;r=new m(t.length);for(var i=0;i<t.length;i++)r.set(i,255&t.charCodeAt(i));return;case"json":return r=JSON.parse(n.responseText),void 0}}},n.send(),o)throw o;return r}function p(t,e){var n=new XMLHttpRequest;switch(n.open("GET",t,!1),e){case"buffer":n.responseType="arraybuffer";break;case"json":break;default:throw new v(E.EINVAL,"Invalid download type: "+e)}var r,o;if(n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)switch(e){case"buffer":r=new m(n.response);break;case"json":r=JSON.parse(n.response)}else o=new v(n.status,"XHR error.")},n.send(),o)throw o;return r}function l(t,e,n){var r=new XMLHttpRequest;r.open("HEAD",e,t),r.onreadystatechange=function(){if(4===r.readyState){if(200!=r.status)return n(new v(r.status,"XHR HEAD error."));try{return n(null,parseInt(r.getResponseHeader("Content-Length"),10))}catch(t){return n(new v(E.EIO,"XHR HEAD error: Could not read content-length."))}}},r.send()}function h(t){var e;return l(!1,t,function(t,n){if(t)throw t;e=n}),e}function y(t,e){l(!0,t,e)}var d=n,w=r,g=o,v=g.ApiError,E=g.ErrorCode,m=w.Buffer;e.asyncDownloadFile=d.isIE&&"undefined"==typeof Blob?a:s,e.syncDownloadFile=d.isIE&&"undefined"==typeof Blob?f:d.isIE&&"undefined"!=typeof Blob?p:c,e.getFileSizeSync=h,e.getFileSizeAsync=y});var a=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n};u("backend/XmlHttpRequest",["require","exports","../core/file_system","../generic/file_index","../core/buffer","../core/api_error","../core/file_flag","../generic/preload_file","../core/browserfs","../generic/xhr"],function(t,e,n,r,o,i,u,f,s,c){var p=n,l=r,h=o,y=i,d=u,w=f,g=s,v=c;h.Buffer;var E=y.ApiError,m=y.ErrorCode,S=d.FileFlag,I=d.ActionType,_=function(t){function e(e,n){t.call(this),null==e&&(e="index.json"),this.prefix_url=null!=n?n:"";var r=this._requestFileSync(e,"json");if(null==r)throw new Error("Unable to find listing at URL: "+e);this._index=l.FileIndex.from_listing(r)}return a(e,t),e.prototype.empty=function(){this._index.fileIterator(function(t){t.file_data=null})},e.prototype._requestFileSizeAsync=function(t,e){v.getFileSizeAsync(this.prefix_url+t,e)},e.prototype._requestFileSizeSync=function(t){return v.getFileSizeSync(this.prefix_url+t)},e.prototype._requestFileAsync=function(t,e,n){v.asyncDownloadFile(this.prefix_url+t,e,n)},e.prototype._requestFileSync=function(t,e){return v.syncDownloadFile(this.prefix_url+t,e)},e.prototype.getName=function(){return"XmlHttpRequest"},e.isAvailable=function(){return"undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest},e.prototype.diskSpace=function(t,e){e(0,0)},e.prototype.isReadOnly=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.preloadFile=function(t,e){var n=this._index.getInode(t);if(null===n)throw new E(m.ENOENT,""+t+" not found.");n.size=e.length,n.file_data=new w.NoSyncFile(this,t,S.getFileFlag("r"),n,e)},e.prototype.stat=function(t,e,n){var r=this._index.getInode(t);if(null===r)return n(new E(m.ENOENT,""+t+" not found."));var o;r.isFile()?(o=r,o.size<0?this._requestFileSizeAsync(t,function(t,e){return t?n(t):(o.size=e,n(null,o),void 0)}):n(null,o)):(o=r.getStats(),n(null,o))},e.prototype.statSync=function(t){var e=this._index.getInode(t);if(null===e)throw new E(m.ENOENT,""+t+" not found.");var n;return e.isFile()?(n=e,n.size<0&&(n.size=this._requestFileSizeSync(t))):n=e.getStats(),n},e.prototype.open=function(t,e,n,r){var o=this,i=this._index.getInode(t);
if(null===i)return r(new E(m.ENOENT,""+t+" is not in the FileIndex."));if(i.isDirectory())return r(new E(m.EISDIR,""+t+" is a directory."));switch(e.pathExistsAction()){case I.THROW_EXCEPTION:case I.TRUNCATE_FILE:return r(new E(m.EEXIST,""+t+" already exists."));case I.NOP:if(null!=i.file_data)return r(null,i.file_data);this._requestFileAsync(t,"buffer",function(n,u){return n?r(n):(i.size=u.length,i.file_data=new w.NoSyncFile(o,t,e,i,u),r(null,i.file_data))});break;default:return r(new E(m.EINVAL,"Invalid FileMode object."))}},e.prototype.openSync=function(t,e){var n=this._index.getInode(t);if(null===n)throw new E(m.ENOENT,""+t+" is not in the FileIndex.");if(n.isDirectory())throw new E(m.EISDIR,""+t+" is a directory.");switch(e.pathExistsAction()){case I.THROW_EXCEPTION:case I.TRUNCATE_FILE:throw new E(m.EEXIST,""+t+" already exists.");case I.NOP:if(null!=n.file_data)return n.file_data;var r=this._requestFileSync(t,"buffer");return n.size=r.length,n.file_data=new w.NoSyncFile(this,t,e,n,r),n.file_data;default:throw new E(m.EINVAL,"Invalid FileMode object.")}},e.prototype.readdir=function(t,e){try{e(null,this.readdirSync(t))}catch(n){e(n)}},e.prototype.readdirSync=function(t){var e=this._index.getInode(t);if(null===e)throw new E(m.ENOENT,""+t+" not found.");if(e.isFile())throw new E(m.ENOTDIR,""+t+" is a file, not a directory.");return e.getListing()},e.prototype.readFile=function(t,e,n,r){var o=r;this.open(t,n,420,function(t,n){if(t)return r(t);r=function(t,e){n.close(function(n){return null==t&&(t=n),o(t,e)})};var i=n,u=i._buffer;if(null===e)return u.length>0?r(t,u.sliceCopy()):r(t,new h.Buffer(0));try{r(null,u.toString(e))}catch(a){r(a)}})},e}(p.BaseFileSystem);e.XmlHttpRequest=_,g.registerFileSystem("XmlHttpRequest",_)}),u("generic/emscripten_fs",["require","exports","../core/browserfs","../core/node_fs","../core/buffer","../core/buffer_core_arraybuffer"],function(t,e,n,r,o,i){var u=n,a=r,f=o,s=i,c=f.Buffer,p=s.BufferCoreArrayBuffer,l=a.fs,h=function(){function t(t){this.fs=t}return t.prototype.open=function(t){var e=this.fs.realPath(t.node);try{FS.isFile(t.node.mode)&&(t.nfd=l.openSync(e,this.fs.flagsToPermissionString(t.flags)))}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}},t.prototype.close=function(t){try{FS.isFile(t.node.mode)&&t.nfd&&l.closeSync(t.nfd)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code])}},t.prototype.read=function(t,e,n,r,o){var i,u=new p(e.buffer),a=new c(u,e.byteOffset+n,e.byteOffset+n+r);try{i=l.readSync(t.nfd,a,0,r,o)}catch(f){throw new FS.ErrnoError(ERRNO_CODES[f.code])}return i},t.prototype.write=function(t,e,n,r,o){var i,u=new p(e.buffer),a=new c(u,e.byteOffset+n,e.byteOffset+n+r);try{i=l.writeSync(t.nfd,a,0,r,o)}catch(f){throw new FS.ErrnoError(ERRNO_CODES[f.code])}return i},t.prototype.llseek=function(t,e,n){var r=e;if(1===n)r+=t.position;else if(2===n&&FS.isFile(t.node.mode))try{var o=l.fstatSync(t.nfd);r+=o.size}catch(i){throw new FS.ErrnoError(ERRNO_CODES[i.code])}if(0>r)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return t.position=r,r},t}(),y=function(){function t(t){this.fs=t}return t.prototype.getattr=function(t){var e,n=this.fs.realPath(t);try{e=l.lstatSync(n)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},t.prototype.setattr=function(t,e){var n=this.fs.realPath(t);try{if(void 0!==e.mode&&(l.chmodSync(n,e.mode),t.mode=e.mode),void 0!==e.timestamp){var r=new Date(e.timestamp);l.utimesSync(n,r,r)}void 0!==e.size&&l.truncateSync(n,e.size)}catch(o){if(!o.code)throw o;throw new FS.ErrnoError(ERRNO_CODES[o.code])}},t.prototype.lookup=function(t,e){var n=PATH.join2(this.fs.realPath(t),e),r=this.fs.getMode(n);return this.fs.createNode(t,e,r)},t.prototype.mknod=function(t,e,n,r){var o=this.fs.createNode(t,e,n,r),i=this.fs.realPath(o);try{FS.isDir(o.mode)?l.mkdirSync(i,o.mode):l.writeFileSync(i,"",{mode:o.mode})}catch(u){if(!u.code)throw u;throw new FS.ErrnoError(ERRNO_CODES[u.code])}return o},t.prototype.rename=function(t,e,n){var r=this.fs.realPath(t),o=PATH.join2(this.fs.realPath(e),n);try{l.renameSync(r,o)}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}},t.prototype.unlink=function(t,e){var n=PATH.join2(this.fs.realPath(t),e);try{l.unlinkSync(n)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}},t.prototype.rmdir=function(t,e){var n=PATH.join2(this.fs.realPath(t),e);try{l.rmdirSync(n)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}},t.prototype.readdir=function(t){var e=this.fs.realPath(t);try{return l.readdirSync(e)}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}},t.prototype.symlink=function(t,e,n){var r=PATH.join2(this.fs.realPath(t),e);try{l.symlinkSync(n,r)}catch(o){if(!o.code)throw o;throw new FS.ErrnoError(ERRNO_CODES[o.code])}},t.prototype.readlink=function(t){var e=this.fs.realPath(t);try{return l.readlinkSync(e)}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}},t}(),d=function(){function t(){if(this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.node_ops=new y(this),this.stream_ops=new h(this),"undefined"==typeof u)throw new Error("BrowserFS is not loaded. Please load it before this library.")}return t.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},t.prototype.createNode=function(t,e,n){if(!FS.isDir(n)&&!FS.isFile(n)&&!FS.isLink(n))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var r=FS.createNode(t,e,n);return r.node_ops=this.node_ops,r.stream_ops=this.stream_ops,r},t.prototype.getMode=function(t){var e;try{e=l.lstatSync(t)}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}return e.mode},t.prototype.realPath=function(t){for(var e=[];t.parent!==t;)e.push(t.name),t=t.parent;return e.push(t.mount.opts.root),e.reverse(),PATH.join.apply(null,e)},t.prototype.flagsToPermissionString=function(t){return t in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[t]:t},t}();e.BFSEmscriptenFS=d,u.EmscriptenFS=d}),window.BrowserFS=i("./core/browserfs"),i("./backend/localStorage"),i("./backend/dropbox"),i("./backend/html5fs"),i("./backend/in_memory"),i("./backend/mountable_file_system"),i("./backend/XmlHttpRequest"),i("./generic/emscripten_fs")}();
//# sourceMappingURL=browserfs.js.map